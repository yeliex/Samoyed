<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<style>
h1,
h2,
h3,
h4,
h5,
h6,
p,
blockquote {
    margin: 0;
    padding: 0;
}
body {
    font-family: "Helvetica Neue", Helvetica, "Hiragino Sans GB", Arial, sans-serif;
    font-size: 13px;
    line-height: 18px;
    color: #737373;
    background-color: white;
    margin: 10px 13px 10px 13px;
}
table {
	margin: 10px 0 15px 0;
	border-collapse: collapse;
}
td,th {	
	border: 1px solid #ddd;
	padding: 3px 10px;
}
th {
	padding: 5px 10px;	
}

a {
    color: #0069d6;
}
a:hover {
    color: #0050a3;
    text-decoration: none;
}
a img {
    border: none;
}
p {
    margin-bottom: 9px;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    color: #404040;
    line-height: 36px;
}
h1 {
    margin-bottom: 18px;
    font-size: 30px;
}
h2 {
    font-size: 24px;
}
h3 {
    font-size: 18px;
}
h4 {
    font-size: 16px;
}
h5 {
    font-size: 14px;
}
h6 {
    font-size: 13px;
}
hr {
    margin: 0 0 19px;
    border: 0;
    border-bottom: 1px solid #ccc;
}
blockquote {
    padding: 13px 13px 21px 15px;
    margin-bottom: 18px;
    font-family:georgia,serif;
    font-style: italic;
}
blockquote:before {
    content:"\201C";
    font-size:40px;
    margin-left:-10px;
    font-family:georgia,serif;
    color:#eee;
}
blockquote p {
    font-size: 14px;
    font-weight: 300;
    line-height: 18px;
    margin-bottom: 0;
    font-style: italic;
}
code, pre {
    font-family: Monaco, Andale Mono, Courier New, monospace;
}
code {
    background-color: #fee9cc;
    color: rgba(0, 0, 0, 0.75);
    padding: 1px 3px;
    font-size: 12px;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
}
pre {
    display: block;
    padding: 14px;
    margin: 0 0 18px;
    line-height: 16px;
    font-size: 11px;
    border: 1px solid #d9d9d9;
    white-space: pre-wrap;
    word-wrap: break-word;
}
pre code {
    background-color: #fff;
    color:#737373;
    font-size: 11px;
    padding: 0;
}
sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}
* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:10px auto;
    }
}
@media print {
	body,code,pre code,h1,h2,h3,h4,h5,h6 {
		color: black;
	}
	table, pre {
		page-break-inside: avoid;
	}
}
</style>
<title>Project-Samoyed Docs</title>

</head>
<body>
<h1>Project-Samoyed Docs</h1>

<p><img src="http://25.io/mou/Mou_128.png" title="Samoyed" alt="Project icon" /></p>

<h2>API Document</h2>

<p>Api document of project-<strong>Samoyed</strong></p>

<h3>Document Update</h3>

<hr />

<table>
<thead>
<tr>
<th>Version </th>
<th> Date </th>
<th> Update</th>
</tr>
</thead>
<tbody>
<tr>
<td>V 1.0  </td>
<td> 2015-07-1  </td>
<td> 第一代版本文档</td>
</tr>
<tr>
<td>V 1.1  </td>
<td> 2015-07-20 </td>
<td> 更新了请求接口: 新增全局参数(协议),列表参数(城市编码)</td>
</tr>
<tr>
<td>V 2.0  </td>
<td> 2015-07-23 </td>
<td> 项目文档更新</td>
</tr>
<tr>
<td>V 2.1  </td>
<td> 2015-07-25 </td>
<td> 启用新的API域名</td>
</tr>
<tr>
<td>V 2.5  </td>
<td> 2015-08-1 </td>
<td> 更新了item接口中的价格/面积/图片获取(直接获取具体数值)</td>
</tr>
<tr>
<td>V 3.0  </td>
<td> 2015-08-7 </td>
<td> 新增units接口获取户型,更新了所有接口的返回数据(下划线连接)</td>
</tr>
<tr>
<td>V 3.1  </td>
<td> 2015-08-10 </td>
<td> item接口更新: 新增返回参数: dog_add(返回地址),dog_desc(返回详细介绍)</td>
</tr>
<tr>
<td>V 4.0  </td>
<td> 2015-08-10 </td>
<td> 新增item/images接口获取建筑图片，修改units接口为item/units</td>
</tr>
</tbody>
</table>


<h3>通用接口</h3>

<hr />

<h4>相关约定</h4>

<ul>
<li>接口地址:

<ul>
<li>服务接口为api.mzapp.info</li>
<li>开发测试接口为 api.dev.mzapp.info</li>
</ul>
</li>
<li>接口格式: domain.com/class/function/argument?parameters

<ul>
<li>domain.com: 相关接口域名,必填</li>
<li>class: 相关接口类,对应modules文件夹下的class.module.php文件,必填</li>
<li>function: 调用的方法,必填</li>
<li>argument: 附加的方法参数,在调用方法时传递给function,选填</li>
<li>parameters: 请求时附加的GET参数,无论POST还是GET都应附加protocol参数.必填</li>
</ul>
</li>
<li>请求方式:

<ul>
<li>GET</li>
<li>POST</li>
</ul>
</li>
<li>附加约定:

<ul>
<li>无论是POST还是GET请求都应该以GET方式传递一个protocol参数,默认为json.用以获取json格式的返回值.</li>
<li>接口中的class与function应注意保留值以避免冲突(如list使用plist代替)</li>
<li>为了避免格式冲突,请求的参数都应该使用string字符串类型</li>
</ul>
</li>
<li>返回值约定

<ul>
<li>根据请求参数中的protocol返回不同的内容</li>
<li>json类型: 返回json格式的字符串

<ul>
<li>php中使用send_json()发送固定格式的返回值,可以有三个参数.

<ul>
<li>error_code: 预定义的错误代码,成功为0返回success</li>
<li>data: json格式的数组,代表返回值,可以为空</li>
<li>num: data中的数据条数,可以为空</li>
</ul>
</li>
<li>返回值具有五个参数.考虑到解析问题,每个参数必须带上

<ul>
<li>status: 请求状态.一般代表操作是否成功,如果操作成功没有结果也会返回success</li>
<li>error_code: 预定义的错误代码,成功则为0</li>
<li>error_info: 预定义的错误信息,成功则为空</li>
<li>num: 返回的数据条数,某些情况可能为0</li>
<li>overview: 返回的json格式的数据组.为符合全局接口规范,日后应修改为data</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


<hr />

<h4>1. 列表请求接口类</h4>

<p><strong>Address:</strong></p>

<blockquote><p><strong>/plist</strong></p></blockquote>

<p><strong>Description:</strong>  <strong><em>获取符合条件的item列表的接口</em></strong></p>

<p><strong>Request: </strong></p>

<table>
<thead>
<tr>
<th>参数 </th>
<th> 必填 </th>
<th> 值 </th>
<th> 默认值   </th>
<th>   描述      </th>
<th>   示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>city </td>
<td> true </td>
<td> 城市编码 </td>
<td> 0571(杭州) </td>
<td> 选择城市 </td>
<td> 0571</td>
</tr>
<tr>
<td>district </td>
<td> true </td>
<td> 区域代码  </td>
<td>   0(选择全部)    </td>
<td>   城区选择    </td>
<td>    310051(滨江区)</td>
</tr>
<tr>
<td>size    </td>
<td> true  </td>
<td>   面积区间编号  </td>
<td>   0(选择全部)    </td>
<td>   选择面积    </td>
<td>    1</td>
</tr>
<tr>
<td>price   </td>
<td> true  </td>
<td>   价格区间编号  </td>
<td>   0(选择全部)    </td>
<td>   选择价格    </td>
<td>    1</td>
</tr>
<tr>
<td>page    </td>
<td> false </td>
<td>   页码          </td>
<td>   0(选择第一页)  </td>
<td>   选择显示页码,预留参数 </td>
<td> 1(第一页)</td>
</tr>
<tr>
<td>target </td>
<td> false </td>
<td> 搜索行为(list/search) </td>
<td> list </td>
<td> 表示是显示列表/搜索,不填/keyword为空时则默认list </td>
<td> list</td>
</tr>
<tr>
<td>keyword </td>
<td> false </td>
<td> 搜索关键字 </td>
<td> / </td>
<td> 搜索关键字,仅当target=search时有效 </td>
<td> keyword</td>
</tr>
</tbody>
</table>


<p><strong>Return:</strong></p>

<table>
<thead>
<tr>
<th>参数 </th>
<th> 值 </th>
<th> 描述 </th>
<th> 示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>overview    </td>
<td> 详细信息   </td>
<td>   当前页所有值的详细信息 </td>
<td> b1['ID']=310051001; b1['Name']='汇智地';</td>
</tr>
</tbody>
</table>


<p><strong>overview参数:</strong></p>

<table>
<thead>
<tr>
<th>参数  </th>
<th> 值   </th>
<th> 描述 </th>
<th> 示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>dog_id </td>
<td> ID </td>
<td>   建筑DI    </td>
<td>   310051001</td>
</tr>
<tr>
<td>dog_name    </td>
<td> 名字 </td>
<td>  建筑名字    </td>
<td> 汇智地</td>
</tr>
<tr>
<td>dog_area    </td>
<td>  商圈   </td>
<td>   建筑所在商圈  </td>
<td>   滨江商圈</td>
</tr>
<tr>
<td>dog_size </td>
<td> 面积 </td>
<td> 建筑面积范围(平方米)   </td>
<td>   300-800</td>
</tr>
<tr>
<td>dog_price </td>
<td> 价格  </td>
<td>   建筑最低价格(元/月/平方米) </td>
<td>   35</td>
</tr>
<tr>
<td>dog_pic </td>
<td> 连接     </td>
<td>  标题图片    </td>
<td>   img.domain.com/dogID.img</td>
</tr>
</tbody>
</table>


<p><strong>Notice:</strong></p>

<ol>
<li>区域编码</li>
<li>面积区间对应编号</li>
<li>价格区间对应编号</li>
</ol>


<hr />

<h4>2. 详细内容获取类</h4>

<p><strong>Class</strong></p>

<blockquote><p><strong> /item </strong></p></blockquote>

<hr />

<h5>1.  获取item详细信息</h5>

<p><strong>Path:</strong></p>

<blockquote><p><strong>/</strong></p></blockquote>

<p><strong>Description:</strong>  <strong><em>根据ID获取item的详细信息</em></strong></p>

<p><strong>Request:</strong>   <strong><em>GET</em></strong></p>

<table>
<thead>
<tr>
<th>参数 </th>
<th> 值 </th>
<th> 默认值    </th>
<th>   描述      </th>
<th>   示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>id  </td>
<td>   建筑ID    </td>
<td>   ∕ </td>
<td>   当前页显示的建筑ID  </td>
<td> 310051</td>
</tr>
</tbody>
</table>


<p><strong>Return:</strong></p>

<table>
<thead>
<tr>
<th>参数 </th>
<th> 值 </th>
<th> 描述 </th>
<th> 示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>overview    </td>
<td>   详细信息   </td>
<td>   当前建筑的详细信息 </td>
<td> b1['dog_id']=310051001; b1['dog_name']='汇智地';</td>
</tr>
</tbody>
</table>


<p><strong>overview参数:</strong></p>

<table>
<thead>
<tr>
<th>参数  </th>
<th> 值   </th>
<th> 描述 </th>
<th> 示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>dog_id </td>
<td> ID </td>
<td>   建筑DI    </td>
<td>   310051001</td>
</tr>
<tr>
<td>dog_name    </td>
<td> 名字 </td>
<td>  建筑名字 </td>
<td> 汇智地</td>
</tr>
<tr>
<td>dog_area    </td>
<td> 商圈    </td>
<td>   建筑所在商圈 </td>
<td> 滨江商圈</td>
</tr>
<tr>
<td>dog_district </td>
<td> 区  </td>
<td>   建筑所在区邮编 </td>
<td> 310051</td>
</tr>
<tr>
<td>dog_add </td>
<td> 地址    </td>
<td>   建筑地址 </td>
<td> 南环路</td>
</tr>
<tr>
<td>dog_pos </td>
<td> 坐标    </td>
<td>   建筑坐标(经纬度) </td>
<td> 111|111</td>
</tr>
<tr>
<td>dog_size </td>
<td> 面积 </td>
<td> 建筑面积范围(平方米)</td>
<td> 300-800</td>
</tr>
<tr>
<td>dog_price </td>
<td> 价格  </td>
<td> 建筑最低价格(元/月/平方米) </td>
<td>  35</td>
</tr>
<tr>
<td>dog_desc </td>
<td> 描述   </td>
<td> 建筑详细描述 </td>
<td>  ...</td>
</tr>
<tr>
<td>dog_pic </td>
<td> 链接 </td>
<td> 大图图片 </td>
<td> http://domain.com/img.jpg</td>
</tr>
<tr>
<td>pic_num </td>
<td> 数量 </td>
<td>  图片数量 </td>
<td> 5</td>
</tr>
<tr>
<td>units_num </td>
<td> 数量 </td>
<td> 所有房型的数量 </td>
<td> 5</td>
</tr>
</tbody>
</table>


<hr />

<h5>2. 获取item详细信息</h5>

<p><strong>Path:</strong></p>

<blockquote><p><strong>/item/units</strong></p></blockquote>

<p><strong>Description:</strong>  <strong><em>根据ID获取units的详细信息</em></strong></p>

<p><strong>Request:</strong>   <strong><em>GET</em></strong></p>

<table>
<thead>
<tr>
<th>参数 </th>
<th>  值 </th>
<th> 默认值   </th>
<th>   描述      </th>
<th>   示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>id  </td>
<td>   建筑ID    </td>
<td>   ∕ </td>
<td>   当前页显示的建筑ID  </td>
<td> 310051</td>
</tr>
</tbody>
</table>


<p><strong>Return:</strong></p>

<table>
<thead>
<tr>
<th>参数 </th>
<th> 值 </th>
<th> 描述 </th>
<th> 示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>overview    </td>
<td>   详细信息   </td>
<td>   当前建筑所有户型的详细信息 </td>
<td> b1['unit_id']=310051001; b1['Name']='汇智地';</td>
</tr>
</tbody>
</table>


<p><strong>overview参数:</strong></p>

<table>
<thead>
<tr>
<th>参数  </th>
<th> 值   </th>
<th> 描述 </th>
<th> 示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>unit_id </td>
<td> ID </td>
<td>  户型DI    </td>
<td>   310051001001</td>
</tr>
<tr>
<td>unit_name </td>
<td> 名字 </td>
<td>    户型名字    </td>
<td> 户型1</td>
</tr>
<tr>
<td>unit_size </td>
<td> 面积 </td>
<td> 户型面积(平方米) </td>
<td> 200</td>
</tr>
<tr>
<td>unit_price </td>
<td> 价格 </td>
<td> 户型价格(元/月/平方米) </td>
<td> 35</td>
</tr>
<tr>
<td>unit_deco </td>
<td> 装修 </td>
<td> 装修类型 </td>
<td> 精装修</td>
</tr>
<tr>
<td>unit_pic </td>
<td> 链接 </td>
<td> 户型图片 </td>
<td> img.domain.com/unit1.img</td>
</tr>
</tbody>
</table>


<hr />

<h5>3. 获取item图片信息</h5>

<p><strong>Path:</strong></p>

<blockquote><p><strong>/item/images</strong></p></blockquote>

<p><strong>Description:</strong>  <strong><em>根据ID获取Item的图片信息</em></strong></p>

<p><strong>Request:</strong>   <strong><em>GET</em></strong></p>

<table>
<thead>
<tr>
<th>参数 </th>
<th>  值 </th>
<th> 默认值   </th>
<th>   描述      </th>
<th>   示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>id  </td>
<td> 建筑ID  </td>
<td>   ∕ </td>
<td>   当前页显示的建筑ID  </td>
<td> 310051</td>
</tr>
</tbody>
</table>


<p><strong>Return:</strong></p>

<table>
<thead>
<tr>
<th>参数 </th>
<th>值 </th>
<th> 描述 </th>
<th> 示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>overview    </td>
<td> 详细信息   </td>
<td>   当前建筑所有图片的详细信息 </td>
<td> i1['image_id']=310051001; i1['image_url']='http://domain.com/image1.jpg';</td>
</tr>
</tbody>
</table>


<p><strong>overview参数:</strong></p>

<table>
<thead>
<tr>
<th>参数  </th>
<th> 值   </th>
<th> 描述 </th>
<th> 示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>image_id </td>
<td> ID </td>
<td> 图片DI    </td>
<td>   310051001001</td>
</tr>
<tr>
<td>image_name </td>
<td> 名字 </td>
<td>   图片名字    </td>
<td>   图片1</td>
</tr>
<tr>
<td>image_url </td>
<td> 链接 </td>
<td> 图片连接 </td>
<td> img.domain.com/image1.img</td>
</tr>
</tbody>
</table>


<hr />

<h5>4. 获取item所有图片信息</h5>

<p><strong>Path:</strong></p>

<blockquote><p><strong>/item/allImages</strong></p></blockquote>

<p><strong>Description:</strong>  <strong><em>根据ID获取Item的所有图片信息(包括不可用图片)</em></strong></p>

<p><strong>Request:</strong>  <strong><em>GET</em></strong></p>

<table>
<thead>
<tr>
<th>参数 </th>
<th>  值 </th>
<th> 默认值   </th>
<th>   描述      </th>
<th>   示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>id  </td>
<td> 建筑ID  </td>
<td>   ∕ </td>
<td>   当前页显示的建筑ID  </td>
<td> 310051</td>
</tr>
</tbody>
</table>


<p><strong>Return:</strong></p>

<table>
<thead>
<tr>
<th>参数 </th>
<th>值 </th>
<th> 描述 </th>
<th> 示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>overview    </td>
<td> 详细信息   </td>
<td>   当前建筑所有图片的详细信息 </td>
<td> i1['image_id']=310051001; i1['image_url']='http://domain.com/image1.jpg';</td>
</tr>
</tbody>
</table>


<p><strong>overview参数:</strong></p>

<table>
<thead>
<tr>
<th>参数  </th>
<th> 值   </th>
<th> 描述 </th>
<th> 示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>image_id </td>
<td> ID </td>
<td> 图片DI    </td>
<td>   310051001001</td>
</tr>
<tr>
<td>image_name </td>
<td> 名字 </td>
<td>   图片名字    </td>
<td>   图片1</td>
</tr>
<tr>
<td>image_url </td>
<td> 链接 </td>
<td> 图片连接 </td>
<td> img.domain.com/image1.img</td>
</tr>
<tr>
<td>image_avaliable </td>
<td> 是否可用 </td>
<td> 图片是否可用</td>
<td> true/false</td>
</tr>
</tbody>
</table>


<hr />

<h4>3. 预约用户相关类</h4>

<p><strong>Class</strong></p>

<blockquote><p><strong> /appointuser </strong></p></blockquote>

<hr />

<h5>1.  判断用户是否存在</h5>

<p><strong>Path:</strong></p>

<blockquote><p><strong>/userExisted</strong></p></blockquote>

<p><strong>Description:</strong>  <strong><em>根据手机号判断用户是否已存在</em></strong></p>

<p><strong>Request:</strong>   <strong><em>GET</em></strong></p>

<table>
<thead>
<tr>
<th>参数 </th>
<th> 值 </th>
<th> 默认值    </th>
<th>   描述      </th>
<th>   示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>phone   </td>
<td>   手机号   </td>
<td>   ∕ </td>
<td>   用户手机号  </td>
<td> 13111111111</td>
</tr>
</tbody>
</table>


<p><strong>overview参数:</strong></p>

<table>
<thead>
<tr>
<th>参数  </th>
<th> 值   </th>
<th> 描述 </th>
<th> 示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>status </td>
<td> error/success </td>
<td> 当前号码用户数是否为1 </td>
<td> error/success</td>
</tr>
<tr>
<td>uid </td>
<td> 用户ID </td>
<td> 当前号码用户ID </td>
<td> 1</td>
</tr>
</tbody>
</table>


<hr />

<h5>2.  用户登录</h5>

<p><strong>Path:</strong></p>

<blockquote><p><strong>/userLogin</strong></p></blockquote>

<p><strong>Description:</strong>  <strong><em>判断用户是否存在,存在则写入session登录,不存在返回错误</em></strong></p>

<p><strong>Request:</strong>   <strong><em>POST</em></strong></p>

<table>
<thead>
<tr>
<th>参数 </th>
<th> 值 </th>
<th> 默认值    </th>
<th>   描述      </th>
<th>   示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>uid </td>
<td>   用户ID    </td>
<td>   ∕ </td>
<td>   用户在数据库中的唯一标示符  </td>
<td> 1</td>
</tr>
</tbody>
</table>


<p><strong>Return:</strong></p>

<table>
<thead>
<tr>
<th>参数  </th>
<th> 值   </th>
<th> 描述 </th>
<th> 示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>status </td>
<td> error/success </td>
<td> 登录是否成功 </td>
<td> error/success</td>
</tr>
</tbody>
</table>


<hr />

<h5>3.  用户注销</h5>

<p><strong>Path:</strong></p>

<blockquote><p><strong>/userLogout</strong></p></blockquote>

<p><strong>Description:</strong>  <strong><em>直接删除session用户登录信息以注销</em></strong></p>

<p><strong>Request:</strong>   <strong><em>GET</em></strong></p>

<pre><code>* 无需参数
</code></pre>

<p><strong>overview参数:</strong></p>

<pre><code>* 只会返回success
</code></pre>

<hr />

<h5>4.  用户信息</h5>

<p><strong>Path:</strong></p>

<blockquote><p><strong>/userLogin</strong></p></blockquote>

<p><strong>Description:</strong>  <strong><em>工具用户ID返回用户信息</em></strong></p>

<p><strong>Request:</strong>   <strong><em>GET</em></strong></p>

<table>
<thead>
<tr>
<th>参数 </th>
<th> 值 </th>
<th> 默认值    </th>
<th>   描述      </th>
<th>   示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>uid </td>
<td>   用户ID    </td>
<td>   ∕ </td>
<td>   用户在数据库中的唯一标示符  </td>
<td> 1</td>
</tr>
</tbody>
</table>


<p><strong>Overview参数:</strong></p>

<table>
<thead>
<tr>
<th>参数  </th>
<th>描述 </th>
<th> 示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>user_id </td>
<td> 用户ID </td>
<td> 1</td>
</tr>
<tr>
<td>user_name </td>
<td> 用户名称 </td>
<td> user</td>
</tr>
<tr>
<td>user_phone </td>
<td> 用户手机号 </td>
<td> 13111111111</td>
</tr>
<tr>
<td>user_title </td>
<td> 用户称呼 </td>
<td> 先生/女士</td>
</tr>
<tr>
<td>contacts_email </td>
<td> 用户email地址 </td>
<td> mail@domain.com</td>
</tr>
<tr>
<td>contacts_phone </td>
<td> 备用联系方式 </td>
<td> 0571-8717171</td>
</tr>
<tr>
<td>team_type </td>
<td> 团队类型 </td>
<td> 团队/个人</td>
</tr>
<tr>
<td>team_info </td>
<td> 团队信息 </td>
<td> 10人以下</td>
</tr>
<tr>
<td>extract_district </td>
<td> 所在区 </td>
<td> 滨江区</td>
</tr>
<tr>
<td>extract_address </td>
<td> 默认接送地址 </td>
<td> 南环路</td>
</tr>
<tr>
<td>selection_ads </td>
<td> 是否允许后续邮件广告 </td>
<td> true/false</td>
</tr>
</tbody>
</table>


<hr />

<h5>5.  保存用户(新用户信息保存)</h5>

<p><strong>Path:</strong></p>

<blockquote><p><strong>/userSave</strong></p></blockquote>

<p><strong>Description:</strong>  <strong><em>保存新用户的信息</em></strong></p>

<p><strong>Request:</strong>   <strong><em>POST</em></strong></p>

<table>
<thead>
<tr>
<th>参数 </th>
<th>  描述        </th>
<th>   示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>phone   </td>
<td> 用户在数据库中的唯一标示符  </td>
<td> 1</td>
</tr>
<tr>
<td>personal['name'] </td>
<td> 用户名字 </td>
<td> user</td>
</tr>
<tr>
<td>personal['title'] </td>
<td> 用户称呼 </td>
<td> 先生/女士</td>
</tr>
<tr>
<td>contacts['email'] </td>
<td> 用户电子邮件地址 </td>
<td> mail@domain.com</td>
</tr>
<tr>
<td>contacts['phone'] </td>
<td> 用户备用联系号码 </td>
<td> 0571-87111111</td>
</tr>
<tr>
<td>team['team'] </td>
<td> 团队类型 </td>
<td> 个人/团队</td>
</tr>
<tr>
<td>team['info'] </td>
<td> 团队信息 </td>
<td> 10人以下</td>
</tr>
<tr>
<td>extract['district'] </td>
<td> 用户所在区 </td>
<td> 滨江区</td>
</tr>
<tr>
<td>extract['address'] </td>
<td> 默认接送地址 </td>
<td> 南环路</td>
</tr>
<tr>
<td>selection['ads'] </td>
<td> 允许广告 </td>
<td> true/false</td>
</tr>
<tr>
<td>reg_date </td>
<td> 注册日期 </td>
<td> 20151005</td>
</tr>
</tbody>
</table>


<p><strong>Overview参数:</strong></p>

<table>
<thead>
<tr>
<th>参数  </th>
<th>描述 </th>
<th> 示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>status </td>
<td> 注册是否成功</td>
<td> success/failed</td>
</tr>
</tbody>
</table>


<hr />

<h5>6.  注册回滚</h5>

<p><strong>Path:</strong></p>

<blockquote><p><strong>/registerFailed</strong></p></blockquote>

<p><strong>Description:</strong>  <strong><em>注册失败以后的回滚操作</em></strong></p>

<p><strong>Request:</strong>   <strong><em>POST</em></strong></p>

<table>
<thead>
<tr>
<th>参数 </th>
<th>  描述        </th>
<th>   示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>id </td>
<td> 要回滚的用户ID </td>
<td> 1</td>
</tr>
</tbody>
</table>


<p><strong>Overview参数:</strong></p>

<pre><code>* 只返回success
</code></pre>

<hr />

<h4>4. 预约操作相关类</h4>

<p><strong>Class</strong></p>

<blockquote><p><strong> /appointment </strong></p></blockquote>

<hr />

<h4>1. 用户登录查询</h4>

<p><strong>Path:</strong></p>

<blockquote><p><strong>/logined</strong></p></blockquote>

<p><strong>Description:</strong>  <strong><em>查询用户是否已登录</em></strong></p>

<p><strong>Request:</strong>   <strong><em>GET</em></strong></p>

<p><strong>Return</strong></p>

<pre><code>*只会返回success
</code></pre>

<p><strong>Overview参数</strong>
参数 |  描述        |   示例
------------ | ------------- | ------------
user_status | 是否已登录 | success/failed
user_id | 用户ID | 1</p>

<hr />

<h4>2. 验证短信发送</h4>

<p><strong>Path:</strong></p>

<blockquote><p><strong>/sendVarify</strong></p></blockquote>

<p><strong>Description:</strong>  <strong><em>向用户发送验证短信</em></strong></p>

<p><strong>Request:</strong>   <strong><em>POST</em></strong>
参数 |  描述        |   示例
------------ | ------------- | ------------
phone | 需要发送验证码的目标手机号 | 13111111111</p>

<p><strong>Return</strong>
参数 |  描述        |   示例
------------ | ------------- | ------------
status | 是否允许发送(手机号长度不为11返回failed) | success/failed</p>

<p><strong>Overview参数</strong>
参数 |  描述        |   示例
------------ | ------------- | ------------
respCode | 发送结果代码 | 000000
varifyCode | 发送的验证码 | 123456</p>

<h4>3. 预约保存接口</h4>

<p><strong>Path:</strong></p>

<blockquote><p><strong>/saveAppointment</strong></p></blockquote>

<p><strong>Description:</strong>  <strong><em>保存用户提交的预约信息</em></strong></p>

<p><strong>Request:</strong>   <strong><em>POST</em></strong>
参数 |  描述        |   示例
------------ | ------------- | ------------
uid | 用户ID | 1
bid | 建筑ID | 310051001
time['date'] | 预约日期 | 20151005
time['time'] | 预约时间 | 上午/下午/晚上
uaddress | 接送地址 | 滨江区汇智地
ucontacts['uphone'] | 备用联系方式 | 0571-87101110</p>

<p><strong>OverView</strong>
参数 |  描述        |   示例
------------ | ------------- | ------------
id | 预约ID编号 | 20151005001</p>

<pre><code>* 无论预约成功与否都会返回id
</code></pre>

<hr />

<h5>4.  预约回滚</h5>

<p><strong>Path:</strong></p>

<blockquote><p><strong>/appointmentFailed</strong></p></blockquote>

<p><strong>Description:</strong>  <strong><em>预约保存失败以后的回滚操作</em></strong></p>

<p><strong>Request:</strong>   <strong><em>GET</em></strong></p>

<table>
<thead>
<tr>
<th>参数 </th>
<th>  描述        </th>
<th>   示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>id </td>
<td> 要回滚的预约ID </td>
<td> 1</td>
</tr>
</tbody>
</table>


<p><strong>Overview参数:</strong></p>

<pre><code>* 只返回success
</code></pre>

<hr />

<h5>5. 判断预约是否已存在</h5>

<p><strong>Path:</strong></p>

<blockquote><p><strong>/alreadyAppointed</strong></p></blockquote>

<p><strong>Description:</strong>  <strong><em>判断预约是否已存在</em></strong></p>

<p><strong>Request:</strong>   <strong><em>POST</em></strong>
参数 |  描述        |   示例
------------ | ------------- | ------------
uid | 用户ID | 1
bid | 建筑ID | 310051001</p>

<p><strong>OverView</strong>
参数 |  描述        |   示例
------------ | ------------- | ------------
apointed | 预约是否已存在 | yes/no</p>

<hr />

<h5>5. 发送预约成功提醒邮件</h5>

<p><strong>Path:</strong></p>

<blockquote><p><strong>/simpleAppointment</strong></p></blockquote>

<p><strong>Description:</strong>  <strong><em>发送预约成功提醒邮件</em></strong></p>

<p><strong>Request:</strong>   <strong><em>POST</em></strong>
参数 |  描述        |   示例
------------ | ------------- | ------------
mail | 邮件地址 | mail@domain.com
type | 团队类型 | 个人/团队
user | 用户名+成为 | user 显示
phone | 手机号 | 13111111111
info | 额外信息 | 地址etc</p>

<p><strong>OverView</strong></p>

<pre><code>* 直接返回邮件发送方返回结果
</code></pre>
</body>
</html>