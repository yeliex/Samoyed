!function(Y,D){function ah(at,ap){for(var ar,aq=[],au=0;au<at.length;++au){if(ar=C[at[au]]||y(at[au]),!ar){throw"module definition dependecy not found: "+at[au]}aq.push(ar)}ap.apply(null,aq)}function ac(ar,aq,ap){if("string"!=typeof ar){throw"invalid module definition, module id must be defined and be a string"}if(aq===D){throw"invalid module definition, dependencies must be specified"}if(ap===D){throw"invalid module definition, definition function must be specified"}ah(aq,function(){C[ar]=ap.apply(null,arguments)})}function B(ap){return !!C[ap]}function y(ap){for(var ar=Y,aq=ap.split(/[.\/]/),at=0;at<aq.length;++at){if(!ar[aq[at]]){return}ar=ar[aq[at]]}return ar}function ak(aq){for(var au=0;au<aq.length;au++){for(var at=Y,ar=aq[au],ap=ar.split(/[.\/]/),av=0;av<ap.length-1;++av){at[ap[av]]===D&&(at[ap[av]]={}),at=at[ap[av]]}at[ap[ap.length-1]]=C[ar]}}var C={},E="moxie/core/utils/Basic",an="moxie/core/utils/Env",af="moxie/core/I18n",ao="moxie/core/utils/Mime",ab="moxie/core/utils/Dom",Z="moxie/core/Exceptions",z="moxie/core/EventTarget",ag="moxie/runtime/Runtime",aa="moxie/runtime/RuntimeClient",F="moxie/file/FileInput",H="moxie/core/utils/Encode",K="moxie/file/Blob",a="moxie/file/File",ai="moxie/file/FileDrop",am="moxie/file/FileReader",I="moxie/core/utils/Url",n="moxie/runtime/RuntimeTarget",S="moxie/file/FileReaderSync",e="moxie/xhr/FormData",p="moxie/xhr/XMLHttpRequest",o="moxie/runtime/Transporter",k="moxie/image/Image",W="moxie/runtime/html5/Runtime",j="moxie/core/utils/Events",h="moxie/runtime/html5/file/FileInput",V="moxie/runtime/html5/file/Blob",i="moxie/runtime/html5/file/FileDrop",b="moxie/runtime/html5/file/FileReader",l="moxie/runtime/html5/xhr/XMLHttpRequest",d="moxie/runtime/html5/utils/BinaryReader",T="moxie/runtime/html5/image/JPEGHeaders",ae="moxie/runtime/html5/image/ExifParser",q="moxie/runtime/html5/image/JPEG",c="moxie/runtime/html5/image/PNG",L="moxie/runtime/html5/image/ImageInfo",A="moxie/runtime/html5/image/MegaPixel",ad="moxie/runtime/html5/image/Image",u="moxie/runtime/flash/Runtime",r="moxie/runtime/flash/file/FileInput",s="moxie/runtime/flash/file/Blob",v="moxie/runtime/flash/file/FileReader",Q="moxie/runtime/flash/file/FileReaderSync",f="moxie/runtime/flash/xhr/XMLHttpRequest",w="moxie/runtime/flash/runtime/Transporter",g="moxie/runtime/flash/image/Image",m="moxie/runtime/silverlight/Runtime",al="moxie/runtime/silverlight/file/FileInput",t="moxie/runtime/silverlight/file/Blob",x="moxie/runtime/silverlight/file/FileDrop",O="moxie/runtime/silverlight/file/FileReader",J="moxie/runtime/silverlight/file/FileReaderSync",M="moxie/runtime/silverlight/xhr/XMLHttpRequest",X="moxie/runtime/silverlight/runtime/Transporter",R="moxie/runtime/silverlight/image/Image",G="moxie/runtime/html4/Runtime",P="moxie/runtime/html4/file/FileInput",N="moxie/runtime/html4/file/FileReader",U="moxie/runtime/html4/xhr/XMLHttpRequest",aj="moxie/runtime/html4/image/Image";ac(E,[],function(){var aD=function(aF){var aE;return aF===aE?"undefined":null===aF?"null":aF.nodeType?"node":{}.toString.call(aF).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},at=function(aE){var aF;return aw(arguments,function(aG,aH){aH>0&&aw(aG,function(aI,aJ){aI!==aF&&(aD(aE[aJ])===aD(aI)&&~az(aD(aI),["array","object"])?at(aE[aJ],aI):aE[aJ]=aI)})}),aE},aw=function(aH,aE){var aI,aG,aF,aJ;if(aH){if("number"===aD(aH.length)){for(aF=0,aI=aH.length;aI>aF;aF++){if(aE(aH[aF],aF)===!1){return}}}else{if("object"===aD(aH)){for(aG in aH){if(aH.hasOwnProperty(aG)&&aE(aH[aG],aG)===!1){return}}}}}},au=function(aE){var aF;if(!aE||"object"!==aD(aE)){return !0}for(aF in aE){return !1}return !0},aA=function(aI,aF){function aE(aJ){"function"===aD(aI[aJ])&&aI[aJ](function(aK){++aJ<aG&&!aK?aE(aJ):aF(aK)})}var aH=0,aG=aI.length;"function"!==aD(aF)&&(aF=function(){}),aI&&aI.length||aF(),aE(aH)},ax=function(aG,aI){var aE=0,aH=aG.length,aF=new Array(aH);aw(aG,function(aK,aJ){aK(function(aL){if(aL){return aI(aL)}var aM=[].slice.call(arguments);aM.shift(),aF[aJ]=aM,aE++,aE===aH&&(aF.unshift(null),aI.apply(this,aF))})})},az=function(aG,aH){if(aH){if(Array.prototype.indexOf){return Array.prototype.indexOf.call(aH,aG)}for(var aF=0,aE=aH.length;aE>aF;aF++){if(aH[aF]===aG){return aF}}}return -1},ar=function(aH,aF){var aE=[];"array"!==aD(aH)&&(aH=[aH]),"array"!==aD(aF)&&(aF=[aF]);for(var aG in aH){-1===az(aH[aG],aF)&&aE.push(aH[aG])}return aE.length?aE:!1},ay=function(aF,aG){var aE=[];return aw(aF,function(aH){-1!==az(aH,aG)&&aE.push(aH)}),aE.length?aE:null},aB=function(aG){var aE,aF=[];for(aE=0;aE<aG.length;aE++){aF[aE]=aG[aE]}return aF},av=function(){var aE=0;return function(aG){var aF=(new Date).getTime().toString(32),aH;for(aH=0;5>aH;aH++){aF+=Math.floor(65535*Math.random()).toString(32)}return(aG||"o_")+aF+(aE++).toString(32)}}(),aC=function(aE){return aE?String.prototype.trim?String.prototype.trim.call(aE):aE.toString().replace(/^\s*/,"").replace(/\s*$/,""):aE},aq=function(aG){if("string"!=typeof aG){return aG}var aE={t:1099511627776,g:1073741824,m:1048576,k:1024},aF;return aG=/^([0-9\.]+)([tmgk]?)$/.exec(aG.toLowerCase().replace(/[^0-9\.tmkg]/g,"")),aF=aG[2],aG=+aG[1],aE.hasOwnProperty(aF)&&(aG*=aE[aF]),Math.floor(aG)},ap=function(aE){var aF=[].slice.call(arguments,1);return aE.replace(/%[a-z]/g,function(){var aG=aF.shift();return"undefined"!==aD(aG)?aG:""})};return{guid:av,typeOf:aD,extend:at,each:aw,isEmptyObj:au,inSeries:aA,inParallel:ax,inArray:az,arrayDiff:ar,arrayIntersect:ay,toArray:aB,trim:aC,sprintf:ap,parseSizeStr:aq}}),ac(an,[E],function(au){function ap(ay,aE,aA){var az=0,aC=0,aB=0,ax={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},aD=function(aF){return aF=(""+aF).replace(/[_\-+]/g,"."),aF=aF.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,"."),aF.length?aF.split("."):[-8]},aw=function(aF){return aF?isNaN(aF)?ax[aF]||-7:parseInt(aF,10):0};for(ay=aD(ay),aE=aD(aE),aC=Math.max(ay.length,aE.length),az=0;aC>az;az++){if(ay[az]!=aE[az]){if(ay[az]=aw(ay[az]),aE[az]=aw(aE[az]),ay[az]<aE[az]){aB=-1;break}if(ay[az]>aE[az]){aB=1;break}}}if(!aA){return aB}switch(aA){case">":case"gt":return aB>0;case">=":case"ge":return aB>=0;case"<=":case"le":return 0>=aB;case"==":case"=":case"eq":return 0===aB;case"<>":case"!=":case"ne":return 0!==aB;case"":case"<":case"lt":return 0>aB;default:return null}}var ar=function(az){var aO="",aI="?",aE="function",aL="undefined",aJ="object",aw="major",aN="model",aG="name",ax="type",aF="vendor",ay="version",aD="architecture",aA="console",aK="mobile",aH="tablet",aB={has:function(aR,aS){return -1!==aS.toLowerCase().indexOf(aR.toLowerCase())},lowerize:function(aR){return aR.toLowerCase()}},aM={rgx:function(){for(var aV,aW=0,aY,aU,a1,aZ,aT,a0,aS=arguments;aW<aS.length;aW+=2){var aR=aS[aW],aX=aS[aW+1];if(typeof aV===aL){aV={};for(a1 in aX){aZ=aX[a1],typeof aZ===aJ?aV[aZ[0]]=az:aV[aZ]=az}}for(aY=aU=0;aY<aR.length;aY++){if(aT=aR[aY].exec(this.getUA())){for(a1=0;a1<aX.length;a1++){a0=aT[++aU],aZ=aX[a1],typeof aZ===aJ&&aZ.length>0?2==aZ.length?typeof aZ[1]==aE?aV[aZ[0]]=aZ[1].call(this,a0):aV[aZ[0]]=aZ[1]:3==aZ.length?typeof aZ[1]!==aE||aZ[1].exec&&aZ[1].test?aV[aZ[0]]=a0?a0.replace(aZ[1],aZ[2]):az:aV[aZ[0]]=a0?aZ[1].call(this,a0,aZ[2]):az:4==aZ.length&&(aV[aZ[0]]=a0?aZ[3].call(this,a0.replace(aZ[1],aZ[2])):az):aV[aZ]=a0?a0:az}break}}if(aT){break}}return aV},str:function(aS,aT){for(var aR in aT){if(typeof aT[aR]===aJ&&aT[aR].length>0){for(var aU=0;aU<aT[aR].length;aU++){if(aB.has(aT[aR][aU],aS)){return aR===aI?az:aR}}}else{if(aB.has(aT[aR],aS)){return aR===aI?az:aR}}}return aS}},aP={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}},aQ={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[aG,ay],[/\s(opr)\/([\w\.]+)/i],[[aG,"Opera"],ay],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi)\/([\w\.-]+)/i],[aG,ay],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[aG,"IE"],ay],[/(edge)\/((\d+)?[\w\.]+)/i],[aG,ay],[/(yabrowser)\/([\w\.]+)/i],[[aG,"Yandex"],ay],[/(comodo_dragon)\/([\w\.]+)/i],[[aG,/_/g," "],ay],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],[aG,ay],[/(dolfin)\/([\w\.]+)/i],[[aG,"Dolphin"],ay],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[aG,"Chrome"],ay],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[ay,[aG,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[ay,[aG,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[ay,[aG,"Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[ay,[aG,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[ay,aG],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[aG,[ay,aM.str,aP.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[aG,ay],[/(navigator|netscape)\/([\w\.-]+)/i],[[aG,"Netscape"],ay],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[aG,ay]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[ay,[aG,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[aG,ay],[/rv\:([\w\.]+).*(gecko)/i],[ay,aG]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[aG,ay],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[aG,[ay,aM.str,aP.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[aG,"Windows"],[ay,aM.str,aP.os.windows.version]],[/\((bb)(10);/i],[[aG,"BlackBerry"],ay],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[aG,ay],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[aG,"Symbian"],ay],[/\((series40);/i],[aG],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[aG,"Firefox OS"],ay],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[aG,ay],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[aG,"Chromium OS"],ay],[/(sunos)\s?([\w\.]+\d)*/i],[[aG,"Solaris"],ay],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[aG,ay],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[aG,"iOS"],[ay,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[aG,"Mac OS"],[ay,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[aG,ay]]},aC=function(aS){var aR=aS||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:aO);this.getBrowser=function(){return aM.rgx.apply(this,aQ.browser)},this.getEngine=function(){return aM.rgx.apply(this,aQ.engine)},this.getOS=function(){return aM.rgx.apply(this,aQ.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()}},this.getUA=function(){return aR},this.setUA=function(aT){return aR=aT,this},this.setUA(aR)};return aC}(),aq=function(){var aw={define_property:function(){return !1}(),create_canvas:function(){var ax=document.createElement("canvas");return !(!ax.getContext||!ax.getContext("2d"))}(),return_response_type:function(ay){try{if(-1!==au.inArray(ay,["","text","document"])){return !0}if(window.XMLHttpRequest){var ax=new XMLHttpRequest;if(ax.open("get","/"),"responseType" in ax){return ax.responseType=ay,ax.responseType!==ay?!1:!0}}}catch(az){}return !1},use_data_uri:function(){var ax=new Image;return ax.onload=function(){aw.use_data_uri=1===ax.width&&1===ax.height},setTimeout(function(){ax.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1),!1}(),use_data_uri_over32kb:function(){return aw.use_data_uri&&("IE"!==at.browser||at.version>=9)},use_data_uri_of:function(ax){return aw.use_data_uri&&33000>ax||aw.use_data_uri_over32kb()},use_fileinput:function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/)){return !1}var ax=document.createElement("input");return ax.setAttribute("type","file"),!ax.disabled}};return function(ax){var ay=[].slice.call(arguments);return ay.shift(),"function"===au.typeOf(aw[ax])?aw[ax].apply(this,ay):!!aw[ax]}}(),av=(new ar).getResult(),at={can:aq,uaParser:ar,browser:av.browser.name,version:av.browser.version,os:av.os.name,osVersion:av.os.version,verComp:ap,swf_url:"../flash/Moxie.swf",xap_url:"../silverlight/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};return at.OS=at.os,at}),ac(af,[E],function(ap){var aq={};return{addI18n:function(ar){return ap.extend(aq,ar)},translate:function(ar){return aq[ar]||ar},_:function(ar){return this.translate(ar)},sprintf:function(at){var ar=[].slice.call(arguments,1);return at.replace(/%[a-z]/g,function(){var au=ar.shift();return"undefined"!==ap.typeOf(au)?au:""})}}}),ac(ao,[E,af],function(at,ap){var ar="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe",aq={mimes:{},extensions:{},addMimeType:function(av){var ax=av.split(/,/),au,ay,aw;for(au=0;au<ax.length;au+=2){for(aw=ax[au+1].split(/ /),ay=0;ay<aw.length;ay++){this.mimes[aw[ay]]=ax[au]}this.extensions[ax[au]]=aw}},extList2mimes:function(ay,au){var az=this,aw,av,aB,ax,aA=[];for(av=0;av<ay.length;av++){for(aw=ay[av].extensions.split(/\s*,\s*/),aB=0;aB<aw.length;aB++){if("*"===aw[aB]){return[]}if(ax=az.mimes[aw[aB]],ax&&-1===at.inArray(ax,aA)&&aA.push(ax),au&&/^\w+$/.test(aw[aB])){aA.push("."+aw[aB])}else{if(!ax){return[]}}}}return aA},mimes2exts:function(av){var au=this,aw=[];return at.each(av,function(ay){if("*"===ay){return aw=[],!1}var ax=ay.match(/^(\w+)\/(\*|\w+)$/);ax&&("*"===ax[2]?at.each(au.extensions,function(az,aA){new RegExp("^"+ax[1]+"/").test(aA)&&[].push.apply(aw,au.extensions[aA])}):au.extensions[ay]&&[].push.apply(aw,au.extensions[ay]))}),aw},mimes2extList:function(au){var aw=[],av=[];return"string"===at.typeOf(au)&&(au=at.trim(au).split(/\s*,\s*/)),av=this.mimes2exts(au),aw.push({title:ap.translate("Files"),extensions:av.length?av.join(","):"*"}),aw.mimes=au,aw},getFileExtension:function(au){var av=au&&au.match(/\.([^.]+)$/);return av?av[1].toLowerCase():""},getFileMime:function(au){return this.mimes[this.getFileExtension(au)]||""}};return aq.addMimeType(ar),aq}),ac(ab,[an],function(at){var aw=function(ay){return"string"!=typeof ay?ay:document.getElementById(ay)},aq=function(aA,az){if(!aA.className){return !1}var ay=new RegExp("(^|\\s+)"+az+"(\\s+|$)");return ay.test(aA.className)},ax=function(az,ay){aq(az,ay)||(az.className=az.className?az.className.replace(/\s+$/,"")+" "+ay:ay)},au=function(aA,az){if(aA.className){var ay=new RegExp("(^|\\s+)"+az+"(\\s+|$)");aA.className=aA.className.replace(ay,function(aD,aB,aC){return" "===aB&&" "===aC?" ":""})}},ar=function(az,ay){return az.currentStyle?az.currentStyle[ay]:window.getComputedStyle?window.getComputedStyle(az,null)[ay]:void 0},ap=function(aE,aA){function az(aI){var aL,aK,aH=0,aJ=0;return aI&&(aK=aI.getBoundingClientRect(),aL="CSS1Compat"===aD.compatMode?aD.documentElement:aD.body,aH=aK.left+aL.scrollLeft,aJ=aK.top+aL.scrollTop),{x:aH,y:aJ}}var aC=0,aB=0,aG,aD=document,aF,ay;if(aE=aE,aA=aA||aD.body,aE&&aE.getBoundingClientRect&&"IE"===at.browser&&(!aD.documentMode||aD.documentMode<8)){return aF=az(aE),ay=az(aA),{x:aF.x-ay.x,y:aF.y-ay.y}}for(aG=aE;aG&&aG!=aA&&aG.nodeType;){aC+=aG.offsetLeft||0,aB+=aG.offsetTop||0,aG=aG.offsetParent}for(aG=aE.parentNode;aG&&aG!=aA&&aG.nodeType;){aC-=aG.scrollLeft||0,aB-=aG.scrollTop||0,aG=aG.parentNode}return{x:aC,y:aB}},av=function(ay){return{w:ay.offsetWidth||ay.clientWidth,h:ay.offsetHeight||ay.clientHeight}};return{get:aw,hasClass:aq,addClass:ax,removeClass:au,getStyle:ar,getPos:ap,getSize:av}}),ac(Z,[E],function(ap){function aq(at,au){var ar;for(ar in at){if(at[ar]===au){return ar}}return null}return{RuntimeError:function(){function ar(au){this.code=au,this.name=aq(at,au),this.message=this.name+": RuntimeError "+this.code}var at={NOT_INIT_ERR:1,NOT_SUPPORTED_ERR:9,JS_ERR:4};return ap.extend(ar,at),ar.prototype=Error.prototype,ar}(),OperationNotAllowedException:function(){function ar(at){this.code=at,this.name="OperationNotAllowedException"}return ap.extend(ar,{NOT_ALLOWED_ERR:1}),ar.prototype=Error.prototype,ar}(),ImageError:function(){function ar(au){this.code=au,this.name=aq(at,au),this.message=this.name+": ImageError "+this.code}var at={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2,INVALID_META_ERR:3};return ap.extend(ar,at),ar.prototype=Error.prototype,ar}(),FileException:function(){function ar(au){this.code=au,this.name=aq(at,au),this.message=this.name+": FileException "+this.code}var at={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};return ap.extend(ar,at),ar.prototype=Error.prototype,ar}(),DOMException:function(){function ar(au){this.code=au,this.name=aq(at,au),this.message=this.name+": DOMException "+this.code}var at={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};return ap.extend(ar,at),ar.prototype=Error.prototype,ar}(),EventException:function(){function ar(at){this.code=at,this.name="EventException"}return ap.extend(ar,{UNSPECIFIED_EVENT_TYPE_ERR:0}),ar.prototype=Error.prototype,ar}()}}),ac(z,[an,Z,E],function(at,ap,ar){function aq(){var au={};ar.extend(this,{uid:null,init:function(){this.uid||(this.uid=ar.guid("uid_"))},addEventListener:function(ay,az,aw,av){var aA=this,ax;return this.hasOwnProperty("uid")||(this.uid=ar.guid("uid_")),ay=ar.trim(ay),/\s/.test(ay)?void ar.each(ay.split(/\s+/),function(aB){aA.addEventListener(aB,az,aw,av)}):(ay=ay.toLowerCase(),aw=parseInt(aw,10)||0,ax=au[this.uid]&&au[this.uid][ay]||[],ax.push({fn:az,priority:aw,scope:av||this}),au[this.uid]||(au[this.uid]={}),void (au[this.uid][ay]=ax))},hasEventListener:function(av){return av?!(!au[this.uid]||!au[this.uid][av]):!!au[this.uid]},removeEventListener:function(ax,ay){ax=ax.toLowerCase();var aw=au[this.uid]&&au[this.uid][ax],av;if(aw){if(ay){for(av=aw.length-1;av>=0;av--){if(aw[av].fn===ay){aw.splice(av,1);break}}}else{aw=[]}aw.length||(delete au[this.uid][ax],ar.isEmptyObj(au[this.uid])&&delete au[this.uid])}},removeAllEventListeners:function(){au[this.uid]&&delete au[this.uid]},dispatchEvent:function(aA){var aD,aC,ax,av,aw={},ay=!0,aB;if("string"!==ar.typeOf(aA)){if(av=aA,"string"!==ar.typeOf(av.type)){throw new ap.EventException(ap.EventException.UNSPECIFIED_EVENT_TYPE_ERR)}aA=av.type,av.total!==aB&&av.loaded!==aB&&(aw.total=av.total,aw.loaded=av.loaded),aw.async=av.async||!1}if(-1!==aA.indexOf("::")?!function(aE){aD=aE[0],aA=aE[1]}(aA.split("::")):aD=this.uid,aA=aA.toLowerCase(),aC=au[aD]&&au[aD][aA]){aC.sort(function(aE,aF){return aF.priority-aE.priority}),ax=[].slice.call(arguments),ax.shift(),aw.type=aA,ax.unshift(aw);var az=[];ar.each(aC,function(aE){ax[0].target=aE.scope,az.push(aw.async?function(aF){setTimeout(function(){aF(aE.fn.apply(aE.scope,ax)===!1)},1)}:function(aF){aF(aE.fn.apply(aE.scope,ax)===!1)})}),az.length&&ar.inSeries(az,function(aE){ay=!aE})}return ay},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){return this.dispatchEvent.apply(this,arguments)},handleEventProps:function(av){var aw=this;this.bind(av.join(" "),function(ax){var ay="on"+ax.type.toLowerCase();"function"===ar.typeOf(this[ay])&&this[ay].apply(this,arguments)}),ar.each(av,function(ax){ax="on"+ax.toLowerCase(ax),"undefined"===ar.typeOf(aw[ax])&&(aw[ax]=null)})}})}return aq.instance=new aq,aq}),ac(ag,[an,E,ab,z],function(at,av,aq,aw){function au(az,aB,aD,aE,aF){var ax=this,aC,ay=av.guid(aB+"_"),aA=aF||"browser";az=az||{},ap[ay]=this,aD=av.extend({access_binary:!1,access_image_binary:!1,display_media:!1,do_cors:!1,drag_and_drop:!1,filter_by_extension:!0,resize_image:!1,report_upload_progress:!1,return_response_headers:!1,return_response_type:!1,return_status_code:!0,send_custom_headers:!1,select_file:!1,select_folder:!1,select_multiple:!0,send_binary_string:!1,send_browser_cookies:!0,send_multipart:!0,slice_blob:!1,stream_upload:!1,summon_file_dialog:!1,upload_filesize:!0,use_http_method:!0},aD),az.preferred_caps&&(aA=au.getMode(aE,az.preferred_caps,aA)),aC=function(){var aG={};return{exec:function(aH,aI,aJ,aK){return aC[aI]&&(aG[aH]||(aG[aH]={context:this,instance:new aC[aI]}),aG[aH].instance[aJ])?aG[aH].instance[aJ].apply(this,aK):void 0},removeInstance:function(aH){delete aG[aH]},removeAllInstances:function(){var aH=this;av.each(aG,function(aJ,aI){"function"===av.typeOf(aJ.instance.destroy)&&aJ.instance.destroy.call(aJ.context),aH.removeInstance(aI)})}}}(),av.extend(this,{initialized:!1,uid:ay,type:aB,mode:au.getMode(aE,az.required_caps,aA),shimid:ay+"_container",clients:0,options:az,can:function(aI,aH){var aJ=arguments[2]||aD;if("string"===av.typeOf(aI)&&"undefined"===av.typeOf(aH)&&(aI=au.parseCaps(aI)),"object"===av.typeOf(aI)){for(var aG in aI){if(!this.can(aG,aI[aG],aJ)){return !1}}return !0}return"function"===av.typeOf(aJ[aI])?aJ[aI].call(this,aH):aH===aJ[aI]},getShimContainer:function(){var aH,aG=aq.get(this.shimid);return aG||(aH=this.options.container?aq.get(this.options.container):document.body,aG=document.createElement("div"),aG.id=this.shimid,aG.className="moxie-shim moxie-shim-"+this.type,av.extend(aG.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),aH.appendChild(aG),aH=null),aG},getShim:function(){return aC},shimExec:function(aG,aH){var aI=[].slice.call(arguments,2);return ax.getShim().exec.call(this,this.uid,aG,aH,aI)},exec:function(aG,aH){var aI=[].slice.call(arguments,2);return ax[aG]&&ax[aG][aH]?ax[aG][aH].apply(this,aI):ax.shimExec.apply(this,arguments)},destroy:function(){if(ax){var aG=aq.get(this.shimid);aG&&aG.parentNode.removeChild(aG),aC&&aC.removeAllInstances(),this.unbindAll(),delete ap[this.uid],this.uid=null,ay=ax=aC=aG=null}}}),this.mode&&az.required_caps&&!this.can(az.required_caps)&&(this.mode=!1)}var ar={},ap={};return au.order="html5,flash,silverlight,html4",au.getRuntime=function(ax){return ap[ax]?ap[ax]:!1},au.addConstructor=function(ay,ax){ax.prototype=aw.instance,ar[ay]=ax},au.getConstructor=function(ax){return ar[ax]||null},au.getInfo=function(ay){var ax=au.getRuntime(ay);return ax?{uid:ax.uid,type:ax.type,mode:ax.mode,can:function(){return ax.can.apply(ax,arguments)}}:null},au.parseCaps=function(ax){var ay={};return"string"!==av.typeOf(ax)?ax||{}:(av.each(ax.split(","),function(az){ay[az]=!0}),ay)},au.can=function(az,aA){var aB,ay=au.getConstructor(az),ax;return ay?(aB=new ay({required_caps:aA}),ax=aB.mode,aB.destroy(),!!ax):!1},au.thatCan=function(az,aA){var ax=(aA||au.order).split(/\s*,\s*/);for(var ay in ax){if(au.can(ax[ay],az)){return ax[ay]}}return null},au.getMode=function(az,ax,ay){var aA=null;if("undefined"===av.typeOf(ay)&&(ay="browser"),ax&&!av.isEmptyObj(az)){if(av.each(ax,function(aB,aD){if(az.hasOwnProperty(aD)){var aC=az[aD](aB);if("string"==typeof aC&&(aC=[aC]),aA){if(!(aA=av.arrayIntersect(aA,aC))){return aA=!1}}else{aA=aC}}}),aA){return -1!==av.inArray(ay,aA)?ay:aA[0]}if(aA===!1){return !1}}return ay},au.capTrue=function(){return !0},au.capFalse=function(){return !1},au.capTest=function(ax){return function(){return !!ax}},au}),ac(aa,[an,Z,E,ag],function(at,ap,ar,aq){return function au(){var av;ar.extend(this,{connectRuntime:function(ax){function aw(aA){var aB,aC;return aA.length?(aB=aA.shift().toLowerCase(),(aC=aq.getConstructor(aB))?(av=new aC(ax),av.bind("Init",function(){av.initialized=!0,setTimeout(function(){av.clients++,az.trigger("RuntimeInit",av)},1)}),av.bind("Error",function(){av.destroy(),aw(aA)}),av.mode?void av.init():void av.trigger("Error")):void aw(aA)):(az.trigger("RuntimeError",new ap.RuntimeError(ap.RuntimeError.NOT_INIT_ERR)),void (av=null))}var az=this,ay;if("string"===ar.typeOf(ax)?ay=ax:"string"===ar.typeOf(ax.ruid)&&(ay=ax.ruid),ay){if(av=aq.getRuntime(ay)){return av.clients++,av}throw new ap.RuntimeError(ap.RuntimeError.NOT_INIT_ERR)}aw((ax.runtime_order||aq.order).split(/\s*,\s*/))},disconnectRuntime:function(){av&&--av.clients<=0&&av.destroy(),av=null},getRuntime:function(){return av&&av.uid?av:av=null},exec:function(){return av?av.exec.apply(this,arguments):null}})}}),ac(F,[E,an,ao,ab,Z,z,af,ag,aa],function(au,ap,ax,av,az,ay,ar,aA,aq){function at(aC){var aB=this,aF,aD,aE;if(-1!==au.inArray(au.typeOf(aC),["string","node"])&&(aC={browse_button:aC}),aD=av.get(aC.browse_button),!aD){throw new az.DOMException(az.DOMException.NOT_FOUND_ERR)}aE={accept:[{title:ar.translate("All Files"),extensions:"*"}],name:"file",multiple:!1,required_caps:!1,container:aD.parentNode||document.body},aC=au.extend({},aE,aC),"string"==typeof aC.required_caps&&(aC.required_caps=aA.parseCaps(aC.required_caps)),"string"==typeof aC.accept&&(aC.accept=ax.mimes2extList(aC.accept)),aF=av.get(aC.container),aF||(aF=document.body),"static"===av.getStyle(aF,"position")&&(aF.style.position="relative"),aF=aD=null,aq.call(aB),au.extend(aB,{uid:au.guid("uid_"),ruid:null,shimid:null,files:null,init:function(){aB.bind("RuntimeInit",function(aG,aH){aB.ruid=aH.uid,aB.shimid=aH.shimid,aB.bind("Ready",function(){aB.trigger("Refresh")},999),aB.bind("Refresh",function(){var aI,aJ,aL,aK;aL=av.get(aC.browse_button),aK=av.get(aH.shimid),aL&&(aI=av.getPos(aL,av.get(aC.container)),aJ=av.getSize(aL),aK&&au.extend(aK.style,{top:aI.y+"px",left:aI.x+"px",width:aJ.w+"px",height:aJ.h+"px"})),aK=aL=null}),aH.exec.call(aB,"FileInput","init",aC)}),aB.connectRuntime(au.extend({},aC,{required_caps:{select_file:!0}}))},disable:function(aH){var aG=this.getRuntime();aG&&aG.exec.call(this,"FileInput","disable","undefined"===au.typeOf(aH)?!0:aH)},refresh:function(){aB.trigger("Refresh")},destroy:function(){var aG=this.getRuntime();aG&&(aG.exec.call(this,"FileInput","destroy"),this.disconnectRuntime()),"array"===au.typeOf(this.files)&&au.each(this.files,function(aH){aH.destroy()}),this.files=null,this.unbindAll()}}),this.handleEventProps(aw)}var aw=["ready","change","cancel","mouseenter","mouseleave","mousedown","mouseup"];return at.prototype=ay.instance,at}),ac(H,[],function(){var at=function(au){return unescape(encodeURIComponent(au))},ap=function(au){return decodeURIComponent(escape(au))},ar=function(aC,aw){if("function"==typeof window.atob){return aw?ap(window.atob(aC)):window.atob(aC)}var aF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",aB,az,av,aI,au,ax,aG,ay,aE=0,aD=0,aA="",aH=[];if(!aC){return aC}aC+="";do{aI=aF.indexOf(aC.charAt(aE++)),au=aF.indexOf(aC.charAt(aE++)),ax=aF.indexOf(aC.charAt(aE++)),aG=aF.indexOf(aC.charAt(aE++)),ay=aI<<18|au<<12|ax<<6|aG,aB=ay>>16&255,az=ay>>8&255,av=255&ay,64==ax?aH[aD++]=String.fromCharCode(aB):64==aG?aH[aD++]=String.fromCharCode(aB,az):aH[aD++]=String.fromCharCode(aB,az,av)}while(aE<aC.length);return aA=aH.join(""),aw?ap(aA):aA},aq=function(aI,aw){if(aw&&(aI=at(aI)),"function"==typeof window.btoa){return window.btoa(aI)}var aE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",aB,az,au,aH,aJ,av,aF,ax,aD=0,ay=0,aA="",aG=[];if(!aI){return aI}do{aB=aI.charCodeAt(aD++),az=aI.charCodeAt(aD++),au=aI.charCodeAt(aD++),ax=aB<<16|az<<8|au,aH=ax>>18&63,aJ=ax>>12&63,av=ax>>6&63,aF=63&ax,aG[ay++]=aE.charAt(aH)+aE.charAt(aJ)+aE.charAt(av)+aE.charAt(aF)}while(aD<aI.length);aA=aG.join("");var aC=aI.length%3;return(aC?aA.slice(0,aC-3):aA)+"===".slice(aC||3)};return{utf8_encode:at,utf8_decode:ap,atob:ar,btoa:aq}}),ac(K,[E,H,aa],function(at,ap,ar){function aq(av,ax){function aw(aB,ay,az){var aC,aA=au[this.uid];return"string"===at.typeOf(aA)&&aA.length?(aC=new aq(null,{type:az,size:ay-aB}),aC.detach(aA.substr(aB,aC.size)),aC):null}ar.call(this),av&&this.connectRuntime(av),ax?"string"===at.typeOf(ax)&&(ax={data:ax}):ax={},at.extend(this,{uid:ax.uid||at.guid("uid_"),ruid:av,size:ax.size||0,type:ax.type||"",slice:function(az,aA,ay){return this.isDetached()?aw.apply(this,arguments):this.getRuntime().exec.call(this,"Blob","slice",this.getSource(),az,aA,ay)},getSource:function(){return au[this.uid]?au[this.uid]:null},detach:function(az){if(this.ruid&&(this.getRuntime().exec.call(this,"Blob","destroy"),this.disconnectRuntime(),this.ruid=null),az=az||"","data:"==az.substr(0,5)){var ay=az.indexOf(";base64,");this.type=az.substring(5,ay),az=ap.atob(az.substring(ay+8))}this.size=az.length,au[this.uid]=az},isDetached:function(){return !this.ruid&&"string"===at.typeOf(au[this.uid])},destroy:function(){this.detach(),delete au[this.uid]}}),ax.data?this.detach(ax.data):au[this.uid]=ax}var au={};return aq}),ac(a,[E,ao,K],function(at,ap,ar){function aq(aw,av){av||(av={}),ar.apply(this,arguments),this.type||(this.type=ap.getFileMime(av.name));var au;if(av.name){au=av.name.replace(/\\/g,"/"),au=au.substr(au.lastIndexOf("/")+1)}else{if(this.type){var ax=this.type.split("/")[0];au=at.guid((""!==ax?ax:"file")+"_"),ap.extensions[this.type]&&(au+="."+ap.extensions[this.type][0])}}at.extend(this,{name:au||at.guid("file_"),relativePath:"",lastModifiedDate:av.lastModifiedDate||(new Date).toLocaleString()})}return aq.prototype=ar.prototype,aq}),ac(ai,[af,ab,Z,E,an,a,aa,z,ao],function(au,ap,ax,av,az,ay,ar,aA,aq){function at(aC){var aB=this,aD;"string"==typeof aC&&(aC={drop_zone:aC}),aD={accept:[{title:au.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:!0}},aC="object"==typeof aC?av.extend({},aD,aC):aD,aC.container=ap.get(aC.drop_zone)||document.body,"static"===ap.getStyle(aC.container,"position")&&(aC.container.style.position="relative"),"string"==typeof aC.accept&&(aC.accept=aq.mimes2extList(aC.accept)),ar.call(aB),av.extend(aB,{uid:av.guid("uid_"),ruid:null,files:null,init:function(){aB.bind("RuntimeInit",function(aE,aF){aB.ruid=aF.uid,aF.exec.call(aB,"FileDrop","init",aC),aB.dispatchEvent("ready")}),aB.connectRuntime(aC)},destroy:function(){var aE=this.getRuntime();aE&&(aE.exec.call(this,"FileDrop","destroy"),this.disconnectRuntime()),this.files=null,this.unbindAll()}}),this.handleEventProps(aw)}var aw=["ready","dragenter","dragleave","drop","error"];return at.prototype=aA.instance,at}),ac(am,[E,H,Z,z,K,aa],function(at,aw,aq,ax,au,ar){function ap(){function ay(aC,aA){var aB=this;if(this.trigger("loadstart"),this.readyState===ap.LOADING){return this.trigger("error",new aq.DOMException(aq.DOMException.INVALID_STATE_ERR)),void this.trigger("loadend")}if(!(aA instanceof au)){return this.trigger("error",new aq.DOMException(aq.DOMException.NOT_FOUND_ERR)),void this.trigger("loadend")}if(this.result=null,this.readyState=ap.LOADING,aA.isDetached()){var az=aA.getSource();switch(aC){case"readAsText":case"readAsBinaryString":this.result=az;break;case"readAsDataURL":this.result="data:"+aA.type+";base64,"+aw.btoa(az)}this.readyState=ap.DONE,this.trigger("load"),this.trigger("loadend")}else{this.connectRuntime(aA.ruid),this.exec("FileReader","read",aC,aA)}}ar.call(this),at.extend(this,{uid:at.guid("uid_"),readyState:ap.EMPTY,result:null,error:null,readAsBinaryString:function(az){ay.call(this,"readAsBinaryString",az)},readAsDataURL:function(az){ay.call(this,"readAsDataURL",az)},readAsText:function(az){ay.call(this,"readAsText",az)},abort:function(){this.result=null,-1===at.inArray(this.readyState,[ap.EMPTY,ap.DONE])&&(this.readyState===ap.LOADING&&(this.readyState=ap.DONE),this.exec("FileReader","abort"),this.trigger("abort"),this.trigger("loadend"))},destroy:function(){this.abort(),this.exec("FileReader","destroy"),this.disconnectRuntime(),this.unbindAll()}}),this.handleEventProps(av),this.bind("Error",function(az,aA){this.readyState=ap.DONE,this.error=aA},999),this.bind("Load",function(az){this.readyState=ap.DONE},999)}var av=["loadstart","progress","load","abort","error","loadend"];return ap.EMPTY=0,ap.LOADING=1,ap.DONE=2,ap.prototype=ax.instance,ap}),ac(I,[],function(){var ap=function(au,az){for(var ay=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],aB=ay.length,aA={http:80,https:443},aw={},at=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,av=at.exec(au||"");aB--;){av[aB]&&(aw[ay[aB]]=av[aB])}if(!aw.scheme){az&&"string"!=typeof az||(az=ap(az||document.location.href)),aw.scheme=az.scheme,aw.host=az.host,aw.port=az.port;var ax="";/^[^\/]/.test(aw.path)&&(ax=az.path,ax=/\/[^\/]*\.[^\/]*$/.test(ax)?ax.replace(/\/[^\/]+$/,"/"):ax.replace(/\/?$/,"/")),aw.path=ax+(aw.path||"")}return aw.port||(aw.port=aA[aw.scheme]||80),aw.port=parseInt(aw.port,10),aw.path||(aw.path="/"),delete aw.source,aw},aq=function(au){var at={http:80,https:443},av="object"==typeof au?au:ap(au);return av.scheme+"://"+av.host+(av.port!==at[av.scheme]?":"+av.port:"")+av.path+(av.query?av.query:"")},ar=function(au){function at(av){return[av.scheme,av.host,av.port].join("/")}return"string"==typeof au&&(au=ap(au)),at(ap())===at(au)};return{parseUrl:ap,resolveUrl:aq,hasSameOrigin:ar}}),ac(n,[E,aa,z],function(at,ap,ar){function aq(){this.uid=at.guid("uid_"),ap.call(this),this.destroy=function(){this.disconnectRuntime(),this.unbindAll()}}return aq.prototype=ar.instance,aq}),ac(S,[E,aa,H],function(ap,aq,ar){return function(){function at(av,ay){if(!ay.isDetached()){var az=this.connectRuntime(ay.ruid).exec.call(this,"FileReaderSync","read",av,ay);return this.disconnectRuntime(),az}var aw=ay.getSource();switch(av){case"readAsBinaryString":return aw;case"readAsDataURL":return"data:"+ay.type+";base64,"+ar.btoa(aw);case"readAsText":for(var au="",aA=0,ax=aw.length;ax>aA;aA++){au+=String.fromCharCode(aw[aA])}return au}}aq.call(this),ap.extend(this,{uid:ap.guid("uid_"),readAsBinaryString:function(au){return at.call(this,"readAsBinaryString",au)},readAsDataURL:function(au){return at.call(this,"readAsDataURL",au)},readAsText:function(au){return at.call(this,"readAsText",au)}})}}),ac(e,[Z,E,K],function(at,ap,ar){function aq(){var au,av=[];ap.extend(this,{append:function(ax,aw){var az=this,ay=ap.typeOf(aw);aw instanceof ar?au={name:ax,value:aw}:"array"===ay?(ax+="[]",ap.each(aw,function(aA){az.append(ax,aA)})):"object"===ay?ap.each(aw,function(aA,aB){az.append(ax+"["+aB+"]",aA)}):"null"===ay||"undefined"===ay||"number"===ay&&isNaN(aw)?az.append(ax,"false"):av.push({name:ax,value:aw.toString()})},hasBlob:function(){return !!this.getBlob()},getBlob:function(){return au&&au.value||null},getBlobName:function(){return au&&au.name||null},each:function(aw){ap.each(av,function(ax){aw(ax.value,ax.name)}),au&&aw(au.value,au.name)},destroy:function(){au=null,av=[]}})}return aq}),ac(p,[E,Z,z,H,I,ag,n,K,S,e,an,ao],function(ax,aF,ap,aB,aw,ar,aq,aD,aG,at,aC,av){function aA(){this.uid=ax.guid("uid_")}function ay(){function aP(ba,a9){return aU.hasOwnProperty(ba)?1===arguments.length?aC.can("define_property")?aU[ba]:aT[ba]:void (aC.can("define_property")?aU[ba]=a9:aT[ba]=a9):void 0}function aR(bc){function bb(){aJ&&(aJ.destroy(),aJ=null),ba.dispatchEvent("loadend"),ba=null}function a9(bd){aJ.bind("LoadStart",function(be){aP("readyState",ay.LOADING),ba.dispatchEvent("readystatechange"),ba.dispatchEvent(be),a2&&ba.upload.dispatchEvent(be)}),aJ.bind("Progress",function(be){aP("readyState")!==ay.LOADING&&(aP("readyState",ay.LOADING),ba.dispatchEvent("readystatechange")),ba.dispatchEvent(be)}),aJ.bind("UploadProgress",function(be){a2&&ba.upload.dispatchEvent({type:"progress",lengthComputable:!1,total:be.total,loaded:be.loaded})}),aJ.bind("Load",function(be){aP("readyState",ay.DONE),aP("status",Number(bd.exec.call(aJ,"XMLHttpRequest","getStatus")||0)),aP("statusText",au[aP("status")]||""),aP("response",bd.exec.call(aJ,"XMLHttpRequest","getResponse",aP("responseType"))),~ax.inArray(aP("responseType"),["text",""])?aP("responseText",aP("response")):"document"===aP("responseType")&&aP("responseXML",aP("response")),aN=bd.exec.call(aJ,"XMLHttpRequest","getAllResponseHeaders"),ba.dispatchEvent("readystatechange"),aP("status")>0?(a2&&ba.upload.dispatchEvent(be),ba.dispatchEvent(be)):(a1=!0,ba.dispatchEvent("error")),bb()}),aJ.bind("Abort",function(be){ba.dispatchEvent(be),bb()}),aJ.bind("Error",function(be){a1=!0,aP("readyState",ay.DONE),ba.dispatchEvent("readystatechange"),aO=!0,ba.dispatchEvent(be),bb()}),bd.exec.call(aJ,"XMLHttpRequest","send",{url:aQ,method:aI,async:aY,user:aW,password:a4,headers:aK,mimeType:aX,encoding:a5,responseType:ba.responseType,withCredentials:ba.withCredentials,options:aV},bc)}var ba=this;aL=(new Date).getTime(),aJ=new aq,"string"==typeof aV.required_caps&&(aV.required_caps=ar.parseCaps(aV.required_caps)),aV.required_caps=ax.extend({},aV.required_caps,{return_response_type:ba.responseType}),bc instanceof at&&(aV.required_caps.send_multipart=!0),ax.isEmptyObj(aK)||(aV.required_caps.send_custom_headers=!0),aZ||(aV.required_caps.do_cors=!0),aV.ruid?a9(aJ.connectRuntime(aV)):(aJ.bind("RuntimeInit",function(be,bd){a9(bd)}),aJ.bind("RuntimeError",function(be,bd){ba.dispatchEvent("RuntimeError",bd)}),aJ.connectRuntime(aV))}function aM(){aP("responseText",""),aP("responseXML",null),aP("response",null),aP("status",0),aP("statusText",""),aL=a0=null}var aT=this,aU={timeout:0,readyState:ay.UNSENT,withCredentials:!1,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},aY=!0,aQ,aI,aK={},aW,a4,a5=null,aX=null,a7=!1,a6=!1,a2=!1,aO=!1,a1=!1,aZ=!1,aL,a0,aS=null,a3=null,aV={},aJ,aN="",a8;ax.extend(this,aU,{uid:ax.guid("uid_"),upload:new aA,open:function(be,bd,a9,ba,bc){var bb;if(!be||!bd){throw new aF.DOMException(aF.DOMException.SYNTAX_ERR)}if(/[\u0100-\uffff]/.test(be)||aB.utf8_encode(be)!==be){throw new aF.DOMException(aF.DOMException.SYNTAX_ERR)}if(~ax.inArray(be.toUpperCase(),["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"])&&(aI=be.toUpperCase()),~ax.inArray(aI,["CONNECT","TRACE","TRACK"])){throw new aF.DOMException(aF.DOMException.SECURITY_ERR)}if(bd=aB.utf8_encode(bd),bb=aw.parseUrl(bd),aZ=aw.hasSameOrigin(bb),aQ=aw.resolveUrl(bd),(ba||bc)&&!aZ){throw new aF.DOMException(aF.DOMException.INVALID_ACCESS_ERR)}if(aW=ba||bb.user,a4=bc||bb.pass,aY=a9||!0,aY===!1&&(aP("timeout")||aP("withCredentials")||""!==aP("responseType"))){throw new aF.DOMException(aF.DOMException.INVALID_ACCESS_ERR)}a7=!aY,a6=!1,aK={},aM.call(this),aP("readyState",ay.OPENED),this.dispatchEvent("readystatechange")},setRequestHeader:function(bb,a9){var ba=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];if(aP("readyState")!==ay.OPENED||a6){throw new aF.DOMException(aF.DOMException.INVALID_STATE_ERR)}if(/[\u0100-\uffff]/.test(bb)||aB.utf8_encode(bb)!==bb){throw new aF.DOMException(aF.DOMException.SYNTAX_ERR)}return bb=ax.trim(bb).toLowerCase(),~ax.inArray(bb,ba)||/^(proxy\-|sec\-)/.test(bb)?!1:(aK[bb]?aK[bb]+=", "+a9:aK[bb]=a9,!0)},getAllResponseHeaders:function(){return aN||""},getResponseHeader:function(a9){return a9=a9.toLowerCase(),a1||~ax.inArray(a9,["set-cookie","set-cookie2"])?null:aN&&""!==aN&&(a8||(a8={},ax.each(aN.split(/\r\n/),function(bb){var ba=bb.split(/:\s+/);2===ba.length&&(ba[0]=ax.trim(ba[0]),a8[ba[0].toLowerCase()]={header:ba[0],value:ax.trim(ba[1])})})),a8.hasOwnProperty(a9))?a8[a9].header+": "+a8[a9].value:null},overrideMimeType:function(ba){var bb,a9;if(~ax.inArray(aP("readyState"),[ay.LOADING,ay.DONE])){throw new aF.DOMException(aF.DOMException.INVALID_STATE_ERR)}if(ba=ax.trim(ba.toLowerCase()),/;/.test(ba)&&(bb=ba.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))&&(ba=bb[1],bb[2]&&(a9=bb[2])),!av.mimes[ba]){throw new aF.DOMException(aF.DOMException.SYNTAX_ERR)}aS=ba,a3=a9},send:function(a9,bb){if(aV="string"===ax.typeOf(bb)?{ruid:bb}:bb?bb:{},this.readyState!==ay.OPENED||a6){throw new aF.DOMException(aF.DOMException.INVALID_STATE_ERR)}if(a9 instanceof aD){aV.ruid=a9.ruid,aX=a9.type||"application/octet-stream"}else{if(a9 instanceof at){if(a9.hasBlob()){var ba=a9.getBlob();aV.ruid=ba.ruid,aX=ba.type||"application/octet-stream"}}else{"string"==typeof a9&&(a5="UTF-8",aX="text/plain;charset=UTF-8",a9=aB.utf8_encode(a9))}}this.withCredentials||(this.withCredentials=aV.required_caps&&aV.required_caps.send_browser_cookies&&!aZ),a2=!a7&&this.upload.hasEventListener(),a1=!1,aO=!a9,a7||(a6=!0),aR.call(this,a9)},abort:function(){if(a1=!0,a7=!1,~ax.inArray(aP("readyState"),[ay.UNSENT,ay.OPENED,ay.DONE])){aP("readyState",ay.UNSENT)}else{if(aP("readyState",ay.DONE),a6=!1,!aJ){throw new aF.DOMException(aF.DOMException.INVALID_STATE_ERR)}aJ.getRuntime().exec.call(aJ,"XMLHttpRequest","abort",aO),aO=!0}},destroy:function(){aJ&&("function"===ax.typeOf(aJ.destroy)&&aJ.destroy(),aJ=null),this.unbindAll(),this.upload&&(this.upload.unbindAll(),this.upload=null)}}),this.handleEventProps(aE.concat(["readystatechange"])),this.upload.handleEventProps(aE)}var au={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};aA.prototype=ap.instance;var aE=["loadstart","progress","abort","error","load","timeout","loadend"],az=1,aH=2;return ay.UNSENT=0,ay.OPENED=1,ay.HEADERS_RECEIVED=2,ay.LOADING=3,ay.DONE=4,ay.prototype=ap.instance,ay}),ac(o,[E,H,aa,z],function(at,ap,ar,aq){function au(){function aB(){aC=az=0,ay=this.result=null}function aD(aE,aG){var aF=this;aw=aG,aF.bind("TransportingProgress",function(aH){az=aH.loaded,aC>az&&-1===at.inArray(aF.state,[au.IDLE,au.DONE])&&ax.call(aF)},999),aF.bind("TransportingComplete",function(){az=aC,aF.state=au.DONE,ay=null,aF.result=aw.exec.call(aF,"Transporter","getAsBlob",aE||"")},999),aF.state=au.BUSY,aF.trigger("TransportingStarted"),ax.call(aF)}function ax(){var aE=this,aG,aF=aC-az;aA>aF&&(aA=aF),aG=ap.btoa(ay.substr(az,aA)),aw.exec.call(aE,"Transporter","receive",aG,aC)}var av,aw,ay,aC,az,aA;ar.call(this),at.extend(this,{uid:at.guid("uid_"),state:au.IDLE,result:null,transport:function(aE,aH,aI){var aG=this;if(aI=at.extend({chunk_size:204798},aI),(av=aI.chunk_size%3)&&(aI.chunk_size+=3-av),aA=aI.chunk_size,aB.call(this),ay=aE,aC=aE.length,"string"===at.typeOf(aI)||aI.ruid){aD.call(aG,aH,this.connectRuntime(aI))}else{var aF=function(aJ,aK){aG.unbind("RuntimeInit",aF),aD.call(aG,aH,aK)};this.bind("RuntimeInit",aF),this.connectRuntime(aI)}},abort:function(){var aE=this;aE.state=au.IDLE,aw&&(aw.exec.call(aE,"Transporter","clear"),aE.trigger("TransportingAborted")),aB.call(aE)},destroy:function(){this.unbindAll(),aw=null,this.disconnectRuntime(),aB.call(this)}})}return au.IDLE=0,au.BUSY=1,au.DONE=2,au.prototype=aq.instance,au}),ac(k,[E,ab,Z,S,p,ag,aa,o,an,z,K,a,H],function(aC,aq,aw,ar,aB,ax,au,ap,at,az,av,aA,aE){function aD(){function aI(aK){aK||(aK=this.exec("Image","getInfo")),!aK.meta||!aK.meta.thumb||aK.meta.thumb.data instanceof av||(aK.meta.thumb.data=new av(this.ruid,{type:"image/jpeg",data:aK.meta.thumb.data})),this.size=aK.size,this.width=aK.width,this.height=aK.height,this.type=aK.type,this.meta=aK.meta,""===this.name&&(this.name=aK.name)}function aG(aK){var aM=aC.typeOf(aK);try{if(aK instanceof aD){if(!aK.size){throw new aw.DOMException(aw.DOMException.INVALID_STATE_ERR)}aF.apply(this,arguments)}else{if(aK instanceof av){if(!~aC.inArray(aK.type,["image/jpeg","image/png"])){throw new aw.ImageError(aw.ImageError.WRONG_FORMAT)}aH.apply(this,arguments)}else{if(-1!==aC.inArray(aM,["blob","file"])){aG.call(this,new aA(null,aK),arguments[1])}else{if("string"===aM){/^data:[^;]*;base64,/.test(aK)?aG.call(this,new av(null,{data:aK}),arguments[1]):aJ.apply(this,arguments)}else{if("node"!==aM||"img"!==aK.nodeName.toLowerCase()){throw new aw.DOMException(aw.DOMException.TYPE_MISMATCH_ERR)}aG.call(this,aK.src,arguments[1])}}}}}catch(aL){this.trigger("error",aL.code)}}function aF(aK,aL){var aM=this.connectRuntime(aK.ruid);this.ruid=aM.uid,aM.exec.call(this,"Image","loadFromImage",aK,"undefined"===aC.typeOf(aL)?!0:aL)}function aH(aK,aL){function aN(aO){aM.ruid=aO.uid,aO.exec.call(aM,"Image","loadFromBlob",aK)}var aM=this;aM.name=aK.name||"",aK.isDetached()?(this.bind("RuntimeInit",function(aP,aO){aN(aO)}),aL&&"string"==typeof aL.required_caps&&(aL.required_caps=ax.parseCaps(aL.required_caps)),this.connectRuntime(aC.extend({required_caps:{access_image_binary:!0,resize_image:!0}},aL))):aN(this.connectRuntime(aK.ruid))}function aJ(aM,aK){var aL=this,aN;aN=new aB,aN.open("get",aM),aN.responseType="blob",aN.onprogress=function(aO){aL.trigger(aO)},aN.onload=function(){aH.call(aL,aN.response,!0)},aN.onerror=function(aO){aL.trigger(aO)},aN.onloadend=function(){aN.destroy()},aN.bind("RuntimeError",function(aP,aO){aL.trigger("RuntimeError",aO)}),aN.send(null,aK)}au.call(this),aC.extend(this,{uid:aC.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){aG.apply(this,arguments)},downsize:function(aK){var aM={width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90,crop:!1,preserveHeaders:!0,resample:!1};aK="object"==typeof aK?aC.extend(aM,aK):aC.extend(aM,{width:arguments[0],height:arguments[1],crop:arguments[2],preserveHeaders:arguments[3]});try{if(!this.size){throw new aw.DOMException(aw.DOMException.INVALID_STATE_ERR)}if(this.width>aD.MAX_RESIZE_WIDTH||this.height>aD.MAX_RESIZE_HEIGHT){throw new aw.ImageError(aw.ImageError.MAX_RESOLUTION_ERR)}this.exec("Image","downsize",aK.width,aK.height,aK.crop,aK.preserveHeaders)}catch(aL){this.trigger("error",aL.code)}},crop:function(aL,aM,aK){this.downsize(aL,aM,!0,aK)},getAsCanvas:function(){if(!at.can("create_canvas")){throw new aw.RuntimeError(aw.RuntimeError.NOT_SUPPORTED_ERR)}var aK=this.connectRuntime(this.ruid);return aK.exec.call(this,"Image","getAsCanvas")},getAsBlob:function(aK,aL){if(!this.size){throw new aw.DOMException(aw.DOMException.INVALID_STATE_ERR)}return this.exec("Image","getAsBlob",aK||"image/jpeg",aL||90)},getAsDataURL:function(aK,aL){if(!this.size){throw new aw.DOMException(aw.DOMException.INVALID_STATE_ERR)}return this.exec("Image","getAsDataURL",aK||"image/jpeg",aL||90)},getAsBinaryString:function(aL,aM){var aK=this.getAsDataURL(aL,aM);return aE.atob(aK.substring(aK.indexOf("base64,")+7))},embed:function(aM,aL){function aO(aU,aV){var aR=this;if(at.can("create_canvas")){var aW=aR.getAsCanvas();if(aW){return aM.appendChild(aW),aW=null,aR.destroy(),void aP.trigger("embedded")}}var aS=aR.getAsDataURL(aU,aV);if(!aS){throw new aw.ImageError(aw.ImageError.WRONG_FORMAT)}if(at.can("use_data_uri_of",aS.length)){aM.innerHTML='<img src="'+aS+'" width="'+aR.width+'" height="'+aR.height+'" />',aR.destroy(),aP.trigger("embedded")}else{var aT=new ap;aT.bind("TransportingComplete",function(){aN=aP.connectRuntime(this.result.ruid),aP.bind("Embedded",function(){aC.extend(aN.getShimContainer().style,{top:"0px",left:"0px",width:aR.width+"px",height:aR.height+"px"}),aN=null},999),aN.exec.call(aP,"ImageView","display",this.result.uid,width,height),aR.destroy()}),aT.transport(aE.atob(aS.substring(aS.indexOf("base64,")+7)),aU,{required_caps:{display_media:!0},runtime_order:"flash,silverlight",container:aM})}}var aP=this,aN;aL=aC.extend({width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90},aL||{});try{if(!(aM=aq.get(aM))){throw new aw.DOMException(aw.DOMException.INVALID_NODE_TYPE_ERR)}if(!this.size){throw new aw.DOMException(aw.DOMException.INVALID_STATE_ERR)}this.width>aD.MAX_RESIZE_WIDTH||this.height>aD.MAX_RESIZE_HEIGHT;var aQ=new aD;return aQ.bind("Resize",function(){aO.call(this,aL.type,aL.quality)}),aQ.bind("Load",function(){aQ.downsize(aL)}),this.meta.thumb&&this.meta.thumb.width>=aL.width&&this.meta.thumb.height>=aL.height?aQ.load(this.meta.thumb.data):aQ.clone(this,!1),aQ}catch(aK){this.trigger("error",aK.code)}},destroy:function(){this.ruid&&(this.getRuntime().exec.call(this,"Image","destroy"),this.disconnectRuntime()),this.unbindAll()}}),this.handleEventProps(ay),this.bind("Load Resize",function(){aI.call(this)},999)}var ay=["progress","load","error","resize","embedded"];return aD.MAX_RESIZE_WIDTH=8192,aD.MAX_RESIZE_HEIGHT=8192,aD.prototype=az.instance,aD}),ac(W,[E,Z,ag,an],function(at,av,aq,aw){function au(aB){var az=this,aA=aq.capTest,ay=aq.capTrue,ax=at.extend({access_binary:aA(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return az.can("access_binary")&&!!ap.Image},display_media:aA(aw.can("create_canvas")||aw.can("use_data_uri_over32kb")),do_cors:aA(window.XMLHttpRequest&&"withCredentials" in new XMLHttpRequest),drag_and_drop:aA(function(){var aC=document.createElement("div");return("draggable" in aC||"ondragstart" in aC&&"ondrop" in aC)&&("IE"!==aw.browser||aw.verComp(aw.version,9,">"))}()),filter_by_extension:aA(function(){return"Chrome"===aw.browser&&aw.verComp(aw.version,28,">=")||"IE"===aw.browser&&aw.verComp(aw.version,10,">=")||"Safari"===aw.browser&&aw.verComp(aw.version,7,">=")}()),return_response_headers:ay,return_response_type:function(aC){return"json"===aC&&window.JSON?!0:aw.can("return_response_type",aC)},return_status_code:ay,report_upload_progress:aA(window.XMLHttpRequest&&(new XMLHttpRequest).upload),resize_image:function(){return az.can("access_binary")&&aw.can("create_canvas")},select_file:function(){return aw.can("use_fileinput")&&window.File},select_folder:function(){return az.can("select_file")&&"Chrome"===aw.browser&&aw.verComp(aw.version,21,">=")},select_multiple:function(){return !(!az.can("select_file")||"Safari"===aw.browser&&"Windows"===aw.os||"iOS"===aw.os&&aw.verComp(aw.osVersion,"7.0.0",">")&&aw.verComp(aw.osVersion,"8.0.0","<"))},send_binary_string:aA(window.XMLHttpRequest&&((new XMLHttpRequest).sendAsBinary||window.Uint8Array&&window.ArrayBuffer)),send_custom_headers:aA(window.XMLHttpRequest),send_multipart:function(){return !!(window.XMLHttpRequest&&(new XMLHttpRequest).upload&&window.FormData)||az.can("send_binary_string")},slice_blob:aA(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return az.can("slice_blob")&&az.can("send_multipart")},summon_file_dialog:function(){return az.can("select_file")&&("Firefox"===aw.browser&&aw.verComp(aw.version,4,">=")||"Opera"===aw.browser&&aw.verComp(aw.version,12,">=")||"IE"===aw.browser&&aw.verComp(aw.version,10,">=")||!!~at.inArray(aw.browser,["Chrome","Safari"]))},upload_filesize:ay},arguments[2]);aq.call(this,aB,arguments[1]||ar,ax),at.extend(this,{init:function(){this.trigger("Init")},destroy:function(aC){return function(){aC.call(az),aC=az=null}}(this.destroy)}),at.extend(this.getShim(),ap)}var ar="html5",ap={};return aq.addConstructor(ar,au),ap}),ac(j,[E],function(at){function aw(){this.returnValue=!1}function aq(){this.cancelBubble=!0}var ax={},au="moxie_"+at.guid(),ar=function(aC,az,aD,ay){var aA,aB;az=az.toLowerCase(),aC.addEventListener?(aA=aD,aC.addEventListener(az,aA,!1)):aC.attachEvent&&(aA=function(){var aE=window.event;aE.target||(aE.target=aE.srcElement),aE.preventDefault=aw,aE.stopPropagation=aq,aD(aE)},aC.attachEvent("on"+az,aA)),aC[au]||(aC[au]=at.guid()),ax.hasOwnProperty(aC[au])||(ax[aC[au]]={}),aB=ax[aC[au]],aB.hasOwnProperty(az)||(aB[az]=[]),aB[az].push({func:aA,orig:aD,key:ay})},ap=function(az,aB,aE){var aD,ay;if(aB=aB.toLowerCase(),az[au]&&ax[az[au]]&&ax[az[au]][aB]){aD=ax[az[au]][aB];for(var aA=aD.length-1;aA>=0&&(aD[aA].orig!==aE&&aD[aA].key!==aE||(az.removeEventListener?az.removeEventListener(aB,aD[aA].func,!1):az.detachEvent&&az.detachEvent("on"+aB,aD[aA].func),aD[aA].orig=null,aD[aA].func=null,aD.splice(aA,1),aE===ay));aA--){}if(aD.length||delete ax[az[au]][aB],at.isEmptyObj(ax[az[au]])){delete ax[az[au]];try{delete az[au]}catch(aC){az[au]=ay}}}},av=function(ay,az){ay&&ay[au]&&at.each(ax[ay[au]],function(aA,aB){ap(ay,aB,az)})};return{addEvent:ar,removeEvent:ap,removeAllEvents:av}}),ac(h,[W,a,E,ab,j,ao,an],function(at,aw,aq,ax,au,ar,ap){function av(){var ay;aq.extend(this,{init:function(aF){var aG=this,aH=aG.getRuntime(),aC,aI,aB,az,aE,aD;ay=aF,aB=ay.accept.mimes||ar.extList2mimes(ay.accept,aH.can("filter_by_extension")),aI=aH.getShimContainer(),aI.innerHTML='<input id="'+aH.uid+'" type="file" style="font-size:999px;opacity:0;"'+(ay.multiple&&aH.can("select_multiple")?"multiple":"")+(ay.directory&&aH.can("select_folder")?"webkitdirectory directory":"")+(aB?' accept="'+aB.join(",")+'"':"")+" />",aC=ax.get(aH.uid),aq.extend(aC.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),az=ax.get(ay.browse_button),aH.can("summon_file_dialog")&&("static"===ax.getStyle(az,"position")&&(az.style.position="relative"),aE=parseInt(ax.getStyle(az,"z-index"),10)||1,az.style.zIndex=aE,aI.style.zIndex=aE-1,au.addEvent(az,"click",function(aJ){var aK=ax.get(aH.uid);aK&&!aK.disabled&&aK.click(),aJ.preventDefault()},aG.uid)),aD=aH.can("summon_file_dialog")?az:aI,au.addEvent(aD,"mouseover",function(){aG.trigger("mouseenter")},aG.uid),au.addEvent(aD,"mouseout",function(){aG.trigger("mouseleave")},aG.uid),au.addEvent(aD,"mousedown",function(){aG.trigger("mousedown")},aG.uid),au.addEvent(ax.get(ay.container),"mouseup",function(){aG.trigger("mouseup")},aG.uid),aC.onchange=function aA(aK){if(aG.files=[],aq.each(this.files,function(aL){var aM="";return ay.directory&&"."==aL.name?!0:(aL.webkitRelativePath&&(aM="/"+aL.webkitRelativePath.replace(/^\//,"")),aL=new aw(aH.uid,aL),aL.relativePath=aM,void aG.files.push(aL))}),"IE"!==ap.browser&&"IEMobile"!==ap.browser){this.value=""}else{var aJ=this.cloneNode(!0);this.parentNode.replaceChild(aJ,this),aJ.onchange=aA}aG.files.length&&aG.trigger("change")},aG.trigger({type:"ready",async:!0}),aI=null},disable:function(aA){var aB=this.getRuntime(),az;(az=ax.get(aB.uid))&&(az.disabled=!!aA)},destroy:function(){var aB=this.getRuntime(),az=aB.getShim(),aA=aB.getShimContainer();au.removeAllEvents(aA,this.uid),au.removeAllEvents(ay&&ax.get(ay.container),this.uid),au.removeAllEvents(ay&&ax.get(ay.browse_button),this.uid),aA&&(aA.innerHTML=""),az.removeInstance(this.uid),ay=aA=az=null}})}return at.FileInput=av}),ac(V,[W,K],function(ap,aq){function ar(){function at(av,ax,au){var ay;if(!window.File.prototype.slice){return(ay=window.File.prototype.webkitSlice||window.File.prototype.mozSlice)?ay.call(av,ax,au):null}try{return av.slice(),av.slice(ax,au)}catch(aw){return av.slice(ax,au-ax)}}this.slice=function(){return new aq(this.getRuntime().uid,at.apply(this,arguments))}}return ap.Blob=ar}),ac(i,[W,a,E,ab,j,ao],function(at,av,aq,aw,au,ar){function ap(){function aI(aK){if(!aK.dataTransfer||!aK.dataTransfer.types){return !1}var aJ=aq.toArray(aK.dataTransfer.types||[]);return -1!==aq.inArray("Files",aJ)||-1!==aq.inArray("public.file-url",aJ)||-1!==aq.inArray("application/x-moz-file",aJ)}function aF(aL,aJ){if(aE(aL)){var aK=new av(ay,aL);aK.relativePath=aJ||"",ax.push(aK)}}function aD(aJ){for(var aL=[],aK=0;aK<aJ.length;aK++){[].push.apply(aL,aJ[aK].extensions.split(/\s*,\s*/))}return -1===aq.inArray("*",aL)?aL:[]}function aE(aK){if(!aC.length){return !0}var aJ=ar.getFileExtension(aK.name);return !aJ||-1!==aq.inArray(aJ,aC)}function aG(aJ,aL){var aK=[];aq.each(aJ,function(aM){var aN=aM.webkitGetAsEntry();aN&&(aN.isFile?aF(aM.getAsFile(),aN.fullPath):aK.push(aN))}),aK.length?aA(aK,aL):aL()}function aA(aJ,aL){var aK=[];aq.each(aJ,function(aM){aK.push(function(aN){aH(aM,aN)})}),aq.inSeries(aK,function(){aL()})}function aH(aK,aJ){aK.isFile?aK.file(function(aL){aF(aL,aK.fullPath),aJ()},function(){aJ()}):aK.isDirectory?az(aK,aJ):aJ()}function az(aN,aL){function aM(aO){aJ.readEntries(function(aP){aP.length?([].push.apply(aK,aP),aM(aO)):aO()},aO)}var aK=[],aJ=aN.createReader();aM(function(){aA(aK,aL)})}var ax=[],aC=[],aB,ay;aq.extend(this,{init:function(aL){var aK=this,aJ;aB=aL,ay=aK.ruid,aC=aD(aB.accept),aJ=aB.container,au.addEvent(aJ,"dragover",function(aM){aI(aM)&&(aM.preventDefault(),aM.dataTransfer.dropEffect="copy")},aK.uid),au.addEvent(aJ,"drop",function(aM){aI(aM)&&(aM.preventDefault(),ax=[],aM.dataTransfer.items&&aM.dataTransfer.items[0].webkitGetAsEntry?aG(aM.dataTransfer.items,function(){aK.files=ax,aK.trigger("drop")}):(aq.each(aM.dataTransfer.files,function(aN){aF(aN)}),aK.files=ax,aK.trigger("drop")))},aK.uid),au.addEvent(aJ,"dragenter",function(aM){aK.trigger("dragenter")},aK.uid),au.addEvent(aJ,"dragleave",function(aM){aK.trigger("dragleave")},aK.uid)},destroy:function(){au.removeAllEvents(aB&&aw.get(aB.container),this.uid),ay=ax=aC=aB=null}})}return at.FileDrop=ap}),ac(b,[W,H,E],function(at,ap,ar){function aq(){function au(ax){return ap.atob(ax.substring(ax.indexOf("base64,")+7))}var aw,av=!1;ar.extend(this,{read:function(ay,ax){var az=this;az.result="",aw=new window.FileReader,aw.addEventListener("progress",function(aA){az.trigger(aA)}),aw.addEventListener("load",function(aA){az.result=av?au(aw.result):aw.result,az.trigger(aA)}),aw.addEventListener("error",function(aA){az.trigger(aA,aw.error)}),aw.addEventListener("loadend",function(aA){aw=null,az.trigger(aA)}),"function"===ar.typeOf(aw[ay])?(av=!1,aw[ay](ax.getSource())):"readAsBinaryString"===ay&&(av=!0,aw.readAsDataURL(ax.getSource()))},abort:function(){aw&&aw.abort()},destroy:function(){aw=null}})}return at.FileReader=aq}),ac(l,[W,E,ao,I,a,K,e,Z,an],function(av,aq,ax,aw,az,ay,at,ap,ar){function au(){function aE(aI,aK){var aH=this,aL,aJ;aL=aK.getBlob().getSource(),aJ=new window.FileReader,aJ.onload=function(){aK.append(aK.getBlobName(),new ay(null,{type:aL.type,data:aJ.result})),aB.send.call(aH,aI,aK)},aJ.readAsBinaryString(aL)}function aC(){return !window.XMLHttpRequest||"IE"===ar.browser&&ar.verComp(ar.version,8,"<")?function(){for(var aI=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"],aJ=0;aJ<aI.length;aJ++){try{return new ActiveXObject(aI[aJ])}catch(aH){}}}():new window.XMLHttpRequest}function aA(aI){var aJ=aI.responseXML,aH=aI.responseText;return"IE"===ar.browser&&aH&&aJ&&!aJ.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(aI.getResponseHeader("Content-Type"))&&(aJ=new window.ActiveXObject("Microsoft.XMLDOM"),aJ.async=!1,aJ.validateOnParse=!1,aJ.loadXML(aH)),aJ&&("IE"===ar.browser&&0!==aJ.parseError||!aJ.documentElement||"parsererror"===aJ.documentElement.tagName)?null:aJ}function aD(aH){var aJ="----moxieboundary"+(new Date).getTime(),aM="--",aK="\r\n",aI="",aL=this.getRuntime();if(!aL.can("send_binary_string")){throw new ap.RuntimeError(ap.RuntimeError.NOT_SUPPORTED_ERR)}return aG.setRequestHeader("Content-Type","multipart/form-data; boundary="+aJ),aH.each(function(aO,aN){aI+=aO instanceof ay?aM+aJ+aK+'Content-Disposition: form-data; name="'+aN+'"; filename="'+unescape(encodeURIComponent(aO.name||"blob"))+'"'+aK+"Content-Type: "+(aO.type||"application/octet-stream")+aK+aK+aO.getSource()+aK:aM+aJ+aK+'Content-Disposition: form-data; name="'+aN+'"'+aK+aK+unescape(encodeURIComponent(aO))+aK}),aI+=aM+aJ+aM+aK}var aB=this,aG,aF;aq.extend(this,{send:function(aM,aO){var aI=this,aL="Mozilla"===ar.browser&&ar.verComp(ar.version,4,">=")&&ar.verComp(ar.version,7,"<"),aJ="Android Browser"===ar.browser,aN=!1;if(aF=aM.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase(),aG=aC(),aG.open(aM.method,aM.url,aM.async,aM.user,aM.password),aO instanceof ay){aO.isDetached()&&(aN=!0),aO=aO.getSource()}else{if(aO instanceof at){if(aO.hasBlob()){if(aO.getBlob().isDetached()){aO=aD.call(aI,aO),aN=!0}else{if((aL||aJ)&&"blob"===aq.typeOf(aO.getBlob().getSource())&&window.FileReader){return void aE.call(aI,aM,aO)}}}if(aO instanceof at){var aH=new window.FormData;aO.each(function(aP,aQ){aP instanceof ay?aH.append(aQ,aP.getSource()):aH.append(aQ,aP)}),aO=aH}}}aG.upload?(aM.withCredentials&&(aG.withCredentials=!0),aG.addEventListener("load",function(aP){aI.trigger(aP)}),aG.addEventListener("error",function(aP){aI.trigger(aP)}),aG.addEventListener("progress",function(aP){aI.trigger(aP)}),aG.upload.addEventListener("progress",function(aP){aI.trigger({type:"UploadProgress",loaded:aP.loaded,total:aP.total})})):aG.onreadystatechange=function aK(){switch(aG.readyState){case 1:break;case 2:break;case 3:var aR,aQ;try{aw.hasSameOrigin(aM.url)&&(aR=aG.getResponseHeader("Content-Length")||0),aG.responseText&&(aQ=aG.responseText.length)}catch(aP){aR=aQ=0}aI.trigger({type:"progress",lengthComputable:!!aR,total:parseInt(aR,10),loaded:aQ});break;case 4:aG.onreadystatechange=function(){},aI.trigger(0===aG.status?"error":"load")}},aq.isEmptyObj(aM.headers)||aq.each(aM.headers,function(aP,aQ){aG.setRequestHeader(aQ,aP)}),""!==aM.responseType&&"responseType" in aG&&("json"!==aM.responseType||ar.can("return_response_type","json")?aG.responseType=aM.responseType:aG.responseType="text"),aN?aG.sendAsBinary?aG.sendAsBinary(aO):!function(){for(var aP=new Uint8Array(aO.length),aQ=0;aQ<aO.length;aQ++){aP[aQ]=255&aO.charCodeAt(aQ)}aG.send(aP.buffer)}():aG.send(aO),aI.trigger("loadstart")},getStatus:function(){try{if(aG){return aG.status}}catch(aH){}return 0},getResponse:function(aH){var aJ=this.getRuntime();try{switch(aH){case"blob":var aK=new az(aJ.uid,aG.response),aM=aG.getResponseHeader("Content-Disposition");if(aM){var aL=aM.match(/filename=([\'\"'])([^\1]+)\1/);aL&&(aF=aL[2])}return aK.name=aF,aK.type||(aK.type=ax.getFileMime(aF)),aK;case"json":return ar.can("return_response_type","json")?aG.response:200===aG.status&&window.JSON?JSON.parse(aG.responseText):null;case"document":return aA(aG);default:return""!==aG.responseText?aG.responseText:null}}catch(aI){return null}},getAllResponseHeaders:function(){try{return aG.getAllResponseHeaders()}catch(aH){}return""},abort:function(){aG&&aG.abort()},destroy:function(){aB=aF=null}})}return av.XMLHttpRequest=au}),ac(d,[E],function(at){function ap(au){au instanceof ArrayBuffer?ar.apply(this,arguments):aq.apply(this,arguments)}function ar(av){var au=new DataView(av);at.extend(this,{readByteAt:function(aw){return au.getUint8(aw)},writeByteAt:function(aw,ax){au.setUint8(aw,ax)},SEGMENT:function(ax,az,ay){switch(arguments.length){case 2:return av.slice(ax,ax+az);case 1:return av.slice(ax);case 3:if(null===ay&&(ay=new ArrayBuffer),ay instanceof ArrayBuffer){var aw=new Uint8Array(this.length()-az+ay.byteLength);ax>0&&aw.set(new Uint8Array(av.slice(0,ax)),0),aw.set(new Uint8Array(ay),ax),aw.set(new Uint8Array(av.slice(ax+az)),ax+ay.byteLength),this.clear(),av=aw.buffer,au=new DataView(av);break}default:return av}},length:function(){return av?av.byteLength:0},clear:function(){au=av=null}})}function aq(av){function au(ax,aw,ay){ay=3===arguments.length?ay:av.length-aw-1,av=av.substr(0,aw)+ax+av.substr(ay+aw)}at.extend(this,{readByteAt:function(aw){return av.charCodeAt(aw)},writeByteAt:function(aw,ax){au(String.fromCharCode(ax),aw,1)},SEGMENT:function(aw,ay,ax){switch(arguments.length){case 1:return av.substr(aw);case 2:return av.substr(aw,ay);case 3:au(null!==ax?ax:"",aw,ay);break;default:return av}},length:function(){return av?av.length:0},clear:function(){av=null}})}return at.extend(ap.prototype,{littleEndian:!1,read:function(av,ax){var au,ay,aw;if(av+ax>this.length()){throw new Error("You are trying to read outside the source boundaries.")}for(ay=this.littleEndian?0:-8*(ax-1),aw=0,au=0;ax>aw;aw++){au|=this.readByteAt(av+aw)<<Math.abs(ay+8*aw)}return au},write:function(aw,ay,au){var az,ax,av="";if(aw>this.length()){throw new Error("You are trying to write outside the source boundaries.")}for(az=this.littleEndian?0:-8*(au-1),ax=0;au>ax;ax++){this.writeByteAt(aw+ax,ay>>Math.abs(az+8*ax)&255)}},BYTE:function(au){return this.read(au,1)},SHORT:function(au){return this.read(au,2)},LONG:function(au){return this.read(au,4)},SLONG:function(au){var av=this.read(au,4);return av>2147483647?av-4294967296:av},CHAR:function(au){return String.fromCharCode(this.read(au,1))},STRING:function(au,av){return this.asArray("CHAR",au,av).join("")},asArray:function(av,ax,au){for(var ay=[],aw=0;au>aw;aw++){ay[aw]=this[av](ax+aw)}return ay}}),ap}),ac(T,[d,Z],function(ap,aq){return function ar(aw){var au=[],at,ay,av,ax=0;if(at=new ap(aw),65496!==at.SHORT(0)){throw at.clear(),new aq.ImageError(aq.ImageError.WRONG_FORMAT)}for(ay=2;ay<=at.length();){if(av=at.SHORT(ay),av>=65488&&65495>=av){ay+=2}else{if(65498===av||65497===av){break}ax=at.SHORT(ay+2)+2,av>=65505&&65519>=av&&au.push({hex:av,name:"APP"+(15&av),start:ay,length:ax,segment:at.SEGMENT(ay,ax)}),ay+=ax}}return at.clear(),{headers:au,restore:function(aA){var aC,aB,az;for(az=new ap(aA),ay=65504==az.SHORT(2)?4+az.SHORT(4):2,aB=0,aC=au.length;aC>aB;aB++){az.SEGMENT(ay,0,au[aB].segment),ay+=au[aB].length}return aA=az.SEGMENT(),az.clear(),aA},strip:function(az){var aA,aD,aC,aB;for(aC=new ar(az),aD=aC.headers,aC.purge(),aA=new ap(az),aB=aD.length;aB--;){aA.SEGMENT(aD[aB].start,aD[aB].length,"")}return az=aA.SEGMENT(),aA.clear(),az},get:function(az){for(var aA=[],aC=0,aB=au.length;aB>aC;aC++){au[aC].name===az.toUpperCase()&&aA.push(au[aC].segment)}return aA},set:function(aE,az){var aC=[],aA,aD,aB;for("string"==typeof az?aC.push(az):aC=az,aA=aD=0,aB=au.length;aB>aA&&(au[aA].name===aE.toUpperCase()&&(au[aA].segment=aC[aD],au[aA].length=aC[aD].length,aD++),!(aD>=aC.length));aA++){}},purge:function(){this.headers=au=[]}}}}),ac(ae,[E,d,Z],function(at,ar,aq){function ap(aB){function av(aH,aI){var aJ=this,aP,aK,aL,aR,aF,aS,aN,aG,aE=[],aM={},aO={1:"BYTE",7:"UNDEFINED",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",9:"SLONG",10:"SRATIONAL"},aQ={BYTE:1,UNDEFINED:1,ASCII:1,SHORT:2,LONG:4,RATIONAL:8,SLONG:4,SRATIONAL:8};for(aP=aJ.SHORT(aH),aK=0;aP>aK;aK++){if(aE=[],aN=aH+2+12*aK,aL=aI[aJ.SHORT(aN)],aL!==D){if(aR=aO[aJ.SHORT(aN+=2)],aF=aJ.LONG(aN+=2),aS=aQ[aR],!aS){throw new aq.ImageError(aq.ImageError.INVALID_META_ERR)}if(aN+=4,aS*aF>4&&(aN=aJ.LONG(aN)+ax.tiffHeader),aN+aS*aF>=this.length()){throw new aq.ImageError(aq.ImageError.INVALID_META_ERR)}"ASCII"!==aR?(aE=aJ.asArray(aR,aN,aF),aG=1==aF?aE[0]:aE,aA.hasOwnProperty(aL)&&"object"!=typeof aG?aM[aL]=aA[aL][aG]:aM[aL]=aG):aM[aL]=at.trim(aJ.STRING(aN,aF).replace(/\0$/,""))}}return aM}function aD(aK,aF,aO){var aM,aJ,aH,aI=0;if("string"==typeof aF){var aE=aw[aK.toLowerCase()];for(var aG in aE){if(aE[aG]===aF){aF=aG;break}}}aM=ax[aK.toLowerCase()+"IFD"],aJ=this.SHORT(aM);for(var aN=0;aJ>aN;aN++){if(aH=aM+12*aN+2,this.SHORT(aH)==aF){aI=aH+8;break}}if(!aI){return !1}try{this.write(aI,aO,4)}catch(aL){return !1}return !0}var au,aw,aA,ax,az,ay;if(ar.call(this,aB),aw={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"},thumb:{513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength"}},aA={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},ax={tiffHeader:10},az=ax.tiffHeader,au={clear:this.clear},at.extend(this,{read:function(){try{return ap.prototype.read.apply(this,arguments)}catch(aE){throw new aq.ImageError(aq.ImageError.INVALID_META_ERR)}},write:function(){try{return ap.prototype.write.apply(this,arguments)}catch(aE){throw new aq.ImageError(aq.ImageError.INVALID_META_ERR)}},UNDEFINED:function(){return this.BYTE.apply(this,arguments)},RATIONAL:function(aE){return this.LONG(aE)/this.LONG(aE+4)},SRATIONAL:function(aE){return this.SLONG(aE)/this.SLONG(aE+4)},ASCII:function(aE){return this.CHAR(aE)},TIFF:function(){return ay||null},EXIF:function(){var aF=null;if(ax.exifIFD){try{aF=av.call(this,ax.exifIFD,aw.exif)}catch(aH){return null}if(aF.ExifVersion&&"array"===at.typeOf(aF.ExifVersion)){for(var aG=0,aE="";aG<aF.ExifVersion.length;aG++){aE+=String.fromCharCode(aF.ExifVersion[aG])}aF.ExifVersion=aE}}return aF},GPS:function(){var aF=null;if(ax.gpsIFD){try{aF=av.call(this,ax.gpsIFD,aw.gps)}catch(aE){return null}aF.GPSVersionID&&"array"===at.typeOf(aF.GPSVersionID)&&(aF.GPSVersionID=aF.GPSVersionID.join("."))}return aF},thumb:function(){if(ax.IFD1){try{var aE=av.call(this,ax.IFD1,aw.thumb);if("JPEGInterchangeFormat" in aE){return this.SEGMENT(ax.tiffHeader+aE.JPEGInterchangeFormat,aE.JPEGInterchangeFormatLength)}}catch(aF){}}return null},setExif:function(aE,aF){return"PixelXDimension"!==aE&&"PixelYDimension"!==aE?!1:aD.call(this,"exif",aE,aF)},clear:function(){au.clear(),aB=aw=aA=ay=ax=au=null}}),65505!==this.SHORT(0)||"EXIF\x00"!==this.STRING(4,5).toUpperCase()){throw new aq.ImageError(aq.ImageError.INVALID_META_ERR)}if(this.littleEndian=18761==this.SHORT(az),42!==this.SHORT(az+=2)){throw new aq.ImageError(aq.ImageError.INVALID_META_ERR)}ax.IFD0=ax.tiffHeader+this.LONG(az+=2),ay=av.call(this,ax.IFD0,aw.tiff),"ExifIFDPointer" in ay&&(ax.exifIFD=ax.tiffHeader+ay.ExifIFDPointer,delete ay.ExifIFDPointer),"GPSInfoIFDPointer" in ay&&(ax.gpsIFD=ax.tiffHeader+ay.GPSInfoIFDPointer,delete ay.GPSInfoIFDPointer),at.isEmptyObj(ay)&&(ay=null);var aC=this.LONG(ax.IFD0+12*this.SHORT(ax.IFD0)+2);aC&&(ax.IFD1=ax.tiffHeader+aC)}return ap.prototype=ar.prototype,ap}),ac(q,[E,Z,T,d,ae],function(au,ap,ar,aq,av){function at(aE){function ay(aI){var aF=0,aH,aG;for(aI||(aI=az);aF<=aI.length();){if(aH=aI.SHORT(aF+=2),aH>=65472&&65475>=aH){return aF+=5,{height:aI.SHORT(aF),width:aI.SHORT(aF+=2)}}aG=aI.SHORT(aF+=2),aF+=aG-2}return null}function aw(){var aF=aA.thumb(),aG,aH;return aF&&(aG=new aq(aF),aH=ay(aG),aG.clear(),aH)?(aH.data=aF,aH):null}function ax(){aA&&aD&&az&&(aA.clear(),aD.purge(),az.clear(),aC=aD=aA=az=null)}var az,aD,aA,aC;if(az=new aq(aE),65496!==az.SHORT(0)){throw new ap.ImageError(ap.ImageError.WRONG_FORMAT)}aD=new ar(aE);try{aA=new av(aD.get("app1")[0])}catch(aB){}aC=ay.call(this),au.extend(this,{type:"image/jpeg",size:az.length(),width:aC&&aC.width||0,height:aC&&aC.height||0,setExif:function(aG,aF){return aA?("object"===au.typeOf(aG)?au.each(aG,function(aH,aI){aA.setExif(aI,aH)}):aA.setExif(aG,aF),void aD.set("app1",aA.SEGMENT())):!1},writeHeaders:function(){return aD.restore(arguments.length?arguments[0]:aE)},stripHeaders:function(aF){return aD.strip(aF)},purge:function(){ax.call(this)}}),aA&&(this.meta={tiff:aA.TIFF(),exif:aA.EXIF(),gps:aA.GPS(),thumb:aw()})}return at}),ac(c,[Z,E,d],function(at,ap,ar){function aq(ax){function av(){var aC,aD;return aC=az.call(this,8),"IHDR"==aC.type?(aD=aC.start,{width:aw.LONG(aD),height:aw.LONG(aD+=4)}):null}function au(){aw&&(aw.clear(),ax=aA=ay=aB=aw=null)}function az(aE){var aG,aD,aC,aF;return aG=aw.LONG(aE),aD=aw.STRING(aE+=4,4),aC=aE+=4,aF=aw.LONG(aE+aG),{length:aG,type:aD,start:aC,CRC:aF}}var aw,ay,aB,aA;aw=new ar(ax),function(){var aE=0,aD=0,aC=[35152,20039,3338,6666];for(aD=0;aD<aC.length;aD++,aE+=2){if(aC[aD]!=aw.SHORT(aE)){throw new at.ImageError(at.ImageError.WRONG_FORMAT)}}}(),aA=av.call(this),ap.extend(this,{type:"image/png",size:aw.length(),width:aA.width,height:aA.height,purge:function(){au.call(this)}}),au.call(this)}return aq}),ac(L,[E,Z,q,c],function(at,ap,ar,aq){return function(av){var au=[ar,aq],aw;aw=function(){for(var ay=0;ay<au.length;ay++){try{return new au[ay](av)}catch(ax){}}throw new ap.ImageError(ap.ImageError.WRONG_FORMAT)}(),at.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(ax){return ax},stripHeaders:function(ax){return ax},purge:function(){av=null}}),at.extend(this,aw),this.purge=function(){aw.purge(),aw=null}}}),ac(A,[],function(){function ap(ay,aD,aJ){var aH=ay.naturalWidth,au=ay.naturalHeight,aL=aJ.width,aG=aJ.height,aw=aJ.x||0,aE=aJ.y||0,ax=aD.getContext("2d");aq(ay)&&(aH/=2,au/=2);var aC=1024,aA=document.createElement("canvas");aA.width=aA.height=aC;for(var aI=aA.getContext("2d"),aF=ar(ay,aH,au),aB=0;au>aB;){for(var aK=aB+aC>au?au-aB:aC,aM=0;aH>aM;){var aO=aM+aC>aH?aH-aM:aC;aI.clearRect(0,0,aC,aC),aI.drawImage(ay,-aM,-aB);var az=aM*aL/aH+aw<<0,at=Math.ceil(aO*aL/aH),av=aB*aG/au/aF+aE<<0,aN=Math.ceil(aK*aG/au/aF);ax.drawImage(aA,0,0,aO,aK,az,av,at,aN),aM+=aC}aB+=aC}aA=aI=null}function aq(au){var aw=au.naturalWidth,at=au.naturalHeight;if(aw*at>1048576){var ax=document.createElement("canvas");ax.width=ax.height=1;var av=ax.getContext("2d");return av.drawImage(au,-aw+1,0),0===av.getImageData(0,0,1,1).data[3]}return !1}function ar(aw,aD,az){var ax=document.createElement("canvas");ax.width=1,ax.height=az;var aB=ax.getContext("2d");aB.drawImage(aw,0,0);for(var aA=aB.getImageData(0,0,1,az).data,au=0,aC=az,at=az;at>au;){var av=aA[4*(at-1)+3];0===av?aC=at:au=at,at=aC+au>>1}ax=null;var ay=at/az;return 0===ay?1:ay}return{isSubsampled:aq,renderTo:ap}}),ac(ad,[W,E,Z,H,K,a,L,A,ao,an],function(au,ap,ax,av,az,ay,ar,aA,aq,at){function aw(){function aJ(){if(!aL&&!aP){throw new ax.ImageError(ax.DOMException.INVALID_STATE_ERR)}return aL||aP}function aK(aS){return av.atob(aS.substring(aS.indexOf("base64,")+7))}function aG(aT,aS){return"data:"+(aS||"")+";base64,"+av.btoa(aT)}function aF(aT){var aS=this;aP=new Image,aP.onerror=function(){aQ.call(this),aS.trigger("error",ax.ImageError.WRONG_FORMAT)},aP.onload=function(){aS.trigger("load")},aP.src="data:"==aT.substr(0,5)?aT:aG(aT,aD.type)}function aR(aV,aU){var aT=this,aS;return window.FileReader?(aS=new FileReader,aS.onload=function(){aU(this.result)},aS.onerror=function(){aT.trigger("error",ax.ImageError.WRONG_FORMAT)},aS.readAsDataURL(aV),void 0):aU(aV.getAsDataURL())}function aO(a3,a5,aX,a4){var aV=this,aS,aT,aW=0,a1=0,aY,a2,aZ,a0;if(aE=a4,a0=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1,-1!==ap.inArray(a0,[5,6,7,8])){var aU=a3;a3=a5,a5=aU}return aY=aJ(),aX?(a3=Math.min(a3,aY.width),a5=Math.min(a5,aY.height),aS=Math.max(a3/aY.width,a5/aY.height)):aS=Math.min(a3/aY.width,a5/aY.height),aS>1&&!aX&&a4?void this.trigger("Resize"):(aL||(aL=document.createElement("canvas")),a2=Math.round(aY.width*aS),aZ=Math.round(aY.height*aS),aX?(aL.width=a3,aL.height=a5,a2>a3&&(aW=Math.round((a2-a3)/2)),aZ>a5&&(a1=Math.round((aZ-a5)/2))):(aL.width=a2,aL.height=aZ),aE||aH(aL.width,aL.height,a0),aI.call(this,aY,aL,-aW,-a1,a2,aZ),this.width=aL.width,this.height=aL.height,aB=!0,void aV.trigger("Resize"))}function aI(aX,aS,aV,aU,aY,aW){if("iOS"===at.OS){aA.renderTo(aX,aS,{width:aY,height:aW,x:aV,y:aU})}else{var aT=aS.getContext("2d");aT.drawImage(aX,aV,aU,aY,aW)}}function aH(aU,aV,aS){switch(aS){case 5:case 6:case 7:case 8:aL.width=aV,aL.height=aU;break;default:aL.width=aU,aL.height=aV}var aT=aL.getContext("2d");switch(aS){case 2:aT.translate(aU,0),aT.scale(-1,1);break;case 3:aT.translate(aU,aV),aT.rotate(Math.PI);break;case 4:aT.translate(0,aV),aT.scale(1,-1);break;case 5:aT.rotate(0.5*Math.PI),aT.scale(1,-1);break;case 6:aT.rotate(0.5*Math.PI),aT.translate(0,-aV);break;case 7:aT.rotate(0.5*Math.PI),aT.translate(aU,-aV),aT.scale(-1,1);break;case 8:aT.rotate(-0.5*Math.PI),aT.translate(-aU,0)}}function aQ(){aC&&(aC.purge(),aC=null),aN=aP=aL=aD=null,aB=!1}var aM=this,aP,aC,aL,aN,aD,aB=!1,aE=!0;ap.extend(this,{loadFromBlob:function(aU){var aV=this,aT=aV.getRuntime(),aS=arguments.length>1?arguments[1]:!0;if(!aT.can("access_binary")){throw new ax.RuntimeError(ax.RuntimeError.NOT_SUPPORTED_ERR)}return aD=aU,aU.isDetached()?(aN=aU.getSource(),void aF.call(this,aN)):void aR.call(this,aU.getSource(),function(aW){aS&&(aN=aK(aW)),aF.call(aV,aW)})},loadFromImage:function(aT,aS){this.meta=aT.meta,aD=new ay(null,{name:aT.name,size:aT.size,type:aT.type}),aF.call(this,aS?aN=aT.getAsBinaryString():aT.getAsDataURL())},getInfo:function(){var aT=this.getRuntime(),aS;return !aC&&aN&&aT.can("access_image_binary")&&(aC=new ar(aN)),aS={width:aJ().width||0,height:aJ().height||0,type:aD.type||aq.getFileMime(aD.name),size:aN&&aN.length||aD.size||0,name:aD.name||"",meta:aC&&aC.meta||this.meta||{}}},downsize:function(){aO.apply(this,arguments)},getAsCanvas:function(){return aL&&(aL.id=this.uid+"_canvas"),aL},getAsBlob:function(aT,aS){return aT!==this.type&&aO.call(this,this.width,this.height,!1),new ay(null,{name:aD.name||"",type:aT,data:aM.getAsBinaryString.call(this,aT,aS)})},getAsDataURL:function(aU){var aT=arguments[1]||90;if(!aB){return aP.src}if("image/jpeg"!==aU){return aL.toDataURL("image/png")}try{return aL.toDataURL("image/jpeg",aT/100)}catch(aS){return aL.toDataURL("image/jpeg")}},getAsBinaryString:function(aU,aV){if(!aB){return aN||(aN=aK(aM.getAsDataURL(aU,aV))),aN}if("image/jpeg"!==aU){aN=aK(aM.getAsDataURL(aU,aV))}else{var aS;aV||(aV=90);try{aS=aL.toDataURL("image/jpeg",aV/100)}catch(aT){aS=aL.toDataURL("image/jpeg")}aN=aK(aS),aC&&(aN=aC.stripHeaders(aN),aE&&(aC.meta&&aC.meta.exif&&aC.setExif({PixelXDimension:this.width,PixelYDimension:this.height}),aN=aC.writeHeaders(aN)),aC.purge(),aC=null)}return aB=!1,aN},destroy:function(){aM=null,aQ.call(this),this.getRuntime().getShim().removeInstance(this.uid)}})}return au.Image=aw}),ac(u,[E,an,ab,Z,ag],function(au,ap,ax,av,az){function ay(){var aD;try{aD=navigator.plugins["Shockwave Flash"],aD=aD.description}catch(aB){try{aD=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(aC){aD="0.0"}}return aD=aD.match(/\d+/g),parseFloat(aD[0]+"."+aD[1])}function ar(aC){var aB=ax.get(aC);aB&&"OBJECT"==aB.nodeName&&("IE"===ap.browser?(aB.style.display="none",function aD(){4==aB.readyState?aA(aC):setTimeout(aD,10)}()):aB.parentNode.removeChild(aB))}function aA(aC){var aD=ax.get(aC);if(aD){for(var aB in aD){"function"==typeof aD[aB]&&(aD[aB]=null)}aD.parentNode.removeChild(aD)}}function aq(aD){var aB=this,aC;aD=au.extend({swf_url:ap.swf_url},aD),az.call(this,aD,at,{access_binary:function(aE){return aE&&"browser"===aB.mode},access_image_binary:function(aE){return aE&&"browser"===aB.mode},display_media:az.capTrue,do_cors:az.capTrue,drag_and_drop:!1,report_upload_progress:function(){return"client"===aB.mode},resize_image:az.capTrue,return_response_headers:!1,return_response_type:function(aE){return"json"===aE&&window.JSON?!0:!au.arrayDiff(aE,["","text","document"])||"browser"===aB.mode},return_status_code:function(aE){return"browser"===aB.mode||!au.arrayDiff(aE,[200,404])},select_file:az.capTrue,select_multiple:az.capTrue,send_binary_string:function(aE){return aE&&"browser"===aB.mode},send_browser_cookies:function(aE){return aE&&"browser"===aB.mode},send_custom_headers:function(aE){return aE&&"browser"===aB.mode},send_multipart:az.capTrue,slice_blob:function(aE){return aE&&"browser"===aB.mode},stream_upload:function(aE){return aE&&"browser"===aB.mode},summon_file_dialog:!1,upload_filesize:function(aE){return au.parseSizeStr(aE)<=2097152||"client"===aB.mode},use_http_method:function(aE){return !au.arrayDiff(aE,["GET","POST"])}},{access_binary:function(aE){return aE?"browser":"client"},access_image_binary:function(aE){return aE?"browser":"client"},report_upload_progress:function(aE){return aE?"browser":"client"},return_response_type:function(aE){return au.arrayDiff(aE,["","text","json","document"])?"browser":["client","browser"]},return_status_code:function(aE){return au.arrayDiff(aE,[200,404])?"browser":["client","browser"]},send_binary_string:function(aE){return aE?"browser":"client"},send_browser_cookies:function(aE){return aE?"browser":"client"},send_custom_headers:function(aE){return aE?"browser":"client"},stream_upload:function(aE){return aE?"client":"browser"},upload_filesize:function(aE){return au.parseSizeStr(aE)>=2097152?"client":"browser"}},"client"),ay()<10&&(this.mode=!1),au.extend(this,{getShim:function(){return ax.get(this.uid)},shimExec:function(aE,aF){var aG=[].slice.call(arguments,2);return aB.getShim().exec(this.uid,aE,aF,aG)},init:function(){var aG,aF,aE;aE=this.getShimContainer(),au.extend(aE.style,{position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),aG='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+aD.swf_url+'" ',"IE"===ap.browser&&(aG+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),aG+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+aD.swf_url+'" /><param name="flashvars" value="uid='+escape(this.uid)+"&target="+ap.global_event_dispatcher+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',"IE"===ap.browser?(aF=document.createElement("div"),aE.appendChild(aF),aF.outerHTML=aG,aF=aE=null):aE.innerHTML=aG,aC=setTimeout(function(){aB&&!aB.initialized&&aB.trigger("Error",new av.RuntimeError(av.RuntimeError.NOT_INIT_ERR))},5000)},destroy:function(aE){return function(){ar(aB.uid),aE.call(aB),clearTimeout(aC),aD=aC=aE=aB=null}}(this.destroy)},aw)}var at="flash",aw={};return az.addConstructor(at,aq),aw}),ac(r,[u,a,E],function(at,ap,ar){var aq={init:function(au){var aw=this,av=this.getRuntime();this.bind("Change",function(){var ax=av.shimExec.call(aw,"FileInput","getFiles");aw.files=[],ar.each(ax,function(ay){aw.files.push(new ap(av.uid,ay))})},999),this.getRuntime().shimExec.call(this,"FileInput","init",{name:au.name,accept:au.accept,multiple:au.multiple}),this.trigger("ready")}};return at.FileInput=aq}),ac(s,[u,K],function(ap,aq){var ar={slice:function(av,at,ax,aw){var au=this.getRuntime();return 0>at?at=Math.max(av.size+at,0):at>0&&(at=Math.min(at,av.size)),0>ax?ax=Math.max(av.size+ax,0):ax>0&&(ax=Math.min(ax,av.size)),av=au.shimExec.call(this,"Blob","slice",at,ax,aw||""),av&&(av=new aq(au.uid,av)),av}};return ap.Blob=ar}),ac(v,[u,H],function(at,ap){function ar(av,au){switch(au){case"readAsText":return ap.atob(av,"utf8");case"readAsBinaryString":return ap.atob(av);case"readAsDataURL":return av}return null}var aq={read:function(au,av){var aw=this;return aw.result="","readAsDataURL"===au&&(aw.result="data:"+(av.type||"")+";base64,"),aw.bind("Progress",function(ay,ax){ax&&(aw.result+=ar(ax,au))},999),aw.getRuntime().shimExec.call(this,"FileReader","readAsBase64",av.uid)}};return at.FileReader=aq}),ac(Q,[u,H],function(at,ap){function ar(av,au){switch(au){case"readAsText":return ap.atob(av,"utf8");case"readAsBinaryString":return ap.atob(av);case"readAsDataURL":return av}return null}var aq={read:function(au,aw){var ax,av=this.getRuntime();return(ax=av.shimExec.call(this,"FileReaderSync","readAsBase64",aw.uid))?("readAsDataURL"===au&&(ax="data:"+(aw.type||"")+";base64,"+ax),ar(ax,au,aw.type)):null}};return at.FileReaderSync=aq}),ac(f,[u,E,K,a,S,e,o],function(at,aw,aq,ax,au,ar,ap){var av={send:function(az,aB){function aD(){az.transport=aC.mode,aC.shimExec.call(aG,"XMLHttpRequest","send",az,aB)}function aE(aH,aI){aC.shimExec.call(aG,"XMLHttpRequest","appendBlob",aH,aI.uid),aB=null,aD()}function aF(aH,aI){var aJ=new ap;aJ.bind("TransportingComplete",function(){aI(this.result)}),aJ.transport(aH.getSource(),aH.type,{ruid:aC.uid})}var aG=this,aC=aG.getRuntime();if(aw.isEmptyObj(az.headers)||aw.each(az.headers,function(aH,aI){aC.shimExec.call(aG,"XMLHttpRequest","setRequestHeader",aI,aH.toString())}),aB instanceof ar){var ay;if(aB.each(function(aH,aI){aH instanceof aq?ay=aI:aC.shimExec.call(aG,"XMLHttpRequest","append",aI,aH)}),aB.hasBlob()){var aA=aB.getBlob();aA.isDetached()?aF(aA,function(aH){aA.destroy(),aE(ay,aH)}):aE(ay,aA)}else{aB=null,aD()}}else{aB instanceof aq?aB.isDetached()?aF(aB,function(aH){aB.destroy(),aB=aH.uid,aD()}):(aB=aB.uid,aD()):aD()}},getResponse:function(az){var aB,ay,aA=this.getRuntime();if(ay=aA.shimExec.call(this,"XMLHttpRequest","getResponseAsBlob")){if(ay=new ax(aA.uid,ay),"blob"===az){return ay}try{if(aB=new au,~aw.inArray(az,["","text"])){return aB.readAsText(ay)}if("json"===az&&window.JSON){return JSON.parse(aB.readAsText(ay))}}finally{ay.destroy()}}return null},abort:function(az){var ay=this.getRuntime();ay.shimExec.call(this,"XMLHttpRequest","abort"),this.dispatchEvent("readystatechange"),this.dispatchEvent("abort")}};return at.XMLHttpRequest=av}),ac(w,[u,K],function(ap,aq){var ar={getAsBlob:function(au){var at=this.getRuntime(),av=at.shimExec.call(this,"Transporter","getAsBlob",au);return av?new aq(at.uid,av):null}};return ap.Transporter=ar}),ac(g,[u,E,o,K,S],function(au,ap,ar,aq,av){var at={loadFromBlob:function(ax){function az(aB){ay.shimExec.call(aA,"Image","loadFromBlob",aB.uid),aA=ay=null}var aA=this,ay=aA.getRuntime();if(ax.isDetached()){var aw=new ar;aw.bind("TransportingComplete",function(){az(aw.result.getSource())}),aw.transport(ax.getSource(),ax.type,{ruid:ay.uid})}else{az(ax.getSource())}},loadFromImage:function(aw){var ax=this.getRuntime();return ax.shimExec.call(this,"Image","loadFromImage",aw.uid)},getAsBlob:function(ax,az){var aw=this.getRuntime(),ay=aw.shimExec.call(this,"Image","getAsBlob",ax,az);return ay?new aq(aw.uid,ay):null},getAsDataURL:function(){var ax=this.getRuntime(),ay=ax.Image.getAsBlob.apply(this,arguments),aw;return ay?(aw=new av,aw.readAsDataURL(ay)):null}};return au.Image=at}),ac(m,[E,an,ab,Z,ag],function(au,aq,aw,av,ay){function ax(aI){var aA=!1,aB=null,aJ,aF,aD,aE,az,aC=0;try{try{aB=new ActiveXObject("AgControl.AgControl"),aB.IsVersionSupported(aI)&&(aA=!0),aB=null}catch(aG){var aK=navigator.plugins["Silverlight Plug-In"];if(aK){for(aJ=aK.description,"1.0.30226.2"===aJ&&(aJ="2.0.30226.2"),aF=aJ.split(".");aF.length>3;){aF.pop()}for(;aF.length<4;){aF.push(0)}for(aD=aI.split(".");aD.length>4;){aD.pop()}do{aE=parseInt(aD[aC],10),az=parseInt(aF[aC],10),aC++}while(aC<aD.length&&aE===az);az>=aE&&!isNaN(aE)&&(aA=!0)}}}catch(aH){aA=!1}return aA}function at(aA){var az=this,aB;aA=au.extend({xap_url:aq.xap_url},aA),ay.call(this,aA,ap,{access_binary:ay.capTrue,access_image_binary:ay.capTrue,display_media:ay.capTrue,do_cors:ay.capTrue,drag_and_drop:!1,report_upload_progress:ay.capTrue,resize_image:ay.capTrue,return_response_headers:function(aC){return aC&&"client"===az.mode},return_response_type:function(aC){return"json"!==aC?!0:!!window.JSON},return_status_code:function(aC){return"client"===az.mode||!au.arrayDiff(aC,[200,404])},select_file:ay.capTrue,select_multiple:ay.capTrue,send_binary_string:ay.capTrue,send_browser_cookies:function(aC){return aC&&"browser"===az.mode},send_custom_headers:function(aC){return aC&&"client"===az.mode},send_multipart:ay.capTrue,slice_blob:ay.capTrue,stream_upload:!0,summon_file_dialog:!1,upload_filesize:ay.capTrue,use_http_method:function(aC){return"client"===az.mode||!au.arrayDiff(aC,["GET","POST"])}},{return_response_headers:function(aC){return aC?"client":"browser"},return_status_code:function(aC){return au.arrayDiff(aC,[200,404])?"client":["client","browser"]},send_browser_cookies:function(aC){return aC?"browser":"client"},send_custom_headers:function(aC){return aC?"client":"browser"},use_http_method:function(aC){return au.arrayDiff(aC,["GET","POST"])?"client":["client","browser"]}}),ax("2.0.31005.0")&&"Opera"!==aq.browser||(this.mode=!1),au.extend(this,{getShim:function(){return aw.get(this.uid).content.Moxie},shimExec:function(aE,aC){var aD=[].slice.call(arguments,2);return az.getShim().exec(this.uid,aE,aC,aD)},init:function(){var aC;aC=this.getShimContainer(),aC.innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="'+aA.xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid='+this.uid+",target="+aq.global_event_dispatcher+'"/></object>',aB=setTimeout(function(){az&&!az.initialized&&az.trigger("Error",new av.RuntimeError(av.RuntimeError.NOT_INIT_ERR))},"Windows"!==aq.OS?10000:5000)},destroy:function(aC){return function(){aC.call(az),clearTimeout(aB),aA=aB=aC=az=null}}(this.destroy)},ar)}var ap="silverlight",ar={};return ay.addConstructor(ap,at),ar}),ac(al,[m,a,E],function(at,ap,ar){var aq={init:function(av){function ax(az){for(var aA="",ay=0;ay<az.length;ay++){aA+=(""!==aA?"|":"")+az[ay].title+" | *."+az[ay].extensions.replace(/,/g,";*.")}return aA}var aw=this,au=this.getRuntime();this.bind("Change",function(){var ay=au.shimExec.call(aw,"FileInput","getFiles");aw.files=[],ar.each(ay,function(az){aw.files.push(new ap(au.uid,az))})},999),this.getRuntime().shimExec.call(this,"FileInput","init",ax(av.accept),av.name,av.multiple),this.trigger("ready")}};return at.FileInput=aq}),ac(t,[m,E,s],function(ap,aq,ar){return ap.Blob=aq.extend({},ar)}),ac(x,[m,ab,j],function(at,ap,ar){var aq={init:function(){var au=this,aw=au.getRuntime(),av;return av=aw.getShimContainer(),ar.addEvent(av,"dragover",function(ax){ax.preventDefault(),ax.stopPropagation(),ax.dataTransfer.dropEffect="copy"},au.uid),ar.addEvent(av,"dragenter",function(ay){ay.preventDefault();var ax=ap.get(aw.uid).dragEnter(ay);ax&&ay.stopPropagation()},au.uid),ar.addEvent(av,"drop",function(ay){ay.preventDefault();var ax=ap.get(aw.uid).dragDrop(ay);ax&&ay.stopPropagation()},au.uid),aw.shimExec.call(this,"FileDrop","init")}};return at.FileDrop=aq}),ac(O,[m,E,v],function(ap,aq,ar){return ap.FileReader=aq.extend({},ar)}),ac(J,[m,E,Q],function(ap,aq,ar){return ap.FileReaderSync=aq.extend({},ar)}),ac(M,[m,E,f],function(ap,aq,ar){return ap.XMLHttpRequest=aq.extend({},ar)}),ac(X,[m,E,w],function(ap,aq,ar){return ap.Transporter=aq.extend({},ar)}),ac(R,[m,E,K,g],function(at,ap,ar,aq){return at.Image=ap.extend({},aq,{getInfo:function(){var av=this.getRuntime(),au=["tiff","exif","gps","thumb"],ax={meta:{}},aw=av.shimExec.call(this,"Image","getInfo");return aw.meta&&ap.each(au,function(ay){var aA=aw.meta[ay],aC,aD,aB,az;if(aA&&aA.keys){for(ax.meta[ay]={},aD=0,aB=aA.keys.length;aB>aD;aD++){aC=aA.keys[aD],az=aA[aC],az&&(/^(\d|[1-9]\d+)$/.test(az)?az=parseInt(az,10):/^\d*\.\d+$/.test(az)&&(az=parseFloat(az)),ax.meta[ay][aC]=az)}}}),ax.width=parseInt(aw.width,10),ax.height=parseInt(aw.height,10),ax.size=parseInt(aw.size,10),ax.type=aw.type,ax.name=aw.name,ax}})}),ac(G,[E,Z,ag,an],function(at,av,aq,aw){function au(aA){var ay=this,az=aq.capTest,ax=aq.capTrue;aq.call(this,aA,ar,{access_binary:az(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:!1,display_media:az(ap.Image&&(aw.can("create_canvas")||aw.can("use_data_uri_over32kb"))),do_cors:!1,drag_and_drop:!1,filter_by_extension:az(function(){return"Chrome"===aw.browser&&aw.verComp(aw.version,28,">=")||"IE"===aw.browser&&aw.verComp(aw.version,10,">=")||"Safari"===aw.browser&&aw.verComp(aw.version,7,">=")}()),resize_image:function(){return ap.Image&&ay.can("access_binary")&&aw.can("create_canvas")},report_upload_progress:!1,return_response_headers:!1,return_response_type:function(aB){return"json"===aB&&window.JSON?!0:!!~at.inArray(aB,["text","document",""])},return_status_code:function(aB){return !at.arrayDiff(aB,[200,404])},select_file:function(){return aw.can("use_fileinput")},select_multiple:!1,send_binary_string:!1,send_custom_headers:!1,send_multipart:!0,slice_blob:!1,stream_upload:function(){return ay.can("select_file")},summon_file_dialog:function(){return ay.can("select_file")&&("Firefox"===aw.browser&&aw.verComp(aw.version,4,">=")||"Opera"===aw.browser&&aw.verComp(aw.version,12,">=")||"IE"===aw.browser&&aw.verComp(aw.version,10,">=")||!!~at.inArray(aw.browser,["Chrome","Safari"]))},upload_filesize:ax,use_http_method:function(aB){return !at.arrayDiff(aB,["GET","POST"])}}),at.extend(this,{init:function(){this.trigger("Init")},destroy:function(aB){return function(){aB.call(ay),aB=ay=null}}(this.destroy)}),at.extend(this.getShim(),ap)}var ar="html4",ap={};return aq.addConstructor(ar,au),ap}),ac(P,[G,a,E,ab,j,ao,an],function(at,aw,aq,ax,au,ar,ap){function av(){function aA(){var aC=this,aJ=aC.getRuntime(),aD,aH,aF,aE,aI,aG;aG=aq.guid("uid_"),aD=aJ.getShimContainer(),aB&&(aF=ax.get(aB+"_form"),aF&&aq.extend(aF.style,{top:"100%"})),aE=document.createElement("form"),aE.setAttribute("id",aG+"_form"),aE.setAttribute("method","post"),aE.setAttribute("enctype","multipart/form-data"),aE.setAttribute("encoding","multipart/form-data"),aq.extend(aE.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"}),aI=document.createElement("input"),aI.setAttribute("id",aG),aI.setAttribute("type","file"),aI.setAttribute("name",ay.name||"Filedata"),aI.setAttribute("accept",az.join(",")),aq.extend(aI.style,{fontSize:"999px",opacity:0}),aE.appendChild(aI),aD.appendChild(aE),aq.extend(aI.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),"IE"===ap.browser&&ap.verComp(ap.version,10,"<")&&aq.extend(aI.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"}),aI.onchange=function(){var aK;if(this.value){if(this.files){if(aK=this.files[0],0===aK.size){return void aE.parentNode.removeChild(aE)}}else{aK={name:this.value}}aK=new aw(aJ.uid,aK),this.onchange=function(){},aA.call(aC),aC.files=[aK],aI.setAttribute("id",aK.uid),aE.setAttribute("id",aK.uid+"_form"),aC.trigger("change"),aI=aE=null}},aJ.can("summon_file_dialog")&&(aH=ax.get(ay.browse_button),au.removeEvent(aH,"click",aC.uid),au.addEvent(aH,"click",function(aK){aI&&!aI.disabled&&aI.click(),aK.preventDefault()},aC.uid)),aB=aG,aD=aF=aH=null}var aB,az=[],ay;aq.extend(this,{init:function(aF){var aC=this,aE=aC.getRuntime(),aD;ay=aF,az=aF.accept.mimes||ar.extList2mimes(aF.accept,aE.can("filter_by_extension")),aD=aE.getShimContainer(),function(){var aH,aG,aI;aH=ax.get(aF.browse_button),aE.can("summon_file_dialog")&&("static"===ax.getStyle(aH,"position")&&(aH.style.position="relative"),aG=parseInt(ax.getStyle(aH,"z-index"),10)||1,aH.style.zIndex=aG,aD.style.zIndex=aG-1),aI=aE.can("summon_file_dialog")?aH:aD,au.addEvent(aI,"mouseover",function(){aC.trigger("mouseenter")},aC.uid),au.addEvent(aI,"mouseout",function(){aC.trigger("mouseleave")},aC.uid),au.addEvent(aI,"mousedown",function(){aC.trigger("mousedown")},aC.uid),au.addEvent(ax.get(aF.container),"mouseup",function(){aC.trigger("mouseup")},aC.uid),aH=null}(),aA.call(this),aD=null,aC.trigger({type:"ready",async:!0})},disable:function(aC){var aD;(aD=ax.get(aB))&&(aD.disabled=!!aC)},destroy:function(){var aD=this.getRuntime(),aE=aD.getShim(),aC=aD.getShimContainer();au.removeAllEvents(aC,this.uid),au.removeAllEvents(ay&&ax.get(ay.container),this.uid),au.removeAllEvents(ay&&ax.get(ay.browse_button),this.uid),aC&&(aC.innerHTML=""),aE.removeInstance(this.uid),aB=az=ay=aC=aE=null}})}return at.FileInput=av}),ac(N,[G,b],function(ap,aq){return ap.FileReader=aq}),ac(U,[G,E,ab,I,Z,j,K,e],function(au,aq,aw,av,ay,ax,at,ap){function ar(){function az(aJ){var aF=this,aG,aD,aI,aE,aH=!1;if(aA){if(aG=aA.id.replace(/_iframe$/,""),aD=aw.get(aG+"_form")){for(aI=aD.getElementsByTagName("input"),aE=aI.length;aE--;){switch(aI[aE].getAttribute("type")){case"hidden":aI[aE].parentNode.removeChild(aI[aE]);break;case"file":aH=!0}}aI=[],aH||aD.parentNode.removeChild(aD),aD=null}setTimeout(function(){ax.removeEvent(aA,"load",aF.uid),aA.parentNode&&aA.parentNode.removeChild(aA);var aK=aF.getRuntime().getShimContainer();aK.children.length||aK.parentNode.removeChild(aK),aK=aA=null,aJ()},1)}}var aB,aC,aA;aq.extend(this,{send:function(aK,aE){function aL(){var aM=aF.getShimContainer()||document.body,aN=document.createElement("div");aN.innerHTML='<iframe id="'+aD+'_iframe" name="'+aD+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',aA=aN.firstChild,aM.appendChild(aA),ax.addEvent(aA,"load",function(){var aP;try{aP=aA.contentWindow.document||aA.contentDocument||window.frames[aA.id].document,/^4(0[0-9]|1[0-7]|2[2346])\s/.test(aP.title)?aB=aP.title.replace(/^(\d+).*$/,"$1"):(aB=200,aC=aq.trim(aP.body.innerHTML),aG.trigger({type:"progress",loaded:aC.length,total:aC.length}),aJ&&aG.trigger({type:"uploadprogress",loaded:aJ.size||1025,total:aJ.size||1025}))}catch(aO){if(!av.hasSameOrigin(aK.url)){return void az.call(aG,function(){aG.trigger("error")})}aB=404}az.call(aG,function(){aG.trigger("load")})},aG.uid)}var aG=this,aF=aG.getRuntime(),aD,aH,aI,aJ;if(aB=aC=null,aE instanceof ap&&aE.hasBlob()){if(aJ=aE.getBlob(),aD=aJ.uid,aI=aw.get(aD),aH=aw.get(aD+"_form"),!aH){throw new ay.DOMException(ay.DOMException.NOT_FOUND_ERR)}}else{aD=aq.guid("uid_"),aH=document.createElement("form"),aH.setAttribute("id",aD+"_form"),aH.setAttribute("method",aK.method),aH.setAttribute("enctype","multipart/form-data"),aH.setAttribute("encoding","multipart/form-data"),aF.getShimContainer().appendChild(aH)}aH.setAttribute("target",aD+"_iframe"),aE instanceof ap&&aE.each(function(aN,aM){if(aN instanceof at){aI&&aI.setAttribute("name",aM)}else{var aO=document.createElement("input");aq.extend(aO,{type:"hidden",name:aM,value:aN}),aI?aH.insertBefore(aO,aI):aH.appendChild(aO)}}),aH.setAttribute("action",aK.url),aL(),aH.submit(),aG.trigger("loadstart")},getStatus:function(){return aB},getResponse:function(aE){if("json"===aE&&"string"===aq.typeOf(aC)&&window.JSON){try{return JSON.parse(aC.replace(/^\s*<pre[^>]*>/,"").replace(/<\/pre>\s*$/,""))}catch(aD){return null}}return aC},abort:function(){var aD=this;aA&&aA.contentWindow&&(aA.contentWindow.stop?aA.contentWindow.stop():aA.contentWindow.document.execCommand?aA.contentWindow.document.execCommand("Stop"):aA.src="about:blank"),az.call(this,function(){aD.dispatchEvent("abort")})}})}return au.XMLHttpRequest=ar}),ac(aj,[G,ad],function(ap,aq){return ap.Image=aq}),ak([E,an,af,ao,ab,Z,z,ag,aa,F,H,K,a,ai,am,I,n,S,e,p,o,k,j])}(this);(function(h){var f={},g=h.moxie.core.utils.Basic.inArray;return function e(a){var c,b;for(c in a){b=typeof a[c],b==="object"&&!~g(c,["Exceptions","Env","Mime"])?e(a[c]):b==="function"&&(f[c]=a[c])}}(h.moxie),f.Env=h.moxie.core.utils.Env,f.Mime=h.moxie.core.utils.Mime,f.Exceptions=h.moxie.core.Exceptions,h.mOxie=f,h.o||(h.o=f),f})(this);(function(l,e,j){function n(b){function c(g,q,h){var f={chunks:"slice_blob",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",multi_selection:"select_multiple",dragdrop:"drag_and_drop",drop_element:"drag_and_drop",headers:"send_custom_headers",urlstream_upload:"send_binary_string",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};f[g]?a[f[g]]=q:h||(a[g]=q)}var d=b.required_features,a={};if(typeof d=="string"){k.each(d.split(/\s*,\s*/),function(f){c(f,!0)})}else{if(typeof d=="object"){k.each(d,function(g,f){c(f,g)})}else{if(d===!0){b.chunk_size>0&&(a.slice_blob=!0);if(b.resize.enabled||!b.multipart){a.send_binary_string=!0}k.each(b,function(g,f){c(f,!!g,!0)})}}}return a}var m=l.setTimeout,i={},k={VERSION:"2.1.7",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:e.mimes,ua:e.ua,typeOf:e.typeOf,extend:e.extend,guid:e.guid,get:function(a){var b=[],d;e.typeOf(a)!=="array"&&(a=[a]);var c=a.length;while(c--){d=e.get(a[c]),d&&b.push(d)}return b.length?b:null},each:e.each,getPos:e.getPos,getSize:e.getSize,xmlEncode:function(b){var c={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},a=/[<>&\"\']/g;return b?(""+b).replace(a,function(d){return c[d]?"&"+c[d]+";":d}):b},toArray:e.toArray,inArray:e.inArray,addI18n:e.addI18n,translate:e.translate,isEmptyObj:e.isEmptyObj,hasClass:e.hasClass,addClass:e.addClass,removeClass:e.removeClass,getStyle:e.getStyle,addEvent:e.addEvent,removeEvent:e.removeEvent,removeAllEvents:e.removeAllEvents,cleanName:function(b){var c,a;a=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(c=0;c<a.length;c+=2){b=b.replace(a[c],a[c+1])}return b=b.replace(/\s+/g,"_"),b=b.replace(/[^a-z0-9_\-\.]+/gi,""),b},buildUrl:function(b,c){var a="";return k.each(c,function(d,f){a+=(a?"&":"")+encodeURIComponent(f)+"="+encodeURIComponent(d)}),a&&(b+=(b.indexOf("?")>0?"&":"?")+a),b},formatSize:function(a){function c(d,f){return Math.round(d*Math.pow(10,f))/Math.pow(10,f)}if(a===j||/\D/.test(a)){return k.translate("N/A")}var b=Math.pow(1024,4);return a>b?c(a/b,1)+" "+k.translate("tb"):a>(b/=1024)?c(a/b,1)+" "+k.translate("gb"):a>(b/=1024)?c(a/b,1)+" "+k.translate("mb"):a>1024?Math.round(a/1024)+" "+k.translate("kb"):a+" "+k.translate("b")},parseSize:e.parseSizeStr,predictRuntime:function(b,a){var c,d;return c=new k.Uploader(b),d=e.Runtime.thatCan(c.getOption().required_features,a||b.runtimes),c.destroy(),d},addFileFilter:function(a,b){i[a]=b}};k.addFileFilter("mime_types",function(b,c,a){b.length&&!b.regexp.test(c.name)?(this.trigger("Error",{code:k.FILE_EXTENSION_ERROR,message:k.translate("File extension error."),file:c}),a(!1)):a(!0)}),k.addFileFilter("max_file_size",function(b,d,a){var c;b=k.parseSize(b),d.size!==c&&b&&d.size>b?(this.trigger("Error",{code:k.FILE_SIZE_ERROR,message:k.translate("File size error."),file:d}),a(!1)):a(!0)}),k.addFileFilter("prevent_duplicates",function(b,d,a){if(b){var c=this.files.length;while(c--){if(d.name===this.files[c].name&&d.size===this.files[c].size){this.trigger("Error",{code:k.FILE_DUPLICATE_ERROR,message:k.translate("Duplicate file error."),file:d}),a(!1);return}}}a(!0)}),k.Uploader=function(c){function f(){var q,r=0,o;if(this.state==k.STARTED){for(o=0;o<d.length;o++){!q&&d[o].status==k.QUEUED?(q=d[o],this.trigger("BeforeUpload",q)&&(q.status=k.UPLOADING,this.trigger("UploadFile",q))):r++}r==d.length&&(this.state!==k.STOPPED&&(this.state=k.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",d))}}function L(o){o.percent=o.size>0?Math.ceil(o.loaded/o.size*100):100,ah()}function ah(){var o,q;b.reset();for(o=0;o<d.length;o++){q=d[o],q.size!==j?(b.size+=q.origSize,b.loaded+=q.loaded*q.origSize/q.size):b.size=j,q.status==k.DONE?b.uploaded++:q.status==k.FAILED?b.failed++:b.queued++}b.size===j?b.percent=d.length>0?Math.ceil(b.uploaded/d.length*100):0:(b.bytesPerSec=Math.ceil(b.loaded/((+(new Date)-x||1)/1000)),b.percent=b.size>0?Math.ceil(b.loaded/b.size*100):0)}function w(){var o=a[0]||g[0];return o?o.getRuntime().uid:!1}function C(q,o){if(q.ruid){var r=e.Runtime.getInfo(q.ruid);if(r){return r.can(o)}}return !1}function ad(){this.bind("FilesAdded FilesRemoved",function(o){o.trigger("QueueChanged"),o.refresh()}),this.bind("CancelUpload",T),this.bind("BeforeUpload",y),this.bind("UploadFile",h),this.bind("UploadProgress",M),this.bind("StateChanged",v),this.bind("QueueChanged",ah),this.bind("Error",af),this.bind("FileUploaded",O),this.bind("Destroy",A)}function E(t,r){var z=this,q=0,o=[],s={runtime_order:t.runtimes,required_caps:t.required_features,preferred_caps:p,swf_url:t.flash_swf_url,xap_url:t.silverlight_xap_url};k.each(t.runtimes.split(/\s*,\s*/),function(B){t[B]&&(s[B]=t[B])}),t.browse_button&&k.each(t.browse_button,function(B){o.push(function(F){var G=new e.FileInput(k.extend({},s,{accept:t.filters.mime_types,name:t.file_data_name,multiple:t.multi_selection,container:t.container,browse_button:B}));G.onready=function(){var H=e.Runtime.getInfo(this.ruid);e.extend(z.features,{chunks:H.can("slice_blob"),multipart:H.can("send_multipart"),multi_selection:H.can("select_multiple")}),q++,a.push(this),F()},G.onchange=function(){z.addFile(this.files)},G.bind("mouseenter mouseleave mousedown mouseup",function(H){N||(t.browse_button_hover&&("mouseenter"===H.type?e.addClass(B,t.browse_button_hover):"mouseleave"===H.type&&e.removeClass(B,t.browse_button_hover)),t.browse_button_active&&("mousedown"===H.type?e.addClass(B,t.browse_button_active):"mouseup"===H.type&&e.removeClass(B,t.browse_button_active)))}),G.bind("mousedown",function(){z.trigger("Browse")}),G.bind("error runtimeerror",function(){G=null,F()}),G.init()})}),t.drop_element&&k.each(t.drop_element,function(B){o.push(function(F){var G=new e.FileDrop(k.extend({},s,{drop_zone:B}));G.onready=function(){var H=e.Runtime.getInfo(this.ruid);z.features.dragdrop=H.can("drag_and_drop"),q++,g.push(this),F()},G.ondrop=function(){z.addFile(this.files)},G.bind("error runtimeerror",function(){G=null,F()}),G.init()})}),e.inSeries(o,function(){typeof r=="function"&&r(q)})}function ae(t,o,r){var q=new e.Image;try{q.onload=function(){if(o.width>this.width&&o.height>this.height&&o.quality===j&&o.preserve_headers&&!o.crop){return this.destroy(),r(t)}q.downsize(o.width,o.height,o.crop,o.preserve_headers)},q.onresize=function(){r(this.getAsBlob(t.type,o.quality)),this.destroy()},q.onerror=function(){r(t)},q.load(t)}catch(s){r(t)}}function S(t,r,o){function z(H,G,F){var B=ag[H];switch(H){case"max_file_size":H==="max_file_size"&&(ag.max_file_size=ag.filters.max_file_size=G);break;case"chunk_size":if(G=k.parseSize(G)){ag[H]=G,ag.send_file_name=!0}break;case"multipart":ag[H]=G,G||(ag.send_file_name=!0);break;case"unique_names":ag[H]=G,G&&(ag.send_file_name=!0);break;case"filters":k.typeOf(G)==="array"&&(G={mime_types:G}),F?k.extend(ag.filters,G):ag.filters=G,G.mime_types&&(ag.filters.mime_types.regexp=function(I){var J=[];return k.each(I,function(K){k.each(K.extensions.split(/,/),function(P){/^\s*\*\s*$/.test(P)?J.push("\\.*"):J.push("\\."+P.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+J.join("|")+")$","i")}(ag.filters.mime_types));break;case"resize":F?k.extend(ag.resize,G,{enabled:!0}):ag.resize=G;break;case"prevent_duplicates":ag.prevent_duplicates=ag.filters.prevent_duplicates=!!G;break;case"browse_button":case"drop_element":G=k.get(G);case"container":case"runtimes":case"multi_selection":case"flash_swf_url":case"silverlight_xap_url":ag[H]=G,F||(s=!0);break;default:ag[H]=G}F||q.trigger("OptionChanged",H,G,B)}var q=this,s=!1;typeof t=="object"?k.each(t,function(B,F){z(F,B,o)}):z(t,r,o),o?(ag.required_features=n(k.extend({},ag)),p=n(k.extend({},ag,{required_features:!0}))):s&&(q.trigger("Destroy"),E.call(q,ag,function(B){B?(q.runtime=e.Runtime.getInfo(w()).type,q.trigger("Init",{runtime:q.runtime}),q.trigger("PostInit")):q.trigger("Error",{code:k.INIT_ERROR,message:k.translate("Init error.")})}))}function y(o,r){if(o.settings.unique_names){var s=r.name.match(/\.([^.]+)$/),q="part";s&&(q=s[1]),r.target_name=r.id+"."+q}}function h(F,t){function H(){q-->0?m(z,1000):(t.loaded=G,F.trigger("Error",{code:k.HTTP_ERROR,message:k.translate("HTTP Error."),file:t,response:u.responseText,status:u.status,responseHeaders:u.getAllResponseHeaders()}))}function z(){var I,P,K={},J;if(t.status!==k.UPLOADING||F.state===k.STOPPED){return}F.settings.send_file_name&&(K.name=t.target_name||t.name),o&&r.chunks&&B.size>o?(J=Math.min(o,B.size-G),I=B.slice(G,G+J)):(J=B.size,I=B),o&&r.chunks&&(F.settings.send_chunk_number?(K.chunk=Math.ceil(G/o),K.chunks=Math.ceil(B.size/o)):(K.offset=G,K.total=B.size)),u=new e.XMLHttpRequest,u.upload&&(u.upload.onprogress=function(Q){t.loaded=Math.min(t.size,G+Q.loaded),F.trigger("UploadProgress",t)}),u.onload=function(){if(u.status>=400){H();return}q=F.settings.max_retries,J<B.size?(I.destroy(),G+=J,t.loaded=Math.min(G,B.size),F.trigger("ChunkUploaded",t,{offset:t.loaded,total:B.size,response:u.responseText,status:u.status,responseHeaders:u.getAllResponseHeaders()}),e.Env.browser==="Android Browser"&&F.trigger("UploadProgress",t)):t.loaded=t.size,I=P=null,!G||G>=B.size?(t.size!=t.origSize&&(B.destroy(),B=null),F.trigger("UploadProgress",t),t.status=k.DONE,F.trigger("FileUploaded",t,{response:u.responseText,status:u.status,responseHeaders:u.getAllResponseHeaders()})):m(z,1)},u.onerror=function(){H()},u.onloadend=function(){this.destroy(),u=null},F.settings.multipart&&r.multipart?(u.open("post",s,!0),k.each(F.settings.headers,function(R,Q){u.setRequestHeader(Q,R)}),P=new e.FormData,k.each(k.extend(K,F.settings.multipart_params),function(R,Q){P.append(Q,R)}),P.append(F.settings.file_data_name,I),u.send(P,{runtime_order:F.settings.runtimes,required_caps:F.settings.required_features,preferred_caps:p,swf_url:F.settings.flash_swf_url,xap_url:F.settings.silverlight_xap_url})):(s=k.buildUrl(F.settings.url,k.extend(K,F.settings.multipart_params)),u.open("post",s,!0),u.setRequestHeader("Content-Type","application/octet-stream"),k.each(F.settings.headers,function(R,Q){u.setRequestHeader(Q,R)}),u.send(I,{runtime_order:F.settings.runtimes,required_caps:F.settings.required_features,preferred_caps:p,swf_url:F.settings.flash_swf_url,xap_url:F.settings.silverlight_xap_url}))}var s=F.settings.url,o=F.settings.chunk_size,q=F.settings.max_retries,r=F.features,G=0,B;t.loaded&&(G=t.loaded=o?o*Math.floor(t.loaded/o):0),B=t.getSource(),F.settings.resize.enabled&&C(B,"send_binary_string")&&!!~e.inArray(B.type,["image/jpeg","image/png"])?ae.call(this,B,F.settings.resize,function(I){B=I,t.size=I.size,z()}):z()}function M(o,q){L(q)}function v(o){if(o.state==k.STARTED){x=+(new Date)}else{if(o.state==k.STOPPED){for(var q=o.files.length-1;q>=0;q--){o.files[q].status==k.UPLOADING&&(o.files[q].status=k.QUEUED,ah())}}}}function T(){u&&u.abort()}function O(o){ah(),m(function(){f.call(o)},1)}function af(o,q){q.code===k.INIT_ERROR?o.destroy():q.code===k.HTTP_ERROR&&(q.file.status=k.FAILED,L(q.file),o.state==k.STARTED&&(o.trigger("CancelUpload"),m(function(){f.call(o)},1)))}function A(o){o.stop(),k.each(d,function(q){q.destroy()}),d=[],a.length&&(k.each(a,function(q){q.destroy()}),a=[]),g.length&&(k.each(g,function(q){q.destroy()}),g=[]),p={},N=!1,x=u=null,b.reset()}var D=k.guid(),ag,d=[],p={},a=[],g=[],x,b,N=!1,u;ag={runtimes:e.Runtime.order,max_retries:0,chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",flash_swf_url:"js/Moxie.swf",silverlight_xap_url:"js/Moxie.xap",filters:{mime_types:[],prevent_duplicates:!1,max_file_size:0},resize:{enabled:!1,preserve_headers:!0,crop:!1},send_file_name:!0,send_chunk_number:!0},S.call(this,c,null,!0),b=new k.QueueProgress,k.extend(this,{id:D,uid:D,state:k.STOPPED,features:{},runtime:null,files:d,settings:ag,total:b,init:function(){var o=this;typeof ag.preinit=="function"?ag.preinit(o):k.each(ag.preinit,function(r,q){o.bind(q,r)}),ad.call(this);if(!ag.browse_button||!ag.url){this.trigger("Error",{code:k.INIT_ERROR,message:k.translate("Init error.")});return}E.call(this,ag,function(q){typeof ag.init=="function"?ag.init(o):k.each(ag.init,function(s,r){o.bind(r,s)}),q?(o.runtime=e.Runtime.getInfo(w()).type,o.trigger("Init",{runtime:o.runtime}),o.trigger("PostInit")):o.trigger("Error",{code:k.INIT_ERROR,message:k.translate("Init error.")})})},setOption:function(o,q){S.call(this,o,q,!this.runtime)},getOption:function(o){return o?ag[o]:ag},refresh:function(){a.length&&k.each(a,function(o){o.trigger("Refresh")}),this.trigger("Refresh")},start:function(){this.state!=k.STARTED&&(this.state=k.STARTED,this.trigger("StateChanged"),f.call(this))},stop:function(){this.state!=k.STOPPED&&(this.state=k.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))},disableBrowse:function(){N=arguments[0]!==j?arguments[0]:!0,a.length&&k.each(a,function(o){o.disable(N)}),this.trigger("DisableBrowse",N)},getFile:function(o){var q;for(q=d.length-1;q>=0;q--){if(d[q].id===o){return d[q]}}},addFile:function(r,q){function F(H,I){var G=[];e.each(z.settings.filters,function(K,J){i[J]&&G.push(function(P){i[J].call(z,K,H,function(Q){P(!Q)})})}),e.inSeries(G,I)}function s(H){var G=e.typeOf(H);if(H instanceof e.File){if(!H.ruid&&!H.isDetached()){if(!t){return !1}H.ruid=t,H.connectRuntime(t)}s(new k.File(H))}else{H instanceof e.Blob?(s(H.getSource()),H.destroy()):H instanceof k.File?(q&&(H.name=q),B.push(function(I){F(H,function(J){J||(d.push(H),o.push(H),z.trigger("FileFiltered",H)),m(I,1)})})):e.inArray(G,["file","blob"])!==-1?s(new e.File(null,H)):G==="node"&&e.typeOf(H.files)==="filelist"?e.each(H.files,s):G==="array"&&(q=null,e.each(H,s))}}var z=this,B=[],o=[],t;t=w(),s(r),B.length&&e.inSeries(B,function(){o.length&&z.trigger("FilesAdded",o)})},removeFile:function(q){var r=typeof q=="string"?q:q.id;for(var o=d.length-1;o>=0;o--){if(d[o].id===r){return this.splice(o,1)[0]}}},splice:function(s,q){var o=d.splice(s===j?0:s,q===j?d.length:q),r=!1;return this.state==k.STARTED&&(k.each(o,function(t){if(t.status===k.UPLOADING){return r=!0,!1}}),r&&this.stop()),this.trigger("FilesRemoved",o),k.each(o,function(t){t.destroy()}),r&&this.start(),o},bind:function(o,r,s){var q=this;k.Uploader.prototype.bind.call(this,o,function(){var t=[].slice.call(arguments);return t.splice(0,1,q),r.apply(this,t)},0,s)},destroy:function(){this.trigger("Destroy"),ag=b=null,this.unbindAll()}})},k.Uploader.prototype=e.EventTarget.instance,k.File=function(){function a(c){k.extend(this,{id:k.guid(),name:c.name||c.fileName,type:c.type||"",size:c.size||c.fileSize,origSize:c.size||c.fileSize,loaded:0,percent:0,status:k.QUEUED,lastModifiedDate:c.lastModifiedDate||(new Date).toLocaleString(),getNative:function(){var d=this.getSource().getSource();return e.inArray(e.typeOf(d),["blob","file"])!==-1?d:null},getSource:function(){return b[this.id]?b[this.id]:null},destroy:function(){var d=this.getSource();d&&(d.destroy(),delete b[this.id])}}),b[this.id]=c}var b={};return a}(),k.QueueProgress=function(){var a=this;a.size=0,a.loaded=0,a.uploaded=0,a.failed=0,a.queued=0,a.percent=0,a.bytesPerSec=0,a.reset=function(){a.size=a.loaded=a.uploaded=a.failed=a.queued=a.percent=a.bytesPerSec=0}},l.plupload=k})(window,mOxie);