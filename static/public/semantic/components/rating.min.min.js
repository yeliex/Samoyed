/*!
 * # Semantic UI x.x - Rating
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Copyright 2015 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;!function(c,d,b,a){c.fn.rating=function(g){var m,j=c(this),f=j.selector||"",e=(new Date).getTime(),p=[],h=arguments[0],i="string"==typeof h,k=[].slice.call(arguments,1);return j.each(function(){var s,o=c.isPlainObject(g)?c.extend(!0,{},c.fn.rating.settings,g):c.extend({},c.fn.rating.settings),u=o.namespace,t=o.className,B=o.metadata,n=o.selector,z=(o.error,"."+u),r="module-"+u,w=this,A=c(this).data(r),q=c(this),l=q.find(n.icon);s={initialize:function(){s.verbose("Initializing rating module",o),0===l.length&&s.setup.layout(),o.interactive?s.enable():s.disable(),s.set.rating(s.get.initialRating()),s.instantiate()},instantiate:function(){s.verbose("Instantiating module",o),A=s,q.data(r,s)},destroy:function(){s.verbose("Destroying previous instance",A),s.remove.events(),q.removeData(r)},refresh:function(){l=q.find(n.icon)},setup:{layout:function(){var x=s.get.maxRating(),v=c.fn.rating.settings.templates.icon(x);s.debug("Generating icon html dynamically"),q.html(v),s.refresh()}},event:{mouseenter:function(){var v=c(this);v.nextAll().removeClass(t.selected),q.addClass(t.selected),v.addClass(t.selected).prevAll().addClass(t.selected)},mouseleave:function(){q.removeClass(t.selected),l.removeClass(t.selected)},click:function(){var C=c(this),y=s.get.rating(),x=l.index(C)+1,v="auto"==o.clearable?1===l.length:o.clearable;v&&y==x?s.clearRating():s.set.rating(x)}},clearRating:function(){s.debug("Clearing current rating"),s.set.rating(0)},bind:{events:function(){s.verbose("Binding events"),q.on("mouseenter"+z,n.icon,s.event.mouseenter).on("mouseleave"+z,n.icon,s.event.mouseleave).on("click"+z,n.icon,s.event.click)}},remove:{events:function(){s.verbose("Removing events"),q.off(z)}},enable:function(){s.debug("Setting rating to interactive mode"),s.bind.events(),q.removeClass(t.disabled)},disable:function(){s.debug("Setting rating to read-only mode"),s.remove.events(),q.addClass(t.disabled)},get:{initialRating:function(){return q.data(B.rating)!==a?(q.removeData(B.rating),q.data(B.rating)):o.initialRating},maxRating:function(){return q.data(B.maxRating)!==a?(q.removeData(B.maxRating),q.data(B.maxRating)):o.maxRating},rating:function(){var v=l.filter("."+t.active).length;return s.verbose("Current rating retrieved",v),v}},set:{rating:function(x){var y=x-1>=0?x-1:0,v=l.eq(y);q.removeClass(t.selected),l.removeClass(t.selected).removeClass(t.active),x>0&&(s.verbose("Setting current rating to",x),v.prevAll().andSelf().addClass(t.active)),o.onRate.call(w,x)}},setting:function(x,v){if(s.debug("Changing setting",x,v),c.isPlainObject(x)){c.extend(!0,o,x)}else{if(v===a){return o[x]}o[x]=v}},internal:function(x,v){if(c.isPlainObject(x)){c.extend(!0,s,x)}else{if(v===a){return s[x]}s[x]=v}},debug:function(){o.debug&&(o.performance?s.performance.log(arguments):(s.debug=Function.prototype.bind.call(console.info,console,o.name+":"),s.debug.apply(console,arguments)))},verbose:function(){o.verbose&&o.debug&&(o.performance?s.performance.log(arguments):(s.verbose=Function.prototype.bind.call(console.info,console,o.name+":"),s.verbose.apply(console,arguments)))},error:function(){s.error=Function.prototype.bind.call(console.error,console,o.name+":"),s.error.apply(console,arguments)},performance:{log:function(y){var C,x,v;o.performance&&(C=(new Date).getTime(),v=e||C,x=C-v,e=C,p.push({Name:y[0],Arguments:[].slice.call(y,1)||"",Element:w,"Execution Time":x})),clearTimeout(s.performance.timer),s.performance.timer=setTimeout(s.performance.display,500)},display:function(){var x=o.name+":",v=0;e=!1,clearTimeout(s.performance.timer),c.each(p,function(y,C){v+=C["Execution Time"]}),x+=" "+v+"ms",f&&(x+=" '"+f+"'"),j.length>1&&(x+=" ("+j.length+")"),(console.group!==a||console.table!==a)&&p.length>0&&(console.groupCollapsed(x),console.table?console.table(p):c.each(p,function(y,C){console.log(C.Name+": "+C["Execution Time"]+"ms")}),console.groupEnd()),p=[]}},invoke:function(F,x,D){var C,y,v,E=A;return x=x||k,D=w||D,"string"==typeof F&&E!==a&&(F=F.split(/[\. ]/),C=F.length-1,c.each(F,function(H,G){var I=H!=C?G+F[H+1].charAt(0).toUpperCase()+F[H+1].slice(1):F;if(c.isPlainObject(E[I])&&H!=C){E=E[I]}else{if(E[I]!==a){return y=E[I],!1}if(!c.isPlainObject(E[G])||H==C){return E[G]!==a?(y=E[G],!1):!1}E=E[G]}})),c.isFunction(y)?v=y.apply(D,x):y!==a&&(v=y),c.isArray(m)?m.push(v):m!==a?m=[m,v]:v!==a&&(m=v),y}},i?(A===a&&s.initialize(),s.invoke(h)):(A!==a&&A.invoke("destroy"),s.initialize())}),m!==a?m:this},c.fn.rating.settings={name:"Rating",namespace:"rating",debug:!1,verbose:!1,performance:!0,initialRating:0,interactive:!0,maxRating:4,clearable:"auto",onRate:function(f){},error:{method:"The method you called is not defined",noMaximum:"No maximum rating specified. Cannot generate HTML automatically"},metadata:{rating:"rating",maxRating:"maxRating"},className:{active:"active",disabled:"disabled",selected:"selected",loading:"loading"},selector:{icon:".icon"},templates:{icon:function(g){for(var h=1,f="";g>=h;){f+='<i class="icon"></i>',h++}return f}}}}(jQuery,window,document);