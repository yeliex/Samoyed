/*!
 * # Semantic UI x.x - Sidebar
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Copyright 2015 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;(function(h,e,f,g){h.fn.sidebar=function(a){var c=h(this),A=h(e),x=h(f),w=h("html"),v=h("head"),t=c.selector||"",z=new Date().getTime(),d=[],s=arguments[0],B=(typeof s=="string"),b=[].slice.call(arguments,1),u=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame||function(i){setTimeout(i,0)},y;c.each(function(){var j=(h.isPlainObject(a))?h.extend(true,{},h.fn.sidebar.settings,a):h.extend({},h.fn.sidebar.settings),m=j.selector,r=j.className,W=j.namespace,l=j.regExp,q=j.error,N="."+W,V="module-"+W,n=h(this),S=h(j.context),Q=n.children(m.sidebar),k=S.children(m.fixed),o=S.children(m.pusher),X,O=this,i=n.data(V),p,U,P,R,T;T={initialize:function(){T.debug("Initializing sidebar",a);T.create.id();R=T.get.transitionEvent();if(T.is.ios()){T.set.ios()}if(j.delaySetup){u(T.setup.layout)}else{T.setup.layout()}u(function(){T.setup.cache()});T.instantiate()},instantiate:function(){T.verbose("Storing instance of module",T);i=T;n.data(V,T)},create:{id:function(){U=(Math.random().toString(16)+"000000000").substr(2,8);p="."+U;T.verbose("Creating unique id for element",U)}},destroy:function(){T.verbose("Destroying previous module for",n);T.remove.direction();n.off(N).removeData(V);if(T.is.ios()){T.remove.ios()}S.off(p);A.off(p);x.off(p)},event:{clickaway:function(C){var E=(o.find(C.target).length>0||o.is(C.target)),D=(S.is(C.target));if(E){T.verbose("User clicked on dimmed page");T.hide()}if(D){T.verbose("User clicked on dimmable context (scaled out page)");T.hide()}},touch:function(C){},containScroll:function(C){if(O.scrollTop<=0){O.scrollTop=1}if((O.scrollTop+O.offsetHeight)>=O.scrollHeight){O.scrollTop=O.scrollHeight-O.offsetHeight-1}},scroll:function(C){if(h(C.target).closest(m.sidebar).length===0){C.preventDefault()}}},bind:{clickaway:function(){T.verbose("Adding clickaway events to context",S);if(j.closable){S.on("click"+p,T.event.clickaway).on("touchend"+p,T.event.clickaway)}},scrollLock:function(){if(j.scrollLock){T.debug("Disabling page scroll");A.on("DOMMouseScroll"+p,T.event.scroll)}T.verbose("Adding events to contain sidebar scroll");x.on("touchmove"+p,T.event.touch);n.on("scroll"+N,T.event.containScroll)}},unbind:{clickaway:function(){T.verbose("Removing clickaway events from context",S);S.off(p)},scrollLock:function(){T.verbose("Removing scroll lock from page");x.off(p);A.off(p);n.off("scroll"+N)}},add:{inlineCSS:function(){var E=T.cache.width||n.outerWidth(),H=T.cache.height||n.outerHeight(),G=T.is.rtl(),D=T.get.direction(),C={left:E,right:-E,top:H,bottom:-H},F;if(G){T.verbose("RTL detected, flipping widths");C.left=-E;C.right=E}F="<style>";if(D==="left"||D==="right"){T.debug("Adding CSS rules for animation distance",E);F+=" .ui.visible."+D+".sidebar ~ .fixed, .ui.visible."+D+".sidebar ~ .pusher {   -webkit-transform: translate3d("+C[D]+"px, 0, 0);           transform: translate3d("+C[D]+"px, 0, 0); }"}else{if(D==="top"||D=="bottom"){F+=" .ui.visible."+D+".sidebar ~ .fixed, .ui.visible."+D+".sidebar ~ .pusher {   -webkit-transform: translate3d(0, "+C[D]+"px, 0);           transform: translate3d(0, "+C[D]+"px, 0); }"}}if(T.is.ie()){if(D==="left"||D==="right"){T.debug("Adding CSS rules for animation distance",E);F+=" body.pushable > .ui.visible."+D+".sidebar ~ .pusher:after {   -webkit-transform: translate3d("+C[D]+"px, 0, 0);           transform: translate3d("+C[D]+"px, 0, 0); }"}else{if(D==="top"||D=="bottom"){F+=" body.pushable > .ui.visible."+D+".sidebar ~ .pusher:after {   -webkit-transform: translate3d(0, "+C[D]+"px, 0);           transform: translate3d(0, "+C[D]+"px, 0); }"}}F+=" body.pushable > .ui.visible.left.sidebar ~ .ui.visible.right.sidebar ~ .pusher:after, body.pushable > .ui.visible.right.sidebar ~ .ui.visible.left.sidebar ~ .pusher:after {   -webkit-transform: translate3d(0px, 0, 0);           transform: translate3d(0px, 0, 0); }"}F+="</style>";X=h(F).appendTo(v);T.debug("Adding sizing css to head",X)}},refresh:function(){T.verbose("Refreshing selector cache");S=h(j.context);Q=S.children(m.sidebar);o=S.children(m.pusher);k=S.children(m.fixed);T.clear.cache()},refreshSidebars:function(){T.verbose("Refreshing other sidebars");Q=S.children(m.sidebar)},repaint:function(){T.verbose("Forcing repaint event");O.style.display="none";var C=O.offsetHeight;O.scrollTop=O.scrollTop;O.style.display=""},setup:{cache:function(){T.cache={width:n.outerWidth(),height:n.outerHeight(),rtl:(n.css("direction")=="rtl")}},layout:function(){if(S.children(m.pusher).length===0){T.debug("Adding wrapper element for sidebar");T.error(q.pusher);o=h('<div class="pusher" />');S.children().not(m.omitted).not(Q).wrapAll(o);T.refresh()}if(n.nextAll(m.pusher).length===0||n.nextAll(m.pusher)[0]!==o[0]){T.debug("Moved sidebar to correct parent element");T.error(q.movedSidebar,O);n.detach().prependTo(S);T.refresh()}T.clear.cache();T.set.pushable();T.set.direction()}},attachEvents:function(E,C){var D=h(E);C=h.isFunction(T[C])?T[C]:T.toggle;if(D.length>0){T.debug("Attaching sidebar events to element",E,C);D.on("click"+N,C)}else{T.error(q.notFound,E)}},show:function(C){C=h.isFunction(C)?C:function(){};if(T.is.hidden()){T.refreshSidebars();if(j.overlay){T.error(q.overlay);j.transition="overlay"}T.refresh();if(T.othersActive()){T.debug("Other sidebars currently visible");if(j.exclusive){if(j.transition!="overlay"){T.hideOthers(T.show);return}else{T.hideOthers()}}else{j.transition="overlay"}}T.pushPage(function(){C.call(O);j.onShow.call(O)});j.onChange.call(O);j.onVisible.call(O)}else{T.debug("Sidebar is already visible")}},hide:function(C){C=h.isFunction(C)?C:function(){};if(T.is.visible()||T.is.animating()){T.debug("Hiding sidebar",C);T.refreshSidebars();T.pullPage(function(){C.call(O);j.onHidden.call(O)});j.onChange.call(O);j.onHide.call(O)}},othersAnimating:function(){return(Q.not(n).filter("."+r.animating).length>0)},othersVisible:function(){return(Q.not(n).filter("."+r.visible).length>0)},othersActive:function(){return(T.othersVisible()||T.othersAnimating())},hideOthers:function(C){var E=Q.not(n).filter("."+r.visible),D=E.length,F=0;C=C||function(){};E.sidebar("hide",function(){F++;if(F==D){C()}})},toggle:function(){T.verbose("Determining toggled direction");if(T.is.hidden()){T.show()}else{T.hide()}},pushPage:function(C){var D=T.get.transition(),E=(D==="overlay"||T.othersActive())?n:o,G,F,H;C=h.isFunction(C)?C:function(){};if(j.transition=="scale down"){T.scrollToTop()}T.set.transition(D);T.repaint();G=function(){T.bind.clickaway();T.add.inlineCSS();T.set.animating();T.set.visible()};F=function(){T.set.dimmed()};H=function(I){if(I.target==E[0]){E.off(R+p,H);T.remove.animating();T.bind.scrollLock();C.call(O)}};E.off(R+p);E.on(R+p,H);u(G);if(j.dimPage&&!T.othersVisible()){u(F)}},pullPage:function(C){var D=T.get.transition(),E=(D=="overlay"||T.othersActive())?n:o,F,G;C=h.isFunction(C)?C:function(){};T.verbose("Removing context push state",T.get.direction());T.unbind.clickaway();T.unbind.scrollLock();F=function(){T.set.transition(D);T.set.animating();T.remove.visible();if(j.dimPage&&!T.othersVisible()){o.removeClass(r.dimmed)}};G=function(H){if(H.target==E[0]){E.off(R+p,G);T.remove.animating();T.remove.transition();T.remove.inlineCSS();if(D=="scale down"||(j.returnScroll&&T.is.mobile())){T.scrollBack()}C.call(O)}};E.off(R+p);E.on(R+p,G);u(F)},scrollToTop:function(){T.verbose("Scrolling to top of page to avoid animation issues");P=h(e).scrollTop();n.scrollTop(0);e.scrollTo(0,0)},scrollBack:function(){T.verbose("Scrolling back to original page position");e.scrollTo(0,P)},clear:{cache:function(){T.verbose("Clearing cached dimensions");T.cache={}}},set:{ios:function(){w.addClass(r.ios)},pushed:function(){S.addClass(r.pushed)},pushable:function(){S.addClass(r.pushable)},dimmed:function(){o.addClass(r.dimmed)},active:function(){n.addClass(r.active)},animating:function(){n.addClass(r.animating)},transition:function(C){C=C||T.get.transition();n.addClass(C)},direction:function(C){C=C||T.get.direction();n.addClass(r[C])},visible:function(){n.addClass(r.visible)},overlay:function(){n.addClass(r.overlay)}},remove:{inlineCSS:function(){T.debug("Removing inline css styles",X);if(X&&X.length>0){X.remove()}},ios:function(){w.removeClass(r.ios)},pushed:function(){S.removeClass(r.pushed)},pushable:function(){S.removeClass(r.pushable)},active:function(){n.removeClass(r.active)},animating:function(){n.removeClass(r.animating)},transition:function(C){C=C||T.get.transition();n.removeClass(C)},direction:function(C){C=C||T.get.direction();n.removeClass(r[C])},visible:function(){n.removeClass(r.visible)},overlay:function(){n.removeClass(r.overlay)}},get:{direction:function(){if(n.hasClass(r.top)){return r.top}else{if(n.hasClass(r.right)){return r.right}else{if(n.hasClass(r.bottom)){return r.bottom}}}return r.left},transition:function(){var D=T.get.direction(),C;C=(T.is.mobile())?(j.mobileTransition=="auto")?j.defaultTransition.mobile[D]:j.mobileTransition:(j.transition=="auto")?j.defaultTransition.computer[D]:j.transition;T.verbose("Determined transition",C);return C},transitionEvent:function(){var E=f.createElement("element"),D={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},C;for(C in D){if(E.style[C]!==g){return D[C]}}}},is:{ie:function(){var C=(!(e.ActiveXObject)&&"ActiveXObject" in e),D=("ActiveXObject" in e);return(C||D)},ios:function(){var C=navigator.userAgent,D=C.match(l.ios),E=C.match(l.mobileChrome);if(D&&!E){T.verbose("Browser was found to be iOS",C);return true}else{return false}},mobile:function(){var C=navigator.userAgent,D=C.match(l.mobile);if(D){T.verbose("Browser was found to be mobile",C);return true}else{T.verbose("Browser is not mobile, using regular transition",C);return false}},hidden:function(){return !T.is.visible()},visible:function(){return n.hasClass(r.visible)},open:function(){return T.is.visible()},closed:function(){return T.is.hidden()},vertical:function(){return n.hasClass(r.top)},animating:function(){return S.hasClass(r.animating)},rtl:function(){if(T.cache.rtl===g){T.cache.rtl=(n.css("direction")=="rtl")}return T.cache.rtl}},setting:function(D,C){T.debug("Changing setting",D,C);if(h.isPlainObject(D)){h.extend(true,j,D)}else{if(C!==g){j[D]=C}else{return j[D]}}},internal:function(D,C){if(h.isPlainObject(D)){h.extend(true,T,D)}else{if(C!==g){T[D]=C}else{return T[D]}}},debug:function(){if(j.debug){if(j.performance){T.performance.log(arguments)}else{T.debug=Function.prototype.bind.call(console.info,console,j.name+":");T.debug.apply(console,arguments)}}},verbose:function(){if(j.verbose&&j.debug){if(j.performance){T.performance.log(arguments)}else{T.verbose=Function.prototype.bind.call(console.info,console,j.name+":");T.verbose.apply(console,arguments)}}},error:function(){T.error=Function.prototype.bind.call(console.error,console,j.name+":");T.error.apply(console,arguments)},performance:{log:function(D){var E,C,F;if(j.performance){E=new Date().getTime();F=z||E;C=E-F;z=E;d.push({Name:D[0],Arguments:[].slice.call(D,1)||"",Element:O,"Execution Time":C})}clearTimeout(T.performance.timer);T.performance.timer=setTimeout(T.performance.display,500)},display:function(){var C=j.name+":",D=0;z=false;clearTimeout(T.performance.timer);h.each(d,function(F,E){D+=E["Execution Time"]});C+=" "+D+"ms";if(t){C+=" '"+t+"'"}if((console.group!==g||console.table!==g)&&d.length>0){console.groupCollapsed(C);if(console.table){console.table(d)}else{h.each(d,function(F,E){console.log(E.Name+": "+E["Execution Time"]+"ms")})}console.groupEnd()}d=[]}},invoke:function(D,H,F){var G=i,C,E,I;H=H||b;F=O||F;if(typeof D=="string"&&G!==g){D=D.split(/[\. ]/);C=D.length-1;h.each(D,function(J,K){var L=(J!=C)?K+D[J+1].charAt(0).toUpperCase()+D[J+1].slice(1):D;if(h.isPlainObject(G[L])&&(J!=C)){G=G[L]}else{if(G[L]!==g){E=G[L];return false}else{if(h.isPlainObject(G[K])&&(J!=C)){G=G[K]}else{if(G[K]!==g){E=G[K];return false}else{T.error(q.method,D);return false}}}}})}if(h.isFunction(E)){I=E.apply(F,H)}else{if(E!==g){I=E}}if(h.isArray(y)){y.push(I)}else{if(y!==g){y=[y,I]}else{if(I!==g){y=I}}}return E}};if(B){if(i===g){T.initialize()}T.invoke(s)}else{if(i!==g){T.invoke("destroy")}T.initialize()}});return(y!==g)?y:this};h.fn.sidebar.settings={name:"Sidebar",namespace:"sidebar",debug:false,verbose:false,performance:true,transition:"auto",mobileTransition:"auto",defaultTransition:{computer:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"},mobile:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"}},context:"body",exclusive:false,closable:true,dimPage:true,scrollLock:false,returnScroll:false,delaySetup:false,duration:500,onChange:function(){},onShow:function(){},onHide:function(){},onHidden:function(){},onVisible:function(){},className:{active:"active",animating:"animating",dimmed:"dimmed",ios:"ios",pushable:"pushable",pushed:"pushed",right:"right",top:"top",left:"left",bottom:"bottom",visible:"visible"},selector:{fixed:".fixed",omitted:"script, link, style, .ui.modal, .ui.dimmer, .ui.nag, .ui.fixed",pusher:".pusher",sidebar:".ui.sidebar"},regExp:{ios:/(iPad|iPhone|iPod)/g,mobileChrome:/(CriOS)/g,mobile:/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/g},error:{method:"The method you called is not defined.",pusher:"Had to add pusher element. For optimal performance make sure body content is inside a pusher element",movedSidebar:"Had to move sidebar. For optimal performance make sure sidebar and pusher are direct children of your body tag",overlay:"The overlay setting is no longer supported, use animation: overlay",notFound:"There were no elements that matched the specified selector"}}})(jQuery,window,document);