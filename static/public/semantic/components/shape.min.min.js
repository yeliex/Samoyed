/*!
 * # Semantic UI x.x - Shape
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Copyright 2015 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;(function(h,e,f,g){h.fn.shape=function(a){var c=h(this),q=h("body"),s=new Date().getTime(),d=[],o=arguments[0],t=(typeof o=="string"),b=[].slice.call(arguments,1),p=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame||function(i){setTimeout(i,0)},r;c.each(function(){var I=c.selector||"",l=(h.isPlainObject(a))?h.extend(true,{},h.fn.shape.settings,a):h.extend({},h.fn.shape.settings),j=l.namespace,P=l.selector,G=l.error,H=l.className,O="."+j,K="module-"+j,k=h(this),n=k.find(P.sides),J=k.find(P.side),L=false,m,N,M=this,i=k.data(K),F;F={initialize:function(){F.verbose("Initializing module for",M);F.set.defaultSide();F.instantiate()},instantiate:function(){F.verbose("Storing instance of module",F);i=F;k.data(K,i)},destroy:function(){F.verbose("Destroying previous module for",M);k.removeData(K).off(O)},refresh:function(){F.verbose("Refreshing selector cache for",M);k=h(M);n=h(this).find(P.shape);J=h(this).find(P.side)},repaint:function(){F.verbose("Forcing repaint event");var u=n[0]||f.createElement("div"),v=u.offsetWidth},animate:function(v,u){F.verbose("Animating box with properties",v);u=u||function(w){F.verbose("Executing animation callback");if(w!==g){w.stopPropagation()}F.reset();F.set.active()};l.beforeChange.call(N[0]);if(F.get.transitionEvent()){F.verbose("Starting CSS animation");k.addClass(H.animating);n.css(v).one(F.get.transitionEvent(),u);F.set.duration(l.duration);p(function(){k.addClass(H.animating);m.addClass(H.hidden)})}else{u()}},queue:function(u){F.debug("Queueing animation of",u);n.one(F.get.transitionEvent(),function(){F.debug("Executing queued animation");setTimeout(function(){k.shape(u)},0)})},reset:function(){F.verbose("Animating states reset");k.removeClass(H.animating).attr("style","").removeAttr("style");n.attr("style","").removeAttr("style");J.attr("style","").removeAttr("style").removeClass(H.hidden);N.removeClass(H.animating).attr("style","").removeAttr("style")},is:{complete:function(){return(J.filter("."+H.active)[0]==N[0])},animating:function(){return k.hasClass(H.animating)}},set:{defaultSide:function(){m=k.find("."+l.className.active);N=(m.next(P.side).length>0)?m.next(P.side):k.find(P.side).first();L=false;F.verbose("Active side set to",m);F.verbose("Next side set to",N)},duration:function(u){u=u||l.duration;u=(typeof u=="number")?u+"ms":u;F.verbose("Setting animation duration",u);if(l.duration||l.duration===0){n.add(J).css({"-webkit-transition-duration":u,"-moz-transition-duration":u,"-ms-transition-duration":u,"-o-transition-duration":u,"transition-duration":u})}},currentStageSize:function(){var u=k.find("."+l.className.active),v=u.outerWidth(true),w=u.outerHeight(true);k.css({width:v,height:w})},stageSize:function(){var u=k.clone().addClass(H.loading),w=u.find("."+l.className.active),v=(L)?u.find(P.side).eq(L):(w.next(P.side).length>0)?w.next(P.side):u.find(P.side).first(),x={};F.set.currentStageSize();w.removeClass(H.active);v.addClass(H.active);u.insertAfter(k);x={width:v.outerWidth(true),height:v.outerHeight(true)};u.remove();k.css(x);F.verbose("Resizing stage to fit new content",x)},nextSide:function(u){L=u;N=J.filter(u);L=J.index(N);if(N.length===0){F.set.defaultSide();F.error(G.side)}F.verbose("Next side manually set to",N)},active:function(){F.verbose("Setting new side to active",N);J.removeClass(H.active);N.addClass(H.active);l.onChange.call(N[0]);F.set.defaultSide()}},flip:{up:function(){if(F.is.complete()&&!F.is.animating()&&!l.allowRepeats){F.debug("Side already visible",N);return}if(!F.is.animating()){F.debug("Flipping up",N);F.set.stageSize();F.stage.above();F.animate(F.get.transform.up())}else{F.queue("flip up")}},down:function(){if(F.is.complete()&&!F.is.animating()&&!l.allowRepeats){F.debug("Side already visible",N);return}if(!F.is.animating()){F.debug("Flipping down",N);F.set.stageSize();F.stage.below();F.animate(F.get.transform.down())}else{F.queue("flip down")}},left:function(){if(F.is.complete()&&!F.is.animating()&&!l.allowRepeats){F.debug("Side already visible",N);return}if(!F.is.animating()){F.debug("Flipping left",N);F.set.stageSize();F.stage.left();F.animate(F.get.transform.left())}else{F.queue("flip left")}},right:function(){if(F.is.complete()&&!F.is.animating()&&!l.allowRepeats){F.debug("Side already visible",N);return}if(!F.is.animating()){F.debug("Flipping right",N);F.set.stageSize();F.stage.right();F.animate(F.get.transform.right())}else{F.queue("flip right")}},over:function(){if(F.is.complete()&&!F.is.animating()&&!l.allowRepeats){F.debug("Side already visible",N);return}if(!F.is.animating()){F.debug("Flipping over",N);F.set.stageSize();F.stage.behind();F.animate(F.get.transform.over())}else{F.queue("flip over")}},back:function(){if(F.is.complete()&&!F.is.animating()&&!l.allowRepeats){F.debug("Side already visible",N);return}if(!F.is.animating()){F.debug("Flipping back",N);F.set.stageSize();F.stage.behind();F.animate(F.get.transform.back())}else{F.queue("flip back")}}},get:{transform:{up:function(){var u={y:-((m.outerHeight(true)-N.outerHeight(true))/2),z:-(m.outerHeight(true)/2)};return{transform:"translateY("+u.y+"px) translateZ("+u.z+"px) rotateX(-90deg)"}},down:function(){var u={y:-((m.outerHeight(true)-N.outerHeight(true))/2),z:-(m.outerHeight(true)/2)};return{transform:"translateY("+u.y+"px) translateZ("+u.z+"px) rotateX(90deg)"}},left:function(){var u={x:-((m.outerWidth(true)-N.outerWidth(true))/2),z:-(m.outerWidth(true)/2)};return{transform:"translateX("+u.x+"px) translateZ("+u.z+"px) rotateY(90deg)"}},right:function(){var u={x:-((m.outerWidth(true)-N.outerWidth(true))/2),z:-(m.outerWidth(true)/2)};return{transform:"translateX("+u.x+"px) translateZ("+u.z+"px) rotateY(-90deg)"}},over:function(){var u={x:-((m.outerWidth(true)-N.outerWidth(true))/2)};return{transform:"translateX("+u.x+"px) rotateY(180deg)"}},back:function(){var u={x:-((m.outerWidth(true)-N.outerWidth(true))/2)};return{transform:"translateX("+u.x+"px) rotateY(-180deg)"}}},transitionEvent:function(){var w=f.createElement("element"),v={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},u;for(u in v){if(w.style[u]!==g){return v[u]}}},nextSide:function(){return(m.next(P.side).length>0)?m.next(P.side):k.find(P.side).first()}},stage:{above:function(){var u={origin:((m.outerHeight(true)-N.outerHeight(true))/2),depth:{active:(N.outerHeight(true)/2),next:(m.outerHeight(true)/2)}};F.verbose("Setting the initial animation position as above",N,u);n.css({transform:"translateZ(-"+u.depth.active+"px)"});m.css({transform:"rotateY(0deg) translateZ("+u.depth.active+"px)"});N.addClass(H.animating).css({top:u.origin+"px",transform:"rotateX(90deg) translateZ("+u.depth.next+"px)"})},below:function(){var u={origin:((m.outerHeight(true)-N.outerHeight(true))/2),depth:{active:(N.outerHeight(true)/2),next:(m.outerHeight(true)/2)}};F.verbose("Setting the initial animation position as below",N,u);n.css({transform:"translateZ(-"+u.depth.active+"px)"});m.css({transform:"rotateY(0deg) translateZ("+u.depth.active+"px)"});N.addClass(H.animating).css({top:u.origin+"px",transform:"rotateX(-90deg) translateZ("+u.depth.next+"px)"})},left:function(){var v={active:m.outerWidth(true),next:N.outerWidth(true)},u={origin:((v.active-v.next)/2),depth:{active:(v.next/2),next:(v.active/2)}};F.verbose("Setting the initial animation position as left",N,u);n.css({transform:"translateZ(-"+u.depth.active+"px)"});m.css({transform:"rotateY(0deg) translateZ("+u.depth.active+"px)"});N.addClass(H.animating).css({left:u.origin+"px",transform:"rotateY(-90deg) translateZ("+u.depth.next+"px)"})},right:function(){var v={active:m.outerWidth(true),next:N.outerWidth(true)},u={origin:((v.active-v.next)/2),depth:{active:(v.next/2),next:(v.active/2)}};F.verbose("Setting the initial animation position as left",N,u);n.css({transform:"translateZ(-"+u.depth.active+"px)"});m.css({transform:"rotateY(0deg) translateZ("+u.depth.active+"px)"});N.addClass(H.animating).css({left:u.origin+"px",transform:"rotateY(90deg) translateZ("+u.depth.next+"px)"})},behind:function(){var v={active:m.outerWidth(true),next:N.outerWidth(true)},u={origin:((v.active-v.next)/2),depth:{active:(v.next/2),next:(v.active/2)}};F.verbose("Setting the initial animation position as behind",N,u);m.css({transform:"rotateY(0deg)"});N.addClass(H.animating).css({left:u.origin+"px",transform:"rotateY(-180deg)"})}},setting:function(v,u){F.debug("Changing setting",v,u);if(h.isPlainObject(v)){h.extend(true,l,v)}else{if(u!==g){l[v]=u}else{return l[v]}}},internal:function(v,u){if(h.isPlainObject(v)){h.extend(true,F,v)}else{if(u!==g){F[v]=u}else{return F[v]}}},debug:function(){if(l.debug){if(l.performance){F.performance.log(arguments)}else{F.debug=Function.prototype.bind.call(console.info,console,l.name+":");F.debug.apply(console,arguments)}}},verbose:function(){if(l.verbose&&l.debug){if(l.performance){F.performance.log(arguments)}else{F.verbose=Function.prototype.bind.call(console.info,console,l.name+":");F.verbose.apply(console,arguments)}}},error:function(){F.error=Function.prototype.bind.call(console.error,console,l.name+":");F.error.apply(console,arguments)},performance:{log:function(v){var w,u,x;if(l.performance){w=new Date().getTime();x=s||w;u=w-x;s=w;d.push({Name:v[0],Arguments:[].slice.call(v,1)||"",Element:M,"Execution Time":u})}clearTimeout(F.performance.timer);F.performance.timer=setTimeout(F.performance.display,500)},display:function(){var u=l.name+":",v=0;s=false;clearTimeout(F.performance.timer);h.each(d,function(x,w){v+=w["Execution Time"]});u+=" "+v+"ms";if(I){u+=" '"+I+"'"}if(c.length>1){u+=" ("+c.length+")"}if((console.group!==g||console.table!==g)&&d.length>0){console.groupCollapsed(u);if(console.table){console.table(d)}else{h.each(d,function(x,w){console.log(w.Name+": "+w["Execution Time"]+"ms")})}console.groupEnd()}d=[]}},invoke:function(v,z,x){var y=i,u,w,A;z=z||b;x=M||x;if(typeof v=="string"&&y!==g){v=v.split(/[\. ]/);u=v.length-1;h.each(v,function(B,C){var D=(B!=u)?C+v[B+1].charAt(0).toUpperCase()+v[B+1].slice(1):v;if(h.isPlainObject(y[D])&&(B!=u)){y=y[D]}else{if(y[D]!==g){w=y[D];return false}else{if(h.isPlainObject(y[C])&&(B!=u)){y=y[C]}else{if(y[C]!==g){w=y[C];return false}else{return false}}}}})}if(h.isFunction(w)){A=w.apply(x,z)}else{if(w!==g){A=w}}if(h.isArray(r)){r.push(A)}else{if(r!==g){r=[r,A]}else{if(A!==g){r=A}}}return w}};if(t){if(i===g){F.initialize()}F.invoke(o)}else{if(i!==g){i.invoke("destroy")}F.initialize()}});return(r!==g)?r:this};h.fn.shape.settings={name:"Shape",debug:false,verbose:false,performance:true,namespace:"shape",beforeChange:function(){},onChange:function(){},allowRepeats:false,duration:false,error:{side:"You tried to switch to a side that does not exist.",method:"The method you called is not defined"},className:{animating:"animating",hidden:"hidden",loading:"loading",active:"active"},selector:{sides:".sides",side:".side"}}})(jQuery,window,document);