/*!
 * # Semantic UI x.x - Modal
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Copyright 2015 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;(function(h,e,f,g){h.fn.modal=function(a){var c=h(this),y=h(e),v=h(f),u=h("body"),s=c.selector||"",x=new Date().getTime(),d=[],r=arguments[0],z=(typeof r=="string"),b=[].slice.call(arguments,1),t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame||function(i){setTimeout(i,0)},w;c.each(function(){var l=(h.isPlainObject(a))?h.extend(true,{},h.fn.modal.settings,a):h.extend({},h.fn.modal.settings),n=l.selector,R=l.className,k=l.namespace,N=l.error,T="."+k,X="module-"+k,q=h(this),V=h(l.context),P=q.find(n.close),i,m,O,o,Q,S=this,j=q.data(X),M,W,p,U;U={initialize:function(){U.verbose("Initializing dimmer",V);U.create.id();U.create.dimmer();U.refreshModals();U.bind.events();if(l.observeChanges){U.observeChanges()}U.instantiate()},instantiate:function(){U.verbose("Storing instance of modal");j=U;q.data(X,j)},create:{dimmer:function(){var B={debug:l.debug,dimmerName:"modals",duration:{show:l.duration,hide:l.duration}},A=h.extend(true,B,l.dimmerSettings);if(l.inverted){A.variation=(A.variation!==g)?A.variation+" inverted":"inverted"}if(h.fn.dimmer===g){U.error(N.dimmer);return}U.debug("Creating dimmer with settings",A);o=V.dimmer(A);if(l.detachable){U.verbose("Modal is detachable, moving content into dimmer");o.dimmer("add content",q)}else{U.set.undetached()}if(l.blurring){o.addClass(R.blurring)}Q=o.dimmer("get dimmer")},id:function(){W=(Math.random().toString(16)+"000000000").substr(2,8);M="."+W;U.verbose("Creating unique id for element",W)}},destroy:function(){U.verbose("Destroying previous modal");q.removeData(X).off(T);y.off(M);P.off(T);V.dimmer("destroy")},observeChanges:function(){if("MutationObserver" in e){p=new MutationObserver(function(A){U.debug("DOM tree modified, refreshing");U.refresh()});p.observe(S,{childList:true,subtree:true});U.debug("Setting up mutation observer",p)}},refresh:function(){U.remove.scrolling();U.cacheSizes();U.set.screenHeight();U.set.type();U.set.position()},refreshModals:function(){m=q.siblings(n.modal);i=m.add(q)},attachEvents:function(C,A){var B=h(C);A=h.isFunction(U[A])?U[A]:U.toggle;if(B.length>0){U.debug("Attaching modal events to element",C,A);B.off(T).on("click"+T,A)}else{U.error(N.notFound,C)}},bind:{events:function(){U.verbose("Attaching events");q.on("click"+T,n.close,U.event.close).on("click"+T,n.approve,U.event.approve).on("click"+T,n.deny,U.event.deny);y.on("resize"+M,U.event.resize)}},get:{id:function(){return(Math.random().toString(16)+"000000000").substr(2,8)}},event:{approve:function(){if(l.onApprove.call(S,h(this))===false){U.verbose("Approve callback returned false cancelling hide");return}U.hide()},deny:function(){if(l.onDeny.call(S,h(this))===false){U.verbose("Deny callback returned false cancelling hide");return}U.hide()},close:function(){U.hide()},click:function(A){var C=h(A.target),B=(C.closest(n.modal).length>0),D=h.contains(f.documentElement,A.target);if(!B&&D){U.debug("Dimmer clicked, hiding all modals");if(U.is.active()){U.remove.clickaway();if(l.allowMultiple){U.hide()}else{U.hideAll()}}}},debounce:function(A,B){clearTimeout(U.timer);U.timer=setTimeout(A,B)},keyboard:function(B){var A=B.which,C=27;if(A==C){if(l.closable){U.debug("Escape key pressed hiding modal");U.hide()}else{U.debug("Escape key pressed, but closable is set to false")}B.preventDefault()}},resize:function(){if(o.dimmer("is active")){t(U.refresh)}}},toggle:function(){if(U.is.active()||U.is.animating()){U.hide()}else{U.show()}},show:function(A){A=h.isFunction(A)?A:function(){};U.refreshModals();U.showModal(A)},hide:function(A){A=h.isFunction(A)?A:function(){};U.refreshModals();U.hideModal(A)},showModal:function(A){A=h.isFunction(A)?A:function(){};if(U.is.animating()||!U.is.active()){U.showDimmer();U.cacheSizes();U.set.position();U.set.screenHeight();U.set.type();U.set.clickaway();if(!l.allowMultiple&&U.others.active()){U.hideOthers(U.showModal)}else{l.onShow.call(S);if(l.transition&&h.fn.transition!==g&&q.transition("is supported")){U.debug("Showing modal with css animations");q.transition({debug:l.debug,animation:l.transition+" in",queue:l.queue,duration:l.duration,useFailSafe:true,onComplete:function(){l.onVisible.apply(S);U.add.keyboardShortcuts();U.save.focus();U.set.active();U.set.autofocus();A()}})}else{U.error(N.noTransition)}}}else{U.debug("Modal is already visible")}},hideModal:function(A,B){A=h.isFunction(A)?A:function(){};U.debug("Hiding modal");l.onHide.call(S);if(U.is.animating()||U.is.active()){if(l.transition&&h.fn.transition!==g&&q.transition("is supported")){U.remove.active();q.transition({debug:l.debug,animation:l.transition+" out",queue:l.queue,duration:l.duration,useFailSafe:true,onStart:function(){if(!U.others.active()&&!B){U.hideDimmer()}U.remove.keyboardShortcuts()},onComplete:function(){l.onHidden.call(S);U.restore.focus();A()}})}else{U.error(N.noTransition)}}},showDimmer:function(){if(o.dimmer("is animating")||!o.dimmer("is active")){U.debug("Showing dimmer");o.dimmer("show")}else{U.debug("Dimmer already visible")}},hideDimmer:function(){if(o.dimmer("is animating")||(o.dimmer("is active"))){o.dimmer("hide",function(){if(l.transition&&h.fn.transition!==g&&q.transition("is supported")){U.remove.clickaway();U.remove.screenHeight()}})}else{U.debug("Dimmer is not visible cannot hide");return}},hideAll:function(A){var B=i.filter("."+R.active+", ."+R.animating);A=h.isFunction(A)?A:function(){};if(B.length>0){U.debug("Hiding all visible modals");U.hideDimmer();B.modal("hide modal",A)}},hideOthers:function(A){var B=m.filter("."+R.active+", ."+R.animating);A=h.isFunction(A)?A:function(){};if(B.length>0){U.debug("Hiding other modals",m);B.modal("hide modal",A,true)}},others:{active:function(){return(m.filter("."+R.active).length>0)},animating:function(){return(m.filter("."+R.animating).length>0)}},add:{keyboardShortcuts:function(){U.verbose("Adding keyboard shortcuts");v.on("keyup"+T,U.event.keyboard)}},save:{focus:function(){O=h(f.activeElement).blur()}},restore:{focus:function(){if(O&&O.length>0){O.focus()}}},remove:{active:function(){q.removeClass(R.active)},clickaway:function(){if(l.closable){Q.off("click"+M)}},screenHeight:function(){if(U.cache.height>U.cache.pageHeight){U.debug("Removing page height");u.css("height","")}},keyboardShortcuts:function(){U.verbose("Removing keyboard shortcuts");v.off("keyup"+T)},scrolling:function(){o.removeClass(R.scrolling);q.removeClass(R.scrolling)}},cacheSizes:function(){var A=q.outerHeight();if(U.cache===g||A!==0){U.cache={pageHeight:h(f).outerHeight(),height:A+l.offset,contextHeight:(l.context=="body")?h(e).height():o.height()}}U.debug("Caching modal and container sizes",U.cache)},can:{fit:function(){return((U.cache.height+(l.padding*2))<U.cache.contextHeight)}},is:{active:function(){return q.hasClass(R.active)},animating:function(){return q.transition("is supported")?q.transition("is animating"):q.is(":visible")},scrolling:function(){return o.hasClass(R.scrolling)},modernBrowser:function(){return !(e.ActiveXObject||"ActiveXObject" in e)}},set:{autofocus:function(){if(l.autofocus){var C=q.filter(":input").filter(":visible"),B=C.filter("[autofocus]"),A=(B.length>0)?B.first():C.first();if(A.length>0){A.focus()}}},clickaway:function(){if(l.closable){Q.on("click"+M,U.event.click)}},screenHeight:function(){if(U.can.fit()){u.css("height","")}else{U.debug("Modal is taller than page content, resizing page height");u.css("height",U.cache.height+(l.padding*2))}},active:function(){q.addClass(R.active)},scrolling:function(){o.addClass(R.scrolling);q.addClass(R.scrolling)},type:function(){if(U.can.fit()){U.verbose("Modal fits on screen");if(!U.others.active()&&!U.others.animating()){U.remove.scrolling()}}else{U.verbose("Modal cannot fit on screen setting to scrolling");U.set.scrolling()}},position:function(){U.verbose("Centering modal on page",U.cache);if(U.can.fit()){q.css({top:"",marginTop:-(U.cache.height/2)})}else{q.css({marginTop:"",top:v.scrollTop()})}},undetached:function(){o.addClass(R.undetached)}},setting:function(B,A){U.debug("Changing setting",B,A);if(h.isPlainObject(B)){h.extend(true,l,B)}else{if(A!==g){l[B]=A}else{return l[B]}}},internal:function(B,A){if(h.isPlainObject(B)){h.extend(true,U,B)}else{if(A!==g){U[B]=A}else{return U[B]}}},debug:function(){if(l.debug){if(l.performance){U.performance.log(arguments)}else{U.debug=Function.prototype.bind.call(console.info,console,l.name+":");U.debug.apply(console,arguments)}}},verbose:function(){if(l.verbose&&l.debug){if(l.performance){U.performance.log(arguments)}else{U.verbose=Function.prototype.bind.call(console.info,console,l.name+":");U.verbose.apply(console,arguments)}}},error:function(){U.error=Function.prototype.bind.call(console.error,console,l.name+":");U.error.apply(console,arguments)},performance:{log:function(B){var C,A,D;if(l.performance){C=new Date().getTime();D=x||C;A=C-D;x=C;d.push({Name:B[0],Arguments:[].slice.call(B,1)||"",Element:S,"Execution Time":A})}clearTimeout(U.performance.timer);U.performance.timer=setTimeout(U.performance.display,500)},display:function(){var A=l.name+":",B=0;x=false;clearTimeout(U.performance.timer);h.each(d,function(D,C){B+=C["Execution Time"]});A+=" "+B+"ms";if(s){A+=" '"+s+"'"}if((console.group!==g||console.table!==g)&&d.length>0){console.groupCollapsed(A);if(console.table){console.table(d)}else{h.each(d,function(D,C){console.log(C.Name+": "+C["Execution Time"]+"ms")})}console.groupEnd()}d=[]}},invoke:function(B,F,D){var E=j,A,C,G;F=F||b;D=S||D;if(typeof B=="string"&&E!==g){B=B.split(/[\. ]/);A=B.length-1;h.each(B,function(H,I){var J=(H!=A)?I+B[H+1].charAt(0).toUpperCase()+B[H+1].slice(1):B;if(h.isPlainObject(E[J])&&(H!=A)){E=E[J]}else{if(E[J]!==g){C=E[J];return false}else{if(h.isPlainObject(E[I])&&(H!=A)){E=E[I]}else{if(E[I]!==g){C=E[I];return false}else{return false}}}}})}if(h.isFunction(C)){G=C.apply(D,F)}else{if(C!==g){G=C}}if(h.isArray(w)){w.push(G)}else{if(w!==g){w=[w,G]}else{if(G!==g){w=G}}}return C}};if(z){if(j===g){U.initialize()}U.invoke(r)}else{if(j!==g){j.invoke("destroy")}U.initialize()}});return(w!==g)?w:this};h.fn.modal.settings={name:"Modal",namespace:"modal",debug:false,verbose:false,performance:true,observeChanges:false,allowMultiple:false,detachable:true,closable:true,autofocus:true,inverted:false,blurring:false,dimmerSettings:{closable:false,useCSS:true},context:"body",queue:false,duration:500,offset:0,transition:"scale",padding:50,onShow:function(){},onVisible:function(){},onHide:function(){},onHidden:function(){},onApprove:function(){return true},onDeny:function(){return true},selector:{close:".close",approve:".actions .positive, .actions .approve, .actions .ok",deny:".actions .negative, .actions .deny, .actions .cancel",modal:".ui.modal"},error:{dimmer:"UI Dimmer, a required component is not included in this page",method:"The method you called is not defined.",notFound:"The element you specified could not be found"},className:{active:"active",animating:"animating",blurring:"blurring",scrolling:"scrolling",undetached:"undetached"}}})(jQuery,window,document);