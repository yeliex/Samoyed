/*!
 * # Semantic UI x.x - Modal
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Copyright 2015 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;!function(c,d,b,a){c.fn.modal=function(i){var x,e=c(this),A=c(d),w=c(b),k=c("body"),z=e.selector||"",t=(new Date).getTime(),j=[],p=arguments[0],q="string"==typeof p,n=[].slice.call(arguments,1),y=d.requestAnimationFrame||d.mozRequestAnimationFrame||d.webkitRequestAnimationFrame||d.msRequestAnimationFrame||function(f){setTimeout(f,0)};return e.each(function(){var L,W,R,s,U,B,K,m,g,G=c.isPlainObject(i)?c.extend(!0,{},c.fn.modal.settings,i):c.extend({},c.fn.modal.settings),J=G.selector,v=G.className,f=G.namespace,Q=G.error,u="."+f,o="module-"+f,h=c(this),P=c(G.context),I=h.find(J.close),V=this,l=h.data(o);g={initialize:function(){g.verbose("Initializing dimmer",P),g.create.id(),g.create.dimmer(),g.refreshModals(),g.bind.events(),G.observeChanges&&g.observeChanges(),g.instantiate()},instantiate:function(){g.verbose("Storing instance of modal"),l=g,h.data(o,l)},create:{dimmer:function(){var C={debug:G.debug,dimmerName:"modals",duration:{show:G.duration,hide:G.duration}},r=c.extend(!0,C,G.dimmerSettings);return G.inverted&&(r.variation=r.variation!==a?r.variation+" inverted":"inverted"),c.fn.dimmer===a?void g.error(Q.dimmer):(g.debug("Creating dimmer with settings",r),s=P.dimmer(r),G.detachable?(g.verbose("Modal is detachable, moving content into dimmer"),s.dimmer("add content",h)):g.set.undetached(),G.blurring&&s.addClass(v.blurring),void (U=s.dimmer("get dimmer")))},id:function(){K=(Math.random().toString(16)+"000000000").substr(2,8),B="."+K,g.verbose("Creating unique id for element",K)}},destroy:function(){g.verbose("Destroying previous modal"),h.removeData(o).off(u),A.off(B),I.off(u),P.dimmer("destroy")},observeChanges:function(){"MutationObserver" in d&&(m=new MutationObserver(function(r){g.debug("DOM tree modified, refreshing"),g.refresh()}),m.observe(V,{childList:!0,subtree:!0}),g.debug("Setting up mutation observer",m))},refresh:function(){g.remove.scrolling(),g.cacheSizes(),g.set.screenHeight(),g.set.type(),g.set.position()},refreshModals:function(){W=h.siblings(J.modal),L=W.add(h)},attachEvents:function(D,C){var r=c(D);C=c.isFunction(g[C])?g[C]:g.toggle,r.length>0?(g.debug("Attaching modal events to element",D,C),r.off(u).on("click"+u,C)):g.error(Q.notFound,D)},bind:{events:function(){g.verbose("Attaching events"),h.on("click"+u,J.close,g.event.close).on("click"+u,J.approve,g.event.approve).on("click"+u,J.deny,g.event.deny),A.on("resize"+B,g.event.resize)}},get:{id:function(){return(Math.random().toString(16)+"000000000").substr(2,8)}},event:{approve:function(){return G.onApprove.call(V,c(this))===!1?void g.verbose("Approve callback returned false cancelling hide"):void g.hide()},deny:function(){return G.onDeny.call(V,c(this))===!1?void g.verbose("Deny callback returned false cancelling hide"):void g.hide()},close:function(){g.hide()},click:function(E){var C=c(E.target),D=C.closest(J.modal).length>0,r=c.contains(b.documentElement,E.target);!D&&r&&(g.debug("Dimmer clicked, hiding all modals"),g.is.active()&&(g.remove.clickaway(),G.allowMultiple?g.hide():g.hideAll()))},debounce:function(r,C){clearTimeout(g.timer),g.timer=setTimeout(r,C)},keyboard:function(C){var D=C.which,r=27;D==r&&(G.closable?(g.debug("Escape key pressed hiding modal"),g.hide()):g.debug("Escape key pressed, but closable is set to false"),C.preventDefault())},resize:function(){s.dimmer("is active")&&y(g.refresh)}},toggle:function(){g.is.active()||g.is.animating()?g.hide():g.show()},show:function(r){r=c.isFunction(r)?r:function(){},g.refreshModals(),g.showModal(r)},hide:function(r){r=c.isFunction(r)?r:function(){},g.refreshModals(),g.hideModal(r)},showModal:function(r){r=c.isFunction(r)?r:function(){},g.is.animating()||!g.is.active()?(g.showDimmer(),g.cacheSizes(),g.set.position(),g.set.screenHeight(),g.set.type(),g.set.clickaway(),!G.allowMultiple&&g.others.active()?g.hideOthers(g.showModal):(G.onShow.call(V),G.transition&&c.fn.transition!==a&&h.transition("is supported")?(g.debug("Showing modal with css animations"),h.transition({debug:G.debug,animation:G.transition+" in",queue:G.queue,duration:G.duration,useFailSafe:!0,onComplete:function(){G.onVisible.apply(V),g.add.keyboardShortcuts(),g.save.focus(),g.set.active(),g.set.autofocus(),r()}})):g.error(Q.noTransition))):g.debug("Modal is already visible")},hideModal:function(C,r){C=c.isFunction(C)?C:function(){},g.debug("Hiding modal"),G.onHide.call(V),(g.is.animating()||g.is.active())&&(G.transition&&c.fn.transition!==a&&h.transition("is supported")?(g.remove.active(),h.transition({debug:G.debug,animation:G.transition+" out",queue:G.queue,duration:G.duration,useFailSafe:!0,onStart:function(){g.others.active()||r||g.hideDimmer(),g.remove.keyboardShortcuts()},onComplete:function(){G.onHidden.call(V),g.restore.focus(),C()}})):g.error(Q.noTransition))},showDimmer:function(){s.dimmer("is animating")||!s.dimmer("is active")?(g.debug("Showing dimmer"),s.dimmer("show")):g.debug("Dimmer already visible")},hideDimmer:function(){return s.dimmer("is animating")||s.dimmer("is active")?void s.dimmer("hide",function(){G.transition&&c.fn.transition!==a&&h.transition("is supported")&&(g.remove.clickaway(),g.remove.screenHeight())}):void g.debug("Dimmer is not visible cannot hide")},hideAll:function(C){var r=L.filter("."+v.active+", ."+v.animating);C=c.isFunction(C)?C:function(){},r.length>0&&(g.debug("Hiding all visible modals"),g.hideDimmer(),r.modal("hide modal",C))},hideOthers:function(C){var r=W.filter("."+v.active+", ."+v.animating);C=c.isFunction(C)?C:function(){},r.length>0&&(g.debug("Hiding other modals",W),r.modal("hide modal",C,!0))},others:{active:function(){return W.filter("."+v.active).length>0},animating:function(){return W.filter("."+v.animating).length>0}},add:{keyboardShortcuts:function(){g.verbose("Adding keyboard shortcuts"),w.on("keyup"+u,g.event.keyboard)}},save:{focus:function(){R=c(b.activeElement).blur()}},restore:{focus:function(){R&&R.length>0&&R.focus()}},remove:{active:function(){h.removeClass(v.active)},clickaway:function(){G.closable&&U.off("click"+B)},screenHeight:function(){g.cache.height>g.cache.pageHeight&&(g.debug("Removing page height"),k.css("height",""))},keyboardShortcuts:function(){g.verbose("Removing keyboard shortcuts"),w.off("keyup"+u)},scrolling:function(){s.removeClass(v.scrolling),h.removeClass(v.scrolling)}},cacheSizes:function(){var r=h.outerHeight();(g.cache===a||0!==r)&&(g.cache={pageHeight:c(b).outerHeight(),height:r+G.offset,contextHeight:"body"==G.context?c(d).height():s.height()}),g.debug("Caching modal and container sizes",g.cache)},can:{fit:function(){return g.cache.height+2*G.padding<g.cache.contextHeight}},is:{active:function(){return h.hasClass(v.active)},animating:function(){return h.transition("is supported")?h.transition("is animating"):h.is(":visible")},scrolling:function(){return s.hasClass(v.scrolling)},modernBrowser:function(){return !(d.ActiveXObject||"ActiveXObject" in d)}},set:{autofocus:function(){if(G.autofocus){var C=h.filter(":input").filter(":visible"),D=C.filter("[autofocus]"),r=D.length>0?D.first():C.first();r.length>0&&r.focus()}},clickaway:function(){G.closable&&U.on("click"+B,g.event.click)},screenHeight:function(){g.can.fit()?k.css("height",""):(g.debug("Modal is taller than page content, resizing page height"),k.css("height",g.cache.height+2*G.padding))},active:function(){h.addClass(v.active)},scrolling:function(){s.addClass(v.scrolling),h.addClass(v.scrolling)},type:function(){g.can.fit()?(g.verbose("Modal fits on screen"),g.others.active()||g.others.animating()||g.remove.scrolling()):(g.verbose("Modal cannot fit on screen setting to scrolling"),g.set.scrolling())},position:function(){g.verbose("Centering modal on page",g.cache),h.css(g.can.fit()?{top:"",marginTop:-(g.cache.height/2)}:{marginTop:"",top:w.scrollTop()})},undetached:function(){s.addClass(v.undetached)}},setting:function(C,r){if(g.debug("Changing setting",C,r),c.isPlainObject(C)){c.extend(!0,G,C)}else{if(r===a){return G[C]}G[C]=r}},internal:function(C,r){if(c.isPlainObject(C)){c.extend(!0,g,C)}else{if(r===a){return g[C]}g[C]=r}},debug:function(){G.debug&&(G.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,G.name+":"),g.debug.apply(console,arguments)))},verbose:function(){G.verbose&&G.debug&&(G.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,G.name+":"),g.verbose.apply(console,arguments)))},error:function(){g.error=Function.prototype.bind.call(console.error,console,G.name+":"),g.error.apply(console,arguments)},performance:{log:function(D){var E,C,r;G.performance&&(E=(new Date).getTime(),r=t||E,C=E-r,t=E,j.push({Name:D[0],Arguments:[].slice.call(D,1)||"",Element:V,"Execution Time":C})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,500)},display:function(){var C=G.name+":",r=0;t=!1,clearTimeout(g.performance.timer),c.each(j,function(D,E){r+=E["Execution Time"]}),C+=" "+r+"ms",z&&(C+=" '"+z+"'"),(console.group!==a||console.table!==a)&&j.length>0&&(console.groupCollapsed(C),console.table?console.table(j):c.each(j,function(D,E){console.log(E.Name+": "+E["Execution Time"]+"ms")}),console.groupEnd()),j=[]}},invoke:function(N,D,H){var F,E,M,C=l;return D=D||n,H=V||H,"string"==typeof N&&C!==a&&(N=N.split(/[\. ]/),F=N.length-1,c.each(N,function(O,S){var r=O!=F?S+N[O+1].charAt(0).toUpperCase()+N[O+1].slice(1):N;if(c.isPlainObject(C[r])&&O!=F){C=C[r]}else{if(C[r]!==a){return E=C[r],!1}if(!c.isPlainObject(C[S])||O==F){return C[S]!==a?(E=C[S],!1):!1}C=C[S]}})),c.isFunction(E)?M=E.apply(H,D):E!==a&&(M=E),c.isArray(x)?x.push(M):x!==a?x=[x,M]:M!==a&&(x=M),E}},q?(l===a&&g.initialize(),g.invoke(p)):(l!==a&&l.invoke("destroy"),g.initialize())}),x!==a?x:this},c.fn.modal.settings={name:"Modal",namespace:"modal",debug:!1,verbose:!1,performance:!0,observeChanges:!1,allowMultiple:!1,detachable:!0,closable:!0,autofocus:!0,inverted:!1,blurring:!1,dimmerSettings:{closable:!1,useCSS:!0},context:"body",queue:!1,duration:500,offset:0,transition:"scale",padding:50,onShow:function(){},onVisible:function(){},onHide:function(){},onHidden:function(){},onApprove:function(){return !0},onDeny:function(){return !0},selector:{close:".close",approve:".actions .positive, .actions .approve, .actions .ok",deny:".actions .negative, .actions .deny, .actions .cancel",modal:".ui.modal"},error:{dimmer:"UI Dimmer, a required component is not included in this page",method:"The method you called is not defined.",notFound:"The element you specified could not be found"},className:{active:"active",animating:"animating",blurring:"blurring",scrolling:"scrolling",undetached:"undetached"}}}(jQuery,window,document);