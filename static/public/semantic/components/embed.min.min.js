/*!
 * # Semantic UI x.x - Video
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Copyright 2015 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;!function(b,d,c,a){b.fn.embed=function(e){var n,k=b(this),g=k.selector||"",j=(new Date).getTime(),f=[],h=arguments[0],m="string"==typeof h,p=[].slice.call(arguments,1);return k.each(function(){var q,l=b.isPlainObject(e)?b.extend(!0,{},b.fn.embed.settings,e):b.extend({},b.fn.embed.settings),D=l.selector,x=l.className,B=l.sources,G=l.error,I=l.metadata,F=l.namespace,H=l.templates,i="."+F,z="module-"+F,r=(b(d),b(this)),J=r.find(D.placeholder),u=r.find(D.icon),s=r.find(D.embed),t=this,o=r.data(z);q={initialize:function(){q.debug("Initializing embed"),q.determine.autoplay(),q.create(),q.bind.events(),q.instantiate()},instantiate:function(){q.verbose("Storing instance of module",q),o=q,r.data(z,q)},destroy:function(){q.verbose("Destroying previous instance of embed"),q.reset(),r.removeData(z).off(i)},refresh:function(){q.verbose("Refreshing selector cache"),J=r.find(D.placeholder),u=r.find(D.icon),s=r.find(D.embed)},bind:{events:function(){q.has.placeholder()&&(q.debug("Adding placeholder events"),console.log(r,D.placeholder),r.on("click"+i,D.placeholder,q.createAndShow).on("click"+i,D.icon,q.createAndShow))}},create:function(){var v=q.get.placeholder();v?q.createPlaceholder():q.createAndShow()},createPlaceholder:function(v){var y=q.get.icon(),w=q.get.url();q.generate.embed(w);v=v||q.get.placeholder(),r.html(H.placeholder(v,y)),q.debug("Creating placeholder for embed",v,y)},createEmbed:function(v){q.refresh(),v=v||q.get.url(),console.log(v),s=b("<div/>").addClass(x.embed).html(q.generate.embed(v)).appendTo(r),l.onCreate.call(t,v),q.debug("Creating embed object",s)},createAndShow:function(){console.log("cands"),q.createEmbed(),q.show()},change:function(v,y,w){q.debug("Changing video to ",v,y,w),r.data(I.source,v).data(I.id,y).data(I.url,w),q.create()},reset:function(){q.debug("Clearing embed and showing placeholder"),q.remove.active(),q.remove.embed(),q.showPlaceholder(),l.onReset.call(t)},show:function(){q.debug("Showing embed"),q.set.active(),l.onDisplay.call(t)},hide:function(){q.debug("Hiding embed"),q.showPlaceholder()},showPlaceholder:function(){q.debug("Showing placeholder image"),q.remove.active(),l.onPlaceholderDisplay.call(t)},get:{id:function(){return l.id||r.data(I.id)},placeholder:function(){return l.placeholder||r.data(I.placeholder)},icon:function(){return l.icon?l.icon:r.data(I.icon)!==a?r.data(I.icon):q.determine.icon()},source:function(v){return l.source?l.source:r.data(I.source)!==a?r.data(I.source):q.determine.source()},type:function(){var v=q.get.source();return B[v]!==a?B[v].type:!1},url:function(){return l.url?l.url:r.data(I.url)!==a?r.data(I.url):q.determine.url()}},determine:{autoplay:function(){q.should.autoplay()&&(l.autoplay=!0)},source:function(w){var v=!1;return w=w||q.get.url(),w&&b.each(B,function(A,y){return -1!==w.search(y.domain)?(v=A,!1):void 0}),v},icon:function(){var v=q.get.source();return B[v]!==a?B[v].icon:!1},url:function(){var v,y=l.id||r.data(I.id),w=l.source||r.data(I.source);return v=B[w]!==a?B[w].url.replace("{id}",y):!1,v&&r.data(I.url,v),v}},set:{active:function(){r.addClass(x.active)}},remove:{active:function(){r.removeClass(x.active)},embed:function(){s.empty()}},encode:{parameters:function(v){var y,w=[];for(y in v){w.push(encodeURIComponent(y)+"="+encodeURIComponent(v[y]))}return w.join("&amp;")}},generate:{embed:function(w){q.debug("Generating embed html");var A,y,v=q.get.source();return w=q.get.url(w),w?(y=q.generate.parameters(v),A=H.iframe(w,y)):q.error(G.noURL,r),A},parameters:function(y,w){var v=B[y]&&B[y].parameters!==a?B[y].parameters(l):{};return w=w||l.parameters,w&&(v=b.extend({},v,w)),v=l.onEmbed(v),q.encode.parameters(v)}},has:{placeholder:function(){return l.placeholder||r.data(I.placeholder)}},should:{autoplay:function(){return"auto"===l.autoplay?l.placeholder||r.data(I.placeholder)!==a:l.autoplay}},is:{video:function(){return"video"==q.get.type()}},setting:function(w,v){if(q.debug("Changing setting",w,v),b.isPlainObject(w)){b.extend(!0,l,w)}else{if(v===a){return l[w]}l[w]=v}},internal:function(w,v){if(b.isPlainObject(w)){b.extend(!0,q,w)}else{if(v===a){return q[w]}q[w]=v}},debug:function(){l.debug&&(l.performance?q.performance.log(arguments):(q.debug=Function.prototype.bind.call(console.info,console,l.name+":"),q.debug.apply(console,arguments)))},verbose:function(){l.verbose&&l.debug&&(l.performance?q.performance.log(arguments):(q.verbose=Function.prototype.bind.call(console.info,console,l.name+":"),q.verbose.apply(console,arguments)))},error:function(){q.error=Function.prototype.bind.call(console.error,console,l.name+":"),q.error.apply(console,arguments)},performance:{log:function(w){var A,y,v;l.performance&&(A=(new Date).getTime(),v=j||A,y=A-v,j=A,f.push({Name:w[0],Arguments:[].slice.call(w,1)||"",Element:t,"Execution Time":y})),clearTimeout(q.performance.timer),q.performance.timer=setTimeout(q.performance.display,500)},display:function(){var w=l.name+":",v=0;j=!1,clearTimeout(q.performance.timer),b.each(f,function(y,A){v+=A["Execution Time"]}),w+=" "+v+"ms",g&&(w+=" '"+g+"'"),k.length>1&&(w+=" ("+k.length+")"),(console.group!==a||console.table!==a)&&f.length>0&&(console.groupCollapsed(w),console.table?console.table(f):b.each(f,function(y,A){console.log(A.Name+": "+A["Execution Time"]+"ms")}),console.groupEnd()),f=[]}},invoke:function(K,C,w){var y,E,v,A=o;return C=C||p,w=t||w,"string"==typeof K&&A!==a&&(K=K.split(/[\. ]/),y=K.length-1,b.each(K,function(N,M){var L=N!=y?M+K[N+1].charAt(0).toUpperCase()+K[N+1].slice(1):K;if(b.isPlainObject(A[L])&&N!=y){A=A[L]}else{if(A[L]!==a){return E=A[L],!1}if(!b.isPlainObject(A[M])||N==y){return A[M]!==a?(E=A[M],!1):(q.error(G.method,K),!1)}A=A[M]}})),b.isFunction(E)?v=E.apply(w,C):E!==a&&(v=E),b.isArray(n)?n.push(v):n!==a?n=[n,v]:v!==a&&(n=v),E}},m?(o===a&&q.initialize(),q.invoke(h)):(o!==a&&o.invoke("destroy"),q.initialize())}),n!==a?n:this},b.fn.embed.settings={name:"Embed",namespace:"embed",debug:!1,verbose:!1,performance:!0,icon:!1,source:!1,url:!1,id:!1,autoplay:"auto",color:"#444444",hd:!0,brandedUI:!1,parameters:!1,onDisplay:function(){},onPlaceholderDisplay:function(){},onReset:function(){},onCreate:function(f){},onEmbed:function(f){return f},metadata:{id:"id",icon:"icon",placeholder:"placeholder",source:"source",url:"url"},error:{noURL:"No URL specified",method:"The method you called is not defined"},className:{active:"active",embed:"embed"},selector:{embed:".embed",placeholder:".placeholder",icon:".icon"},sources:{youtube:{name:"youtube",type:"video",icon:"video play",domain:"youtube.com",url:"//www.youtube.com/embed/{id}",parameters:function(f){return{autohide:!f.brandedUI,autoplay:f.autoplay,color:f.colors||a,hq:f.hd,jsapi:f.api,modestbranding:!f.brandedUI}}},vimeo:{name:"vimeo",type:"video",icon:"video play",domain:"vimeo.com",url:"//player.vimeo.com/video/{id}",parameters:function(f){return{api:f.api,autoplay:f.autoplay,byline:f.brandedUI,color:f.colors||a,portrait:f.brandedUI,title:f.brandedUI}}}},templates:{iframe:function(f,g){return'<iframe src="'+f+"?="+g+'" width="100%" height="100%" frameborder="0" scrolling="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},placeholder:function(f,h){var g="";return h&&(g+='<i class="'+h+' icon"></i>'),f&&(g+='<img class="placeholder" src="'+f+'">'),g}},api:!0,onPause:function(){},onPlay:function(){},onStop:function(){}}}(jQuery,window,document);