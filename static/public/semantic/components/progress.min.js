/*!
 * # Semantic UI x.x - Progress
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Copyright 2015 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;(function(c,b,a,d){c.fn.progress=function(m){var k=c(this),h=k.selector||"",f=new Date().getTime(),j=[],i=arguments[0],e=(typeof i=="string"),l=[].slice.call(arguments,1),g;k.each(function(){var q=(c.isPlainObject(m))?c.extend(true,{},c.fn.progress.settings,m):c.extend({},c.fn.progress.settings),v=q.className,A=q.metadata,r=q.namespace,s=q.selector,x=q.error,C="."+r,u="module-"+r,z=c(this),p=c(this).find(s.bar),w=c(this).find(s.progress),y=c(this).find(s.label),t=this,B=z.data(u),D=false,n,o;o={initialize:function(){o.debug("Initializing progress bar",q);o.set.duration();o.set.transitionEvent();o.read.metadata();o.read.settings();o.instantiate()},instantiate:function(){o.verbose("Storing instance of progress",o);B=o;z.data(u,o)},destroy:function(){o.verbose("Destroying previous progress for",z);clearInterval(B.interval);o.remove.state();z.removeData(u);B=d},reset:function(){o.set.percent(0)},complete:function(){if(o.percent===d||o.percent<100){o.set.percent(100)}},read:{metadata:function(){var E={percent:z.data(A.percent),total:z.data(A.total),value:z.data(A.value)};if(E.percent){o.debug("Current percent value set from metadata",E.percent);o.set.percent(E.percent)}if(E.total){o.debug("Total value set from metadata",E.total);o.set.total(E.total)}if(E.value){o.debug("Current value set from metadata",E.value);o.set.value(E.value);o.set.progress(E.value)}},settings:function(){if(q.total!==false){o.debug("Current total set in settings",q.total);o.set.total(q.total)}if(q.value!==false){o.debug("Current value set in settings",q.value);o.set.value(q.value);o.set.progress(o.value)}if(q.percent!==false){o.debug("Current percent set in settings",q.percent);o.set.percent(q.percent)}}},increment:function(F){var H,E,G;if(o.has.total()){E=o.get.value();F=F||1;G=E+F;H=o.get.total();o.debug("Incrementing value",E,G,H);if(G>H){o.debug("Value cannot increment above total",H);G=H}}else{E=o.get.percent();F=F||o.get.randomValue();G=E+F;H=100;o.debug("Incrementing percentage by",E,G);if(G>H){o.debug("Value cannot increment above 100 percent");G=H}}o.set.progress(G)},decrement:function(F){var G=o.get.total(),E,H;if(G){E=o.get.value();F=F||1;H=E-F;o.debug("Decrementing value by",F,E)}else{E=o.get.percent();F=F||o.get.randomValue();H=E-F;o.debug("Decrementing percentage by",F,E)}if(H<0){o.debug("Value cannot decrement below 0");H=0}o.set.progress(H)},has:{total:function(){return(o.get.total()!==false)}},get:{text:function(H){var G=o.value||0,F=o.total||0,E=(D)?o.get.displayPercent():o.percent||0,I=(o.total>0)?(F-G):(100-E);H=H||"";H=H.replace("{value}",G).replace("{total}",F).replace("{left}",I).replace("{percent}",E);o.debug("Adding variables to progress bar text",H);return H},randomValue:function(){o.debug("Generating random increment percentage");return Math.floor((Math.random()*q.random.max)+q.random.min)},numericValue:function(E){return(typeof E==="string")?(E.replace(/[^\d.]/g,"")!=="")?+(E.replace(/[^\d.]/g,"")):false:E},transitionEnd:function(){var E=a.createElement("element"),F={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},G;for(G in F){if(E.style[G]!==d){return F[G]}}},displayPercent:function(){var H=p.width(),E=z.width(),G=parseInt(p.css("min-width"),10),F=(H>G)?(H/E*100):o.percent;return(q.precision>0)?Math.round(F*(10*q.precision))/(10*q.precision):Math.round(F)},percent:function(){return o.percent||0},value:function(){return o.value||0},total:function(){return o.total||false}},is:{success:function(){return z.hasClass(v.success)},warning:function(){return z.hasClass(v.warning)},error:function(){return z.hasClass(v.error)},active:function(){return z.hasClass(v.active)},visible:function(){return z.is(":visible")}},remove:{state:function(){o.verbose("Removing stored state");delete o.total;delete o.percent;delete o.value},active:function(){o.verbose("Removing active state");z.removeClass(v.active)},success:function(){o.verbose("Removing success state");z.removeClass(v.success)},warning:function(){o.verbose("Removing warning state");z.removeClass(v.warning)},error:function(){o.verbose("Removing error state");z.removeClass(v.error)}},set:{barWidth:function(E){if(E>100){o.error(x.tooHigh,E)}else{if(E<0){o.error(x.tooLow,E)}else{p.css("width",E+"%");z.attr("data-percent",parseInt(E,10))}}},duration:function(E){E=E||q.duration;E=(typeof E=="number")?E+"ms":E;o.verbose("Setting progress bar transition duration",E);p.css({"transition-duration":E})},percent:function(E){E=(typeof E=="string")?+(E.replace("%","")):E;E=(q.precision>0)?Math.round(E*(10*q.precision))/(10*q.precision):Math.round(E);o.percent=E;if(!o.has.total()){o.value=(q.precision>0)?Math.round((E/100)*o.total*(10*q.precision))/(10*q.precision):Math.round((E/100)*o.total*10)/10;if(q.limitValues){o.value=(o.value>100)?100:(o.value<0)?0:o.value}}o.set.barWidth(E);o.set.labelInterval();o.set.labels();q.onChange.call(t,E,o.value,o.total)},labelInterval:function(){var E=function(){o.verbose("Bar finished animating, removing continuous label updates");clearInterval(o.interval);D=false;o.set.labels()};clearInterval(o.interval);p.one(n+C,E);o.timer=setTimeout(E,q.duration+100);D=true;o.interval=setInterval(o.set.labels,q.framerate)},labels:function(){o.verbose("Setting both bar progress and outer label text");o.set.barLabel();o.set.state()},label:function(E){E=E||"";if(E){E=o.get.text(E);o.debug("Setting label to text",E);y.text(E)}},state:function(E){E=(E!==d)?E:o.percent;if(E===100){if(q.autoSuccess&&!(o.is.warning()||o.is.error())){o.set.success();o.debug("Automatically triggering success at 100%")}else{o.verbose("Reached 100% removing active state");o.remove.active()}}else{if(E>0){o.verbose("Adjusting active progress bar label",E);o.set.active()}else{o.remove.active();o.set.label(q.text.active)}}},barLabel:function(E){if(E!==d){w.text(o.get.text(E))}else{if(q.label=="ratio"&&o.total){o.debug("Adding ratio to bar label");w.text(o.get.text(q.text.ratio))}else{if(q.label=="percent"){o.debug("Adding percentage to bar label");w.text(o.get.text(q.text.percent))}}}},active:function(E){E=E||q.text.active;o.debug("Setting active state");if(q.showActivity&&!o.is.active()){z.addClass(v.active)}o.remove.warning();o.remove.error();o.remove.success();if(E){o.set.label(E)}q.onActive.call(t,o.value,o.total)},success:function(E){E=E||q.text.success;o.debug("Setting success state");z.addClass(v.success);o.remove.active();o.remove.warning();o.remove.error();o.complete();if(E){o.set.label(E)}q.onSuccess.call(t,o.total)},warning:function(E){E=E||q.text.warning;o.debug("Setting warning state");z.addClass(v.warning);o.remove.active();o.remove.success();o.remove.error();o.complete();if(E){o.set.label(E)}q.onWarning.call(t,o.value,o.total)},error:function(E){E=E||q.text.error;o.debug("Setting error state");z.addClass(v.error);o.remove.active();o.remove.success();o.remove.warning();o.complete();if(E){o.set.label(E)}q.onError.call(t,o.value,o.total)},transitionEvent:function(){n=o.get.transitionEnd()},total:function(E){o.total=E},value:function(E){o.value=E},progress:function(F){var G=o.get.numericValue(F),E;if(G===false){o.error(x.nonNumeric,F)}if(o.has.total()){o.set.value(G);E=(G/o.total)*100;o.debug("Calculating percent complete from total",E);o.set.percent(E)}else{E=G;o.debug("Setting value to exact percentage value",E);o.set.percent(E)}}},setting:function(E,F){o.debug("Changing setting",E,F);if(c.isPlainObject(E)){c.extend(true,q,E)}else{if(F!==d){q[E]=F}else{return q[E]}}},internal:function(E,F){if(c.isPlainObject(E)){c.extend(true,o,E)}else{if(F!==d){o[E]=F}else{return o[E]}}},debug:function(){if(q.debug){if(q.performance){o.performance.log(arguments)}else{o.debug=Function.prototype.bind.call(console.info,console,q.name+":");o.debug.apply(console,arguments)}}},verbose:function(){if(q.verbose&&q.debug){if(q.performance){o.performance.log(arguments)}else{o.verbose=Function.prototype.bind.call(console.info,console,q.name+":");o.verbose.apply(console,arguments)}}},error:function(){o.error=Function.prototype.bind.call(console.error,console,q.name+":");o.error.apply(console,arguments)},performance:{log:function(G){var F,H,E;if(q.performance){F=new Date().getTime();E=f||F;H=F-E;f=F;j.push({Name:G[0],Arguments:[].slice.call(G,1)||"",Element:t,"Execution Time":H})}clearTimeout(o.performance.timer);o.performance.timer=setTimeout(o.performance.display,500)},display:function(){var F=q.name+":",E=0;f=false;clearTimeout(o.performance.timer);c.each(j,function(G,H){E+=H["Execution Time"]});F+=" "+E+"ms";if(h){F+=" '"+h+"'"}if((console.group!==d||console.table!==d)&&j.length>0){console.groupCollapsed(F);if(console.table){console.table(j)}else{c.each(j,function(G,H){console.log(H.Name+": "+H["Execution Time"]+"ms")})}console.groupEnd()}j=[]}},invoke:function(J,F,H){var G=B,K,I,E;F=F||l;H=t||H;if(typeof J=="string"&&G!==d){J=J.split(/[\. ]/);K=J.length-1;c.each(J,function(N,M){var L=(N!=K)?M+J[N+1].charAt(0).toUpperCase()+J[N+1].slice(1):J;if(c.isPlainObject(G[L])&&(N!=K)){G=G[L]}else{if(G[L]!==d){I=G[L];return false}else{if(c.isPlainObject(G[M])&&(N!=K)){G=G[M]}else{if(G[M]!==d){I=G[M];return false}else{o.error(x.method,J);return false}}}}})}if(c.isFunction(I)){E=I.apply(H,F)}else{if(I!==d){E=I}}if(c.isArray(g)){g.push(E)}else{if(g!==d){g=[g,E]}else{if(E!==d){g=E}}}return I}};if(e){if(B===d){o.initialize()}o.invoke(i)}else{if(B!==d){B.invoke("destroy")}o.initialize()}});return(g!==d)?g:this};c.fn.progress.settings={name:"Progress",namespace:"progress",debug:false,verbose:false,performance:true,random:{min:2,max:5},duration:300,autoSuccess:true,showActivity:true,limitValues:true,label:"percent",precision:0,framerate:(1000/30),percent:false,total:false,value:false,onChange:function(f,g,e){},onSuccess:function(e){},onActive:function(f,e){},onError:function(f,e){},onWarning:function(f,e){},error:{method:"The method you called is not defined.",nonNumeric:"Progress value is non numeric",tooHigh:"Value specified is above 100%",tooLow:"Value specified is below 0%"},regExp:{variable:/\{\$*[A-z0-9]+\}/g},metadata:{percent:"percent",total:"total",value:"value"},selector:{bar:"> .bar",label:"> .label",progress:".bar > .progress"},text:{active:false,error:false,success:false,warning:false,percent:"{percent}%",ratio:"{value} of {total}"},className:{active:"active",error:"error",success:"success",warning:"warning"}}})(jQuery,window,document);