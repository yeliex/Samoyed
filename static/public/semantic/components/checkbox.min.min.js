/*!
 * # Semantic UI x.x - Checkbox
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Copyright 2015 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;(function(h,e,f,g){h.fn.checkbox=function(a){var c=h(this),o=c.selector||"",q=new Date().getTime(),d=[],n=arguments[0],r=(typeof n=="string"),b=[].slice.call(arguments,1),p;c.each(function(){var l=h.extend(true,{},h.fn.checkbox.settings,a),H=l.className,k=l.namespace,j=l.selector,G=l.error,m="."+k,J="module-"+k,D=h(this),E=h(this).children(j.label),F=h(this).children(j.input),C=D.data(J),I,i=this,B;B={initialize:function(){B.verbose("Initializing checkbox",l);B.create.label();B.bind.events();B.set.tabbable();B.hide.input();B.observeChanges();B.instantiate();B.setup()},instantiate:function(){B.verbose("Storing instance of module",B);C=B;D.data(J,B)},destroy:function(){B.verbose("Destroying module");B.unbind.events();B.show.input();D.removeData(J)},fix:{reference:function(){if(D.is(j.input)){B.debug("Behavior called on <input> adjusting invoked element");D=D.closest(j.checkbox);B.refresh()}}},setup:function(){if(B.is.indeterminate()){B.debug("Initial value is indeterminate");B.set.indeterminate();if(l.fireOnInit){l.onIndeterminate.call(F[0]);l.onChange.call(F[0])}}else{if(B.is.checked()){B.debug("Initial value is checked");B.set.checked();if(l.fireOnInit){l.onChecked.call(F[0]);l.onChange.call(F[0])}}else{B.debug("Initial value is unchecked");B.set.unchecked();if(l.fireOnInit){l.onUnchecked.call(F[0]);l.onChange.call(F[0])}}}},refresh:function(){E=D.children(j.label);F=D.children(j.input)},hide:{input:function(){B.verbose("Modfying <input> z-index to be unselectable");F.addClass(H.hidden)}},show:{input:function(){B.verbose("Modfying <input> z-index to be selectable");F.removeClass(H.hidden)}},observeChanges:function(){if("MutationObserver" in e){I=new MutationObserver(function(s){B.debug("DOM tree modified, updating selector cache");B.refresh()});I.observe(i,{childList:true,subtree:true});B.debug("Setting up mutation observer",I)}},attachEvents:function(u,s){var t=h(u);s=h.isFunction(B[s])?B[s]:B.toggle;if(t.length>0){B.debug("Attaching checkbox events to element",u,s);t.on("click"+m,s)}else{B.error(G.notFound)}},event:{click:function(s){if(h(s.target).is(j.input)){B.verbose("Using default check action on initialized checkbox");return}B.toggle()},keydown:function(t){var u=t.which,s={enter:13,space:32,escape:27};if(u==s.escape){B.verbose("Escape key pressed blurring field");F.blur();t.preventDefault()}if(!t.ctrlKey&&(u==s.enter||u==s.space)){B.verbose("Enter key pressed, toggling checkbox");B.toggle();t.preventDefault()}}},check:function(){if(!B.is.indeterminate()&&B.is.checked()){B.debug("Checkbox is already checked");return}B.debug("Checking checkbox",F);B.set.checked();l.onChecked.call(F[0]);l.onChange.call(F[0])},uncheck:function(){if(!B.is.indeterminate()&&B.is.unchecked()){B.debug("Checkbox is already unchecked");return}B.debug("Unchecking checkbox");B.set.unchecked();l.onUnchecked.call(F[0]);l.onChange.call(F[0])},indeterminate:function(){if(B.is.indeterminate()){B.debug("Checkbox is already indeterminate");return}B.debug("Making checkbox indeterminate");B.set.indeterminate();l.onIndeterminate.call(F[0]);l.onChange.call(F[0])},determinate:function(){if(B.is.determinate()){B.debug("Checkbox is already determinate");return}B.debug("Making checkbox determinate");B.set.determinate();l.onDeterminate.call(F[0]);l.onChange.call(F[0])},enable:function(){if(B.is.enabled()){B.debug("Checkbox is already enabled");return}B.debug("Enabling checkbox");B.set.enabled();l.onEnable.call(F[0])},disable:function(){if(B.is.disabled()){B.debug("Checkbox is already disabled");return}B.debug("Disabling checkbox");B.set.disabled();l.onDisable.call(F[0])},get:{radios:function(){var s=B.get.name();return h('input[name="'+s+'"]').closest(j.checkbox)},otherRadios:function(){return B.get.radios().not(D)},name:function(){return F.attr("name")}},is:{radio:function(){return(F.hasClass(H.radio)||F.attr("type")=="radio")},indeterminate:function(){return F.prop("indeterminate")!==g&&F.prop("indeterminate")},checked:function(){return F.prop("checked")!==g&&F.prop("checked")},disabled:function(){return F.prop("disabled")!==g&&F.prop("disabled")},enabled:function(){return !B.is.disabled()},determinate:function(){return !B.is.indeterminate()},unchecked:function(){return !B.is.checked()}},can:{change:function(){return !(D.hasClass(H.disabled)||D.hasClass(H.readOnly)||F.prop("disabled")||F.prop("readonly"))},uncheck:function(){return(typeof l.uncheckable==="boolean")?l.uncheckable:!B.is.radio()}},set:{checked:function(){B.verbose("Setting class to checked");D.removeClass(H.indeterminate).addClass(H.checked);if(B.is.radio()){B.uncheckOthers()}if(!B.is.indeterminate()&&B.is.checked()){B.debug("Input is already checked, skipping input property change");return}B.verbose("Setting state to checked",F[0]);F.prop("indeterminate",false).prop("checked",true);B.trigger.change()},unchecked:function(){B.verbose("Removing checked class");D.removeClass(H.indeterminate).removeClass(H.checked);if(!B.is.indeterminate()&&B.is.unchecked()){B.debug("Input is already unchecked");return}B.debug("Setting state to unchecked");F.prop("indeterminate",false).prop("checked",false);B.trigger.change()},indeterminate:function(){B.verbose("Setting class to indeterminate");D.addClass(H.indeterminate);if(B.is.indeterminate()){B.debug("Input is already indeterminate, skipping input property change");return}B.debug("Setting state to indeterminate");F.prop("indeterminate",true);B.trigger.change()},determinate:function(){B.verbose("Removing indeterminate class");D.removeClass(H.indeterminate);if(B.is.determinate()){B.debug("Input is already determinate, skipping input property change");return}B.debug("Setting state to determinate");F.prop("indeterminate",false)},disabled:function(){B.verbose("Setting class to disabled");D.addClass(H.disabled);if(B.is.disabled()){B.debug("Input is already disabled, skipping input property change");return}B.debug("Setting state to disabled");F.prop("disabled","disabled");B.trigger.change()},enabled:function(){B.verbose("Removing disabled class");D.removeClass(H.disabled);if(B.is.enabled()){B.debug("Input is already enabled, skipping input property change");return}B.debug("Setting state to enabled");F.prop("disabled",false);B.trigger.change()},tabbable:function(){B.verbose("Adding tabindex to checkbox");if(F.attr("tabindex")===g){F.attr("tabindex",0)}}},trigger:{change:function(){B.verbose("Triggering change event from programmatic change");F.trigger("change")}},create:{label:function(){if(F.prevAll(j.label).length>0){F.prev(j.label).detach().insertAfter(F);B.debug("Moving existing label",E)}else{if(!B.has.label()){E=h("<label>").insertAfter(F);B.debug("Creating label",E)}}}},has:{label:function(){return(E.length>0)}},bind:{events:function(){B.verbose("Attaching checkbox events");D.on("click"+m,B.event.click).on("keydown"+m,j.input,B.event.keydown)}},unbind:{events:function(){B.debug("Removing events");D.off(m)}},uncheckOthers:function(){var s=B.get.otherRadios();B.debug("Unchecking other radios",s);s.removeClass(H.checked)},toggle:function(){if(!B.can.change()){if(!B.is.radio()){B.debug("Checkbox is read-only or disabled, ignoring toggle")}return}if(B.is.indeterminate()||B.is.unchecked()){B.debug("Currently unchecked");B.check()}else{if(B.is.checked()&&B.can.uncheck()){B.debug("Currently checked");B.uncheck()}}},setting:function(t,s){B.debug("Changing setting",t,s);if(h.isPlainObject(t)){h.extend(true,l,t)}else{if(s!==g){l[t]=s}else{return l[t]}}},internal:function(t,s){if(h.isPlainObject(t)){h.extend(true,B,t)}else{if(s!==g){B[t]=s}else{return B[t]}}},debug:function(){if(l.debug){if(l.performance){B.performance.log(arguments)}else{B.debug=Function.prototype.bind.call(console.info,console,l.name+":");B.debug.apply(console,arguments)}}},verbose:function(){if(l.verbose&&l.debug){if(l.performance){B.performance.log(arguments)}else{B.verbose=Function.prototype.bind.call(console.info,console,l.name+":");B.verbose.apply(console,arguments)}}},error:function(){B.error=Function.prototype.bind.call(console.error,console,l.name+":");B.error.apply(console,arguments)},performance:{log:function(t){var u,s,v;if(l.performance){u=new Date().getTime();v=q||u;s=u-v;q=u;d.push({Name:t[0],Arguments:[].slice.call(t,1)||"",Element:i,"Execution Time":s})}clearTimeout(B.performance.timer);B.performance.timer=setTimeout(B.performance.display,500)},display:function(){var s=l.name+":",t=0;q=false;clearTimeout(B.performance.timer);h.each(d,function(v,u){t+=u["Execution Time"]});s+=" "+t+"ms";if(o){s+=" '"+o+"'"}if((console.group!==g||console.table!==g)&&d.length>0){console.groupCollapsed(s);if(console.table){console.table(d)}else{h.each(d,function(v,u){console.log(u.Name+": "+u["Execution Time"]+"ms")})}console.groupEnd()}d=[]}},invoke:function(t,x,v){var w=C,s,u,y;x=x||b;v=i||v;if(typeof t=="string"&&w!==g){t=t.split(/[\. ]/);s=t.length-1;h.each(t,function(z,A){var L=(z!=s)?A+t[z+1].charAt(0).toUpperCase()+t[z+1].slice(1):t;if(h.isPlainObject(w[L])&&(z!=s)){w=w[L]}else{if(w[L]!==g){u=w[L];return false}else{if(h.isPlainObject(w[A])&&(z!=s)){w=w[A]}else{if(w[A]!==g){u=w[A];return false}else{B.error(G.method,t);return false}}}}})}if(h.isFunction(u)){y=u.apply(v,x)}else{if(u!==g){y=u}}if(h.isArray(p)){p.push(y)}else{if(p!==g){p=[p,y]}else{if(y!==g){p=y}}}return u}};if(r){if(C===g){B.initialize()}B.invoke(n)}else{if(C!==g){C.invoke("destroy")}B.initialize()}});return(p!==g)?p:this};h.fn.checkbox.settings={name:"Checkbox",namespace:"checkbox",debug:false,verbose:true,performance:true,uncheckable:"auto",fireOnInit:false,onChange:function(){},onChecked:function(){},onUnchecked:function(){},onDeterminate:function(){},onIndeterminate:function(){},onEnabled:function(){},onDisabled:function(){},className:{checked:"checked",indeterminate:"indeterminate",disabled:"disabled",hidden:"hidden",radio:"radio",readOnly:"read-only"},error:{method:"The method you called is not defined"},selector:{checkbox:".ui.checkbox",label:"label, .box",input:'input[type="checkbox"], input[type="radio"]'}}})(jQuery,window,document);