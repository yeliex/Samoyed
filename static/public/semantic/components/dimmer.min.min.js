/*!
 * # Semantic UI x.x - Dimmer
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Copyright 2015 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;(function(h,e,f,g){h.fn.dimmer=function(o){var b=h(this),c=new Date().getTime(),a=[],m=arguments[0],p=(typeof m=="string"),n=[].slice.call(arguments,1),d;b.each(function(){var l=(h.isPlainObject(o))?h.extend(true,{},h.fn.dimmer.settings,o):h.extend({},h.fn.dimmer.settings),j=l.selector,k=l.namespace,I=l.className,H=l.error,B="."+k,L="module-"+k,J=b.selector||"",E=("ontouchstart" in f.documentElement)?"touchstart":"click",G=h(this),C,K,i=this,F=G.data(L),D;D={preinitialize:function(){if(D.is.dimmer()){K=G.parent();C=G}else{K=G;if(D.has.dimmer()){if(l.dimmerName){C=K.find(j.dimmer).filter("."+l.dimmerName)}else{C=K.find(j.dimmer)}}else{C=D.create()}}},initialize:function(){D.debug("Initializing dimmer",l);D.bind.events();D.set.dimmable();D.instantiate()},instantiate:function(){D.verbose("Storing instance of module",D);F=D;G.data(L,F)},destroy:function(){D.verbose("Destroying previous module",C);D.unbind.events();D.remove.variation();K.off(B)},bind:{events:function(){if(l.on=="hover"){K.on("mouseenter"+B,D.show).on("mouseleave"+B,D.hide)}else{if(l.on=="click"){K.on(E+B,D.toggle)}}if(D.is.page()){D.debug("Setting as a page dimmer",K);D.set.pageDimmer()}if(D.is.closable()){D.verbose("Adding dimmer close event",C);K.on(E+B,j.dimmer,D.event.click)}}},unbind:{events:function(){G.removeData(L)}},event:{click:function(q){D.verbose("Determining if event occured on dimmer",q);if(C.find(q.target).length===0||h(q.target).is(j.content)){D.hide();q.stopImmediatePropagation()}}},addContent:function(q){var r=h(q);D.debug("Add content to dimmer",r);if(r.parent()[0]!==C[0]){r.detach().appendTo(C)}},create:function(){var q=h(l.template.dimmer());if(l.variation){D.debug("Creating dimmer with variation",l.variation);q.addClass(l.variation)}if(l.dimmerName){D.debug("Creating named dimmer",l.dimmerName);q.addClass(l.dimmerName)}q.appendTo(K);return q},show:function(q){q=h.isFunction(q)?q:function(){};D.debug("Showing dimmer",C,l);if((!D.is.dimmed()||D.is.animating())&&D.is.enabled()){D.animate.show(q);l.onShow.call(i);l.onChange.call(i)}else{D.debug("Dimmer is already shown or disabled")}},hide:function(q){q=h.isFunction(q)?q:function(){};if(D.is.dimmed()||D.is.animating()){D.debug("Hiding dimmer",C);D.animate.hide(q);l.onHide.call(i);l.onChange.call(i)}else{D.debug("Dimmer is not visible")}},toggle:function(){D.verbose("Toggling dimmer visibility",C);if(!D.is.dimmed()){D.show()}else{D.hide()}},animate:{show:function(q){q=h.isFunction(q)?q:function(){};if(l.useCSS&&h.fn.transition!==g&&C.transition("is supported")){if(l.opacity!=="auto"){D.set.opacity()}C.transition({animation:l.transition+" in",queue:false,duration:D.get.duration(),useFailSafe:true,onStart:function(){D.set.dimmed()},onComplete:function(){D.set.active();q()}})}else{D.verbose("Showing dimmer animation with javascript");D.set.dimmed();if(l.opacity=="auto"){l.opacity=0.8}C.stop().css({opacity:0,width:"100%",height:"100%"}).fadeTo(D.get.duration(),l.opacity,function(){C.removeAttr("style");D.set.active();q()})}},hide:function(q){q=h.isFunction(q)?q:function(){};if(l.useCSS&&h.fn.transition!==g&&C.transition("is supported")){D.verbose("Hiding dimmer with css");C.transition({animation:l.transition+" out",queue:false,duration:D.get.duration(),useFailSafe:true,onStart:function(){D.remove.dimmed()},onComplete:function(){D.remove.active();q()}})}else{D.verbose("Hiding dimmer with javascript");D.remove.dimmed();C.stop().fadeOut(D.get.duration(),function(){D.remove.active();C.removeAttr("style");q()})}}},get:{dimmer:function(){return C},duration:function(){if(typeof l.duration=="object"){if(D.is.active()){return l.duration.hide}else{return l.duration.show}}return l.duration}},has:{dimmer:function(){if(l.dimmerName){return(G.find(j.dimmer).filter("."+l.dimmerName).length>0)}else{return(G.find(j.dimmer).length>0)}}},is:{active:function(){return C.hasClass(I.active)},animating:function(){return(C.is(":animated")||C.hasClass(I.animating))},closable:function(){if(l.closable=="auto"){if(l.on=="hover"){return false}return true}return l.closable},dimmer:function(){return G.hasClass(I.dimmer)},dimmable:function(){return G.hasClass(I.dimmable)},dimmed:function(){return K.hasClass(I.dimmed)},disabled:function(){return K.hasClass(I.disabled)},enabled:function(){return !D.is.disabled()},page:function(){return K.is("body")},pageDimmer:function(){return C.hasClass(I.pageDimmer)}},can:{show:function(){return !C.hasClass(I.disabled)}},set:{opacity:function(r){var s=C.css("background-color"),q=s.split(","),t=(q&&q.length==4);r=l.opacity||r;if(t){q[3]=r+")";s=q.join(",")}else{s="rgba(0, 0, 0, "+r+")"}D.debug("Setting opacity to",r);C.css("background-color",s)},active:function(){C.addClass(I.active)},dimmable:function(){K.addClass(I.dimmable)},dimmed:function(){K.addClass(I.dimmed)},pageDimmer:function(){C.addClass(I.pageDimmer)},disabled:function(){C.addClass(I.disabled)},variation:function(q){q=q||l.variation;if(q){C.addClass(q)}}},remove:{active:function(){C.removeClass(I.active)},dimmed:function(){K.removeClass(I.dimmed)},disabled:function(){C.removeClass(I.disabled)},variation:function(q){q=q||l.variation;if(q){C.removeClass(q)}}},setting:function(r,q){D.debug("Changing setting",r,q);if(h.isPlainObject(r)){h.extend(true,l,r)}else{if(q!==g){l[r]=q}else{return l[r]}}},internal:function(r,q){if(h.isPlainObject(r)){h.extend(true,D,r)}else{if(q!==g){D[r]=q}else{return D[r]}}},debug:function(){if(l.debug){if(l.performance){D.performance.log(arguments)}else{D.debug=Function.prototype.bind.call(console.info,console,l.name+":");D.debug.apply(console,arguments)}}},verbose:function(){if(l.verbose&&l.debug){if(l.performance){D.performance.log(arguments)}else{D.verbose=Function.prototype.bind.call(console.info,console,l.name+":");D.verbose.apply(console,arguments)}}},error:function(){D.error=Function.prototype.bind.call(console.error,console,l.name+":");D.error.apply(console,arguments)},performance:{log:function(r){var s,q,t;if(l.performance){s=new Date().getTime();t=c||s;q=s-t;c=s;a.push({Name:r[0],Arguments:[].slice.call(r,1)||"",Element:i,"Execution Time":q})}clearTimeout(D.performance.timer);D.performance.timer=setTimeout(D.performance.display,500)},display:function(){var q=l.name+":",r=0;c=false;clearTimeout(D.performance.timer);h.each(a,function(t,s){r+=s["Execution Time"]});q+=" "+r+"ms";if(J){q+=" '"+J+"'"}if(b.length>1){q+=" ("+b.length+")"}if((console.group!==g||console.table!==g)&&a.length>0){console.groupCollapsed(q);if(console.table){console.table(a)}else{h.each(a,function(t,s){console.log(s.Name+": "+s["Execution Time"]+"ms")})}console.groupEnd()}a=[]}},invoke:function(r,v,t){var u=F,q,s,w;v=v||n;t=i||t;if(typeof r=="string"&&u!==g){r=r.split(/[\. ]/);q=r.length-1;h.each(r,function(x,y){var z=(x!=q)?y+r[x+1].charAt(0).toUpperCase()+r[x+1].slice(1):r;if(h.isPlainObject(u[z])&&(x!=q)){u=u[z]}else{if(u[z]!==g){s=u[z];return false}else{if(h.isPlainObject(u[y])&&(x!=q)){u=u[y]}else{if(u[y]!==g){s=u[y];return false}else{D.error(H.method,r);return false}}}}})}if(h.isFunction(s)){w=s.apply(t,v)}else{if(s!==g){w=s}}if(h.isArray(d)){d.push(w)}else{if(d!==g){d=[d,w]}else{if(w!==g){d=w}}}return s}};D.preinitialize();if(p){if(F===g){D.initialize()}D.invoke(m)}else{if(F!==g){F.invoke("destroy")}D.initialize()}});return(d!==g)?d:this};h.fn.dimmer.settings={name:"Dimmer",namespace:"dimmer",debug:false,verbose:false,performance:true,dimmerName:false,variation:false,closable:"auto",useCSS:true,transition:"fade",on:false,opacity:"auto",duration:{show:500,hide:500},onChange:function(){},onShow:function(){},onHide:function(){},error:{method:"The method you called is not defined."},className:{active:"active",animating:"animating",dimmable:"dimmable",dimmed:"dimmed",dimmer:"dimmer",disabled:"disabled",hide:"hide",pageDimmer:"page",show:"show"},selector:{dimmer:"> .ui.dimmer",content:".ui.dimmer > .content, .ui.dimmer > .content > .center"},template:{dimmer:function(){return h("<div />").attr("class","ui dimmer")}}}})(jQuery,window,document);