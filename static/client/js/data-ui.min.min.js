function resetUnitsListUI(){var g=$(".units-list .row");var h=g.length;for(var f=0;f<h;f++){if(f%2!=0){var e=g[f];e.setAttribute("class","row second")}}}var pos=new Array(0,0);var building;var map;function initMap(h,j,n){pos[0]=h;pos[1]=j;building=n;var i=new AMap.LngLat(h,j);map=new AMap.Map("map-content",{dragEnable:true,zoomEnable:false,view:new AMap.View2D({center:i,zoom:12})});var k=new AMap.Marker({map:map,position:i,icon:"http://webapi.amap.com/images/0.png"});var m=[];m.push("<b>"+n.name+"</b>");m.push(n.area+"-"+n.add);var l=new AMap.InfoWindow({offset:new AMap.Pixel(0,-23),content:m.join("<br>")});l.open(map,k.getPosition());AMap.event.addListener(k,"click",function(a){l.open(map,k.getPosition())})}function initPanorama(e,g){var f=new qq.maps.LatLng(g,e);var h=new qq.maps.PanoramaService();h.getPano(f,1000,function(c){if(c){var a=c.svid;$("#map-content").removeAttr("class");$("#map-content").removeAttr("style");$("#map-content").html("");var b=new qq.maps.Panorama(document.getElementById("map-content"));b.setPano(a);qq.maps.event.addDomListener(b,"loaded",function(){setTimeout(function(){$("#map-content").children().children()[2].style.display="none"},1)})}else{$("#panorama-btn").addClass("disabled");$("#panorama-btn .visible.content").text("暂无街景");console.log(c,f,pos);onPanprama=false;return false}})}var onPanprama=false;$(function(){$("#panorama-btn").click(function(){var e=pos[0];var f=pos[1];var d=$("#panorama-btn .visible.content").text();if(onPanprama&&d==="地图"){initMap(e,f,building);onPanprama=false;$("#panorama-btn .visible.content").text("街景")}else{onPanprama=true;initPanorama(e,f);$("#panorama-btn .visible.content").text("地图")}});$("#refresh-btn").click(function(){var d=pos[0];var c=pos[1];if(onPanprama){initPanorama(d,c)}else{initMap(d,c,building)}});$("#zoom-btn").checkbox({onChecked:function(){map.setStatus({zoomEnable:true});$("#zoom-btn span").text("开")},onUnchecked:function(){map.setStatus({zoomEnable:false});$("#zoom-btn span").text("关")}})});function MapPos(d,c){this.apos=new AMap.LngLat(d,c);this.bpos=new BMap.Point(d,c)}function bindImgClicked(){$("img").bind("click",function(){var f=$(this).attr("src");var d=$(this);var e=$("#image-modal");if(d.hasClass("modal")){return}if(d.hasClass("image")){$("#image-modal span").text($(d[0].parentNode).text())}else{$("#image-modal span").text($(this).parentsUntil(".row").last().children().first().text())}$("#image-modal img").attr("src",f);e.css("max-height",window.outerHeight*0.8);e.modal("show")})};