function resetUnitsListUI(){var d=$(".units-list .row");var c=d.length;for(var a=0;a<c;a++){if(a%2!=0){var b=d[a];b.setAttribute("class","row second")}}}var pos=new Array(0,0);var building;var map;function initMap(b,g,c){pos[0]=b;pos[1]=g;building=c;var a=new AMap.LngLat(b,g);map=new AMap.Map("map-content",{dragEnable:true,zoomEnable:false,view:new AMap.View2D({center:a,zoom:12})});var f=new AMap.Marker({map:map,position:a,icon:"http://webapi.amap.com/images/0.png"});var d=[];d.push("<b>"+c.name+"</b>");d.push(c.area+"-"+c.add);var e=new AMap.InfoWindow({offset:new AMap.Pixel(0,-23),content:d.join("<br>")});e.open(map,f.getPosition());AMap.event.addListener(f,"click",function(h){e.open(map,f.getPosition())})}function initPanorama(b,d){var a=new qq.maps.LatLng(d,b);var c=new qq.maps.PanoramaService();c.getPano(a,1000,function(e){if(e){var g=e.svid;$("#map-content").removeAttr("class");$("#map-content").removeAttr("style");$("#map-content").html("");var f=new qq.maps.Panorama(document.getElementById("map-content"));f.setPano(g);qq.maps.event.addDomListener(f,"loaded",function(){setTimeout(function(){$("#map-content").children().children()[2].style.display="none"},1)})}else{$("#panorama-btn").addClass("disabled");$("#panorama-btn .visible.content").text("暂无街景");console.log(e,a,pos);onPanprama=false;return false}})}var onPanprama=false;$(function(){$("#panorama-btn").click(function(){var a=pos[0];var c=pos[1];var b=$("#panorama-btn .visible.content").text();if(onPanprama&&b==="地图"){initMap(a,c,building);onPanprama=false;$("#panorama-btn .visible.content").text("街景")}else{onPanprama=true;initPanorama(a,c);$("#panorama-btn .visible.content").text("地图")}});$("#refresh-btn").click(function(){var a=pos[0];var b=pos[1];if(onPanprama){initPanorama(a,b)}else{initMap(a,b,building)}});$("#zoom-btn").checkbox({onChecked:function(){map.setStatus({zoomEnable:true});$("#zoom-btn span").text("开")},onUnchecked:function(){map.setStatus({zoomEnable:false});$("#zoom-btn span").text("关")}})});function MapPos(a,b){this.apos=new AMap.LngLat(a,b);this.bpos=new BMap.Point(a,b)}function bindImgClicked(){$("img").bind("click",function(){var c=$(this).attr("src");var b=$(this);var a=$("#image-modal");if(b.hasClass("modal")){return}if(b.hasClass("image")){$("#image-modal span").text($(b[0].parentNode).text())}else{$("#image-modal span").text($(this).parentsUntil(".row").last().children().first().text())}$("#image-modal img").attr("src",c);a.css("max-height",window.outerHeight*0.8);a.modal("show")})};